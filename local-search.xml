<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>nginxå®éªŒå››</title>
    <link href="/blog/825860720.html"/>
    <url>/blog/825860720.html</url>
    
    <content type="html"><![CDATA[<h3 id="Nginx-PHPç¯å¢ƒæ­å»ºğŸ‘»ğŸ‘»ğŸ‘»"><a href="#Nginx-PHPç¯å¢ƒæ­å»ºğŸ‘»ğŸ‘»ğŸ‘»" class="headerlink" title="Nginx+PHPç¯å¢ƒæ­å»ºğŸ‘»ğŸ‘»ğŸ‘»"></a>Nginx+PHPç¯å¢ƒæ­å»ºğŸ‘»ğŸ‘»ğŸ‘»</h3><p class="note note-secondary">1.å®‰è£…PHPä¾èµ–åŒ…ï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> libxml2-devel openssl-devel curl-devel libjpeg-devel libpng-devel freetype-devel<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p class="note note-secondary">2.å®‰è£…libmcryptä¾èµ–</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> epel-releaseyum <span class="token function">install</span> libmcrypt-devel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">3.http://php.net ä¸‹è½½php-5.6.27.tar.gz</p><p class="note note-secondary">4.ç”¨å‘½ä»¤è§£å‹ç¼©ï¼Œè¿›å…¥php-5.6.27ç›®å½•</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#ç”¨è¯¥å‘½ä»¤è§£å‹ç¼©</span><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> php-5.6.27.tar.gz<span class="token comment">#è¿›å…¥php-5.6.27ç›®å½•</span><span class="token builtin class-name">cd</span> php-5.6.27<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">5.ç”¨./configure *å‘½ä»¤ç”Ÿæˆmakefileï¼Œå¯ç”¨./configure --helpæŸ¥çœ‹å¸®åŠ©</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/php --enable-fpm --with-zlib --enable-zip --enable-mbstring --with-mcrypt --with-mysql --with-mysql --with-pdo-mysql --with-gd --with-jpeg-dir --with-png-dir --with-freetype-dir --with-curl --with-openssl --with-mhash --enable-bcmath --enable-opcache<span class="token comment">#çœ‹è§ä¸‹é¢å°±ä»£è¡¨æˆåŠŸ</span>Thank you <span class="token keyword">for</span> using PHP.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">6.æ‰§è¡Œå‘½ä»¤ç¼–è¯‘å¹¶å®‰è£…php</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p class="note note-secondary">7.ç¼–å†™PHPé¡µé¢ï¼Œå­˜ä¸ºindex.php</p><figure><div class="code-wrapper"><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello World!\n"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;br>"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"Xu Pan\n"</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">8.é€šè¿‡å¦‚ä¸‹å‘½ä»¤æµ‹è¯•</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/usr/local/php/bin/php index.php<span class="token comment">#è§åˆ°å¦‚ä¸‹ä¾‹å­å°±è¡¨ç¤ºè¿è¡ŒæˆåŠŸ</span>Hello World<span class="token operator">!</span>Xu Pan<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">9.å¤åˆ¶PHP-FPMçš„é…ç½®æ–‡ä»¶</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /usr/local/php/etc<span class="token function">cp</span> php-fpm.conf.default php-fpm.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">10.å¯åŠ¨PHP-FPM</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#è¿›å…¥rootç›®å½•ä¸‹php-5.6.27ç›®å½•</span><span class="token builtin class-name">cd</span> ~/php-5.6.27<span class="token function">cp</span> sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm<span class="token comment">#ç»™/etc/init.d/php-fpmåŠ å…¥å¯æ‰§è¡Œæƒé™</span><span class="token function">chmod</span> +x /etc/init.d/php-fpm<span class="token comment">#æ·»åŠ ç³»ç»ŸæœåŠ¡</span><span class="token function">chkconfig</span> <span class="token parameter variable">--add</span> php-fpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">11.ç”¨å‘½ä»¤é‡æ–°å¯åŠ¨PHP-FPMï¼Œæ‰å¯ä»¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">service</span> php-fpm restart<span class="token comment">#ä¸‹é¢ä¸¤è¡Œç»“æœ</span>Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>Starting php-fpm  <span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">12.å¤åˆ¶php.ini</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> php.ini-development /usr/local/php/lib/php.ini<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p class="note note-secondary">13ã€14.å®‰è£…Nginx</p><blockquote><p>nginxç¼–è¯‘å®‰è£…åœ¨å…¶ä»–æ–‡ç« å·²ç»ç»™å‡º</p></blockquote><p><a href="https://xp_ww.gitee.io/blog/347607591.html">nginxç¼–è¯‘å®‰è£… - XP_WW (gitee.io)</a></p><p class="note note-secondary">15.ç¼–è¾‘nginxé…ç½®æ–‡ä»¶æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®é¡¹ï¼š</p><p><code>vi /usr/local/nginx/conf/nginx.conf</code></p><figure><div class="code-wrapper"><pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>    <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>        <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>        <span class="token directive"><span class="token keyword">index</span>  index.php</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">&#123;</span>        <span class="token directive"><span class="token keyword">root</span>           html</span><span class="token punctuation">;</span>        <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>        <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>        <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  /scripts<span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>        <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">16.é‡è½½nginxé…ç½®æ–‡ä»¶</p><p><span class="note note-danger">æ³¨æ„å¦‚æœå®‰è£…nginxæ—¶æ˜¯ç¼–è¯‘å®‰è£…å¹¶ä¸”åˆ›å»ºäº†æœåŠ¡è„šæœ¬å¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•é‡è½½nginxé…ç½®æ–‡ä»¶</span></p><p><code>systemctl restart nginx</code></p><p><span class="note note-danger">å¦åˆ™</span></p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> <span class="token comment">#å¹³æ»‘å¯åŠ¨nginx</span><span class="token comment">#æˆ–è€…</span>/usr/local/nginx/sbin/nginx <span class="token comment">#ç›´æ¥å¯åŠ¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">17.å°†æ­¥éª¤ï¼ˆ7ï¼‰çš„æµ‹è¯•é¡µé¢å¤åˆ¶åˆ°nginxçš„htmlç›®å½•</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> ~/index.php /usr/local/nginx/html/index.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p class="note note-secondary">18.è‹¥æœªå¼€æ”¾80ç«¯å£ï¼Œè¯·ç”¨å¦‚ä¸‹å‘½ä»¤å¼€æ”¾80ç«¯å£</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#å¼€æ”¾ç«¯å£</span>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp <span class="token parameter variable">--permanent</span><span class="token comment">#é‡å¯é˜²ç«å¢™</span>systemctl restart firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-secondary">19.æµè§ˆå™¨ä¸­è¾“å…¥http://192.168.*.*/index.phpï¼ˆè™šæ‹ŸæœºIPï¼‰ï¼Œè‹¥çœ‹åˆ°æ­¥éª¤ï¼ˆ7ï¼‰ä¸­çš„ç›¸å…³ä¿¡æ¯ï¼Œæ­å–œä½ æˆåŠŸäº†</p><p>ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥</p><h3 id="Nginx-Apache-PHPåŠ¨é™åˆ†ç¦»ğŸ¤¡ğŸ¤¡ğŸ¤¡"><a href="#Nginx-Apache-PHPåŠ¨é™åˆ†ç¦»ğŸ¤¡ğŸ¤¡ğŸ¤¡" class="headerlink" title="Nginx+Apache+PHPåŠ¨é™åˆ†ç¦»ğŸ¤¡ğŸ¤¡ğŸ¤¡"></a><em><strong>Nginx+Apache+PHPåŠ¨é™åˆ†ç¦»</strong></em>ğŸ¤¡ğŸ¤¡ğŸ¤¡</h3><p class="note note-success">1.ä¸‹è½½apache</p><p><code>wget https://downloads.apache.org/httpd/httpd-2.4.57.tar.gz</code></p><p class="note note-success">2.ç”¨å‘½ä»¤è§£å‹ç¼©httpd-2.4.57.tar.gz</p><p><code>tar -zxvf httpd-2.4.57.tar.gz</code></p><p class="note note-success">3.ä¸‹è½½APR and APR-Util</p><p><code>wget https://dlcdn.apache.org/apr/apr-1.7.4.tar.gz</code></p><p><code>wget https://dlcdn.apache.org//apr/apr-util-1.6.3.tar.gz</code></p><p class="note note-success">4.ç”¨å‘½ä»¤è§£å‹APR and APR-Util</p><p><code>tar -zxvf apr-1.7.4.tar.gz </code></p><p><code>tar -zxvf apr-util-1.6.3.tar.gz</code></p><p class="note note-success">5.ç”¨mvå‘½ä»¤å°†arp-1.7.4ç§»åˆ° httpd-2.4.57/srclib/apr</p><p><code>mv apr-1.7.4 httpd-2.4.57/srclib/ap</code></p><p class="note note-success">6.ç”¨mvå‘½ä»¤å°†apr-util-1.6.3ç§»åˆ° httpd-2.4.57/srclib/apr-util</p><p><code>mv apr-util-1.6.3 httpd-2.4.57/srclib/apr-util</code></p><p class="note note-success">7.å®‰è£…apacheä¾èµ–</p><p><code>yum -y install pcre-devel openssl-devel expat-devel</code></p><p class="note note-success">8.ç”Ÿæˆapacheçš„makefile</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#è¿›å…¥httpd-2.4.57ç›®å½•</span><span class="token builtin class-name">cd</span> httpd-2.4.57<span class="token comment">#ç”Ÿæˆmakefile</span>./configure --enable-so --enable-deflate --enable-ssl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">9.ç¼–è¯‘å®‰è£…apache</p><p><code>make &amp;&amp; make install</code></p><p class="note note-success">10.å»ºç«‹è„šæœ¬</p><p><code>vi /etc/init.d/httpd</code></p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span><span class="token comment">#chkconfig: 35 85 15</span>/usr/local/apache2/bin/apachectl <span class="token variable">$1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">11.é‡‡ç”¨å‘½ä»¤ä¸ºæ­¥éª¤ï¼ˆ10ï¼‰å»ºç«‹çš„è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</p><p><code>chmod +x /etc/init.d/httpd </code></p><p class="note note-success">12.é‡‡ç”¨å‘½ä»¤å¯åŠ¨apache</p><p><code>service httpd start</code></p><p><span class="note note-danger">æ³¨æ„ï¼š<span></p><p>ä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹è­¦å‘Šï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">AH00558: httpd: Could not reliably determine the server<span class="token string">'s fully qualified domain name, using fe80::987b:1cbe:6f72:2bdb%ens33. Set the '</span>ServerName' directive globally to suppress this message<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>è¿™ä¸ªå¹¶ä¸å½±å“ç»“æœï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹ï¼Œå¦‚æœä½ æƒ³è§£å†³ï¼Œå‚è€ƒä¸‹é¢æ­¥éª¤ï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /usr/local/apache2/conf/httpd.conf<span class="token comment">#ç„¶åæŠŠ</span><span class="token comment">#ServerName www.example.com:80 æ”¹ä¸ºï¼šServerName localhost:80</span><span class="token comment">#æœ€åé‡å¯apache</span><span class="token function">service</span> httpd restart<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">13.è‹¥æœªå¼€æ”¾80ç«¯å£ï¼Œè¯·å¼€æ”¾80ç«¯å£</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#å¼€æ”¾ç«¯å£</span>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp <span class="token parameter variable">--permanent</span><span class="token comment">#é‡å¯é˜²ç«å¢™</span>systemctl restart firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">14.è®¿é—®æµ‹è¯•apache</p><p><code>æµè§ˆå™¨è¾“å…¥192.168.*.*ï¼ˆè™šæ‹ŸæœºIPï¼‰</code></p><p>å½“ä½ çœ‹åˆ°<code>It works!</code>,æ­å–œä½ å¯åŠ¨æˆåŠŸğŸ‡ğŸ‡ğŸ‡</p><p class="note note-success">15.æ‰¾åˆ°apacheé…ç½®æ–‡ä»¶ï¼Œå–æ¶ˆå¦‚ä¸‹è¡Œçš„æ³¨é‡Šï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /usr/local/apache2/conf/httpd.conf<span class="token comment">#Include conf/extra/httpd-vhosts.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">16.é…ç½®è™šæ‹Ÿä¸»æœº</p><p><code>vi /usr/local/apache2/conf/extra/httpd-vhosts.conf åŠ å…¥ä¸‹é¢å†…å®¹</code></p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>80</span><span class="token punctuation">></span></span>    DocumentRoot "/usr/local/apache2/htdocs/www.test.com"    ServerName www.test.com    ServerAlias test.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">17.åœ¨httpd.confä¸­æ·»åŠ apacheå¯¹phpçš„æ”¯æŒ</p><p><code>vi /usr/local/apache2/conf/httpd.conf</code></p><p><code>åŠ å…¥ä¸‹é¢å†…å®¹</code></p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilesMatch</span> <span class="token attr-name">"\.php$"</span><span class="token punctuation">></span></span>setHandler application/x-httpd-php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilesMatch</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">18.ä¿®æ”¹apacheçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®</p><p><code>vi /usr/local/apache2/conf/httpd.conf</code></p><p><code>åŠ å…¥ä¸‹é¢å†…å®¹</code></p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfModule</span> <span class="token attr-name">ssl_module</span><span class="token punctuation">></span></span>    DirectoryIndex index.html index.php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">19.æ‰“å¼€apxsæ–‡ä»¶</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /usr/local/apache2/bin/apxs<span class="token comment">#å°†ç¬¬ä¸€è¡Œ</span><span class="token operator">!</span>/replace/with/path/to/perl/interpreter <span class="token parameter variable">-w</span><span class="token comment">#æ›¿æ¢ä¸ºperlçš„å…·ä½“è·¯å¾„ï¼Œæ¯”å¦‚ï¼š#!/usr/bin/perl</span><span class="token function">whereis</span> perl <span class="token comment">#æŸ¥çœ‹perlçš„å…·ä½“è·¯å¾„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-warning">20.ç¼–è¯‘å®‰è£…phpï¼ˆä¸Šæ–‡å·²ç»ä»‹ç»ï¼‰</p><p class="note note-success">21.ç”¨å‘½ä»¤é‡æ–°å¯åŠ¨apacheæœåŠ¡å™¨</p><p><code>service httpd start</code></p><p class="note note-success">22.åˆ©ç”¨echoå‘½ä»¤åˆ›å»ºä¸€ä¸ªç®€å•çš„index.phpé¡µé¢ï¼Œä¿å­˜è‡³apacheçš„htdocsçš„www.test.comç›®å½•ä¸‹ã€‚</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"&lt;?php<span class="token entity" title="\n">\n</span>phpinfo();<span class="token entity" title="\n">\n</span>?>"</span> <span class="token operator">></span> /usr/local/apache2/htdocs/www.test.com/index.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nginxå®éªŒä¸‰</title>
    <link href="/blog/2112605806.html"/>
    <url>/blog/2112605806.html</url>
    
    <content type="html"><![CDATA[<h2 id="nginxå®éªŒæŒ‘æˆ˜é¢˜"><a href="#nginxå®éªŒæŒ‘æˆ˜é¢˜" class="headerlink" title="nginxå®éªŒæŒ‘æˆ˜é¢˜"></a>nginxå®éªŒæŒ‘æˆ˜é¢˜</h2><p class="note note-success">1.é…ç½®åŸºäºIPçš„è™šæ‹Ÿä¸»æœºã€‚æ¯”å¦‚é€šè¿‡http://192.168.37.3/å’Œhttp://192.168.37.8/å¯ä»¥åˆ†åˆ«æ‰“å¼€ä¸åŒçš„ç½‘ç«™</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#1.é…ç½®è™šæ‹Ÿä¸»æœº(åŸºäºip)</span><span class="token function">ifconfig</span> ens33:1 <span class="token number">192.168</span>.37.8<span class="token comment">#2.ä¿®æ”¹nginx.confé…ç½®æ–‡ä»¶</span>server <span class="token punctuation">&#123;</span>    listen <span class="token number">192.168</span>.37.8:80<span class="token punctuation">;</span><span class="token comment">#ç›‘å¬IPå’Œç«¯å£</span>    server_name <span class="token number">192.168</span>.37.8<span class="token punctuation">;</span>    root html/html378<span class="token punctuation">;</span>    index index.html index.htm<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">#3.é‡å¯nginxæœåŠ¡</span>Systemctl restart nginx<span class="token comment">#4.è¿›å…¥æµè§ˆå™¨åˆ†åˆ«è®¿é—®192.168.37.3å’Œ192.168.37.8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">2.é…ç½®åŸºäºåŸŸåçš„è™šæ‹Ÿä¸»æœºã€‚æ¯”å¦‚é€šè¿‡http://www.xp.com/å’Œhttp://www.xp.net/å¯ä»¥åˆ†åˆ«æ‰“å¼€ä¸åŒçš„ç½‘ç«™</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#1.ä¸ºè™šæ‹Ÿæœºè§£æåŸŸå</span><span class="token function">vi</span> /etc/hostname<span class="token number">192.168</span>.37.3 www.xp.com www.xp.net<span class="token comment">#2.ä¿®æ”¹nginx.conf</span>server <span class="token punctuation">&#123;</span>     listen <span class="token number">80</span><span class="token punctuation">;</span>     server_name www.xp.com<span class="token punctuation">;</span>     root html/htmlcom<span class="token punctuation">;</span>     index index.html index.htm<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>server <span class="token punctuation">&#123;</span>   listen <span class="token number">80</span><span class="token punctuation">;</span>   server_name www.xp.net<span class="token punctuation">;</span>   root html/htmlnet<span class="token punctuation">;</span>   index index.html index.htm<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">#3.æ­¤æ—¶åªèƒ½åœ¨è™šæ‹Ÿæœºæœ¬æœºè®¿é—®,è¦æƒ³åœ¨ç”µè„‘è®¿é—®ï¼Œéœ€è¦ä¿®æ”¹C:\Windows\System32\drivers\etcä¸‹çš„hostsæ–‡ä»¶åŠ å…¥è™šæ‹ŸåŸŸå</span><span class="token number">192.168</span>.37.3 www.xp.com<span class="token number">192.168</span>.37.3 www.xp.net<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå…«è‚¡æ–‡ä¹‹JavaSE--é¢å‘å¯¹è±¡</title>
    <link href="/blog/1491118462.html"/>
    <url>/blog/1491118462.html</url>
    
    <content type="html"><![CDATA[<h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><h5 id="1-ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ</h5><p>ç­”ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œé€šè¿‡å°†é—®é¢˜æŠ½è±¡æˆå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡ä¹‹é—´çš„äº¤äº’å’Œæ•°æ®å°è£…æ¥å®ç°ç¨‹åºé€»è¾‘ã€‚</p><h5 id="2-Javaä¸­çš„ç±»å’Œå¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#2-Javaä¸­çš„ç±»å’Œå¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="2.Javaä¸­çš„ç±»å’Œå¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>2.Javaä¸­çš„ç±»å’Œå¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h5><p>ç­”ï¼šç±»æ˜¯æè¿°å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ã€‚ç±»å®šä¹‰äº†å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼Œè€Œå¯¹è±¡åˆ™å…·ä½“æ‹¥æœ‰è¿™äº›å±æ€§å’Œè¡Œä¸ºã€‚</p><h5 id="3-ä»€ä¹ˆæ˜¯å°è£…ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å°è£…ï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯å°è£…ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å°è£…ï¼Ÿ" class="headerlink" title="3.ä»€ä¹ˆæ˜¯å°è£…ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å°è£…ï¼Ÿ"></a>3.ä»€ä¹ˆæ˜¯å°è£…ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å°è£…ï¼Ÿ</h5><p>ç­”ï¼šå°è£…æ˜¯å°†æ•°æ®å’Œæ–¹æ³•åŒ…è£…åœ¨ç±»ä¸­ï¼Œå¹¶é™åˆ¶å¯¹æ•°æ®çš„ç›´æ¥è®¿é—®ã€‚å°è£…å¯ä»¥éšè—å†…éƒ¨ç»†èŠ‚ï¼Œæä¾›å¯¹å¤–éƒ¨çš„å®‰å…¨æ¥å£ï¼Œå¹¶å®ç°ä»£ç çš„é‡ç”¨å’Œç»´æŠ¤ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>javaå…«è‚¡æ–‡ä¹‹JavaSE</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>javaå…«è‚¡æ–‡</tag>
      
      <tag>javaSE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¡¹ç›®å·¥å…·ç±»</title>
    <link href="/blog/617063586.html"/>
    <url>/blog/617063586.html</url>
    
    <content type="html"><![CDATA[<h4 id="æœ¬æ–‡ä¸»è¦è®°å½•å†™é¡¹ç›®çš„æ—¶å€™ç»å¸¸å°è£…çš„å·¥å…·ç±»"><a href="#æœ¬æ–‡ä¸»è¦è®°å½•å†™é¡¹ç›®çš„æ—¶å€™ç»å¸¸å°è£…çš„å·¥å…·ç±»" class="headerlink" title="æœ¬æ–‡ä¸»è¦è®°å½•å†™é¡¹ç›®çš„æ—¶å€™ç»å¸¸å°è£…çš„å·¥å…·ç±»"></a>æœ¬æ–‡ä¸»è¦è®°å½•å†™é¡¹ç›®çš„æ—¶å€™ç»å¸¸å°è£…çš„å·¥å…·ç±»</h4><p class="note note-success">MD5åŠ å¯†å·¥å…·</p><blockquote><p>MD5ç®€ä»‹ï¼šä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„å¯†ç æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥äº§ç”Ÿä¸€ä¸ª128ä½çš„æ•£åˆ—å€¼ã€‚MD5ç®—æ³•æ˜¯ä¸å¯é€†çš„ã€‚</p></blockquote><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MD5Util</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token class-name">String</span> strSrc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">char</span> hexChars<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token char">'0'</span><span class="token punctuation">,</span> <span class="token char">'1'</span><span class="token punctuation">,</span> <span class="token char">'2'</span><span class="token punctuation">,</span> <span class="token char">'3'</span><span class="token punctuation">,</span> <span class="token char">'4'</span><span class="token punctuation">,</span> <span class="token char">'5'</span><span class="token punctuation">,</span> <span class="token char">'6'</span><span class="token punctuation">,</span> <span class="token char">'7'</span><span class="token punctuation">,</span> <span class="token char">'8'</span><span class="token punctuation">,</span>                    <span class="token char">'9'</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">,</span> <span class="token char">'c'</span><span class="token punctuation">,</span> <span class="token char">'d'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'f'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">//åå…­è¿›åˆ¶å¯¹åº”å­—ç¬¦</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> strSrc<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è·å¾—MD5æ‘˜è¦ç®—æ³•çš„MessageDigestå¯¹è±¡</span>            <span class="token class-name">MessageDigest</span> md <span class="token operator">=</span> <span class="token class-name">MessageDigest</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"MD5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//ä½¿æŒ‡å®šçš„å­—èŠ‚æ›´æ–°æ‘˜è¦</span>            md<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>            bytes <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> j <span class="token operator">=</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>j <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">byte</span> b <span class="token operator">=</span> bytes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                chars<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> hexChars<span class="token punctuation">[</span>b <span class="token operator">>>></span> <span class="token number">4</span> <span class="token operator">&amp;</span> <span class="token number">0xf</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                chars<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> hexChars<span class="token punctuation">[</span>b <span class="token operator">&amp;</span> <span class="token number">0xf</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchAlgorithmException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"MD5åŠ å¯†å‡ºé”™ï¼ï¼+"</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">å…¨å±€ç»Ÿä¸€è¿”å›ç»“æœå·¥å…·ç±»</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¿”å›ç </span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> code<span class="token punctuation">;</span>    <span class="token comment">// è¿”å›æ¶ˆæ¯</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>    <span class="token comment">// è¿”å›æ•°æ®</span>    <span class="token keyword">private</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// è¿”å›æ•°æ®</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            result<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">T</span> body<span class="token punctuation">,</span> <span class="token class-name">Integer</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token function">build</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">T</span> body<span class="token punctuation">,</span> <span class="token class-name">ResultCodeEnum</span> resultCodeEnum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token function">build</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>resultCodeEnum<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>resultCodeEnum<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ“ä½œæˆåŠŸ     * @param data  baseCategory1List     * @param &lt;T>     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token function">build</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">build</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token class-name">ResultCodeEnum</span><span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">code</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> code<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//ç»Ÿä¸€è¿”å›ç»“æœçŠ¶æ€ä¿¡æ¯ç±»</span><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ResultCodeEnum</span> <span class="token punctuation">&#123;</span>    <span class="token function">SUCCESS</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">USERNAME_ERROR</span><span class="token punctuation">(</span><span class="token number">501</span><span class="token punctuation">,</span><span class="token string">"usernameError"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">PASSWORD_ERROR</span><span class="token punctuation">(</span><span class="token number">503</span><span class="token punctuation">,</span><span class="token string">"passwordError"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NOTLOGIN</span><span class="token punctuation">(</span><span class="token number">504</span><span class="token punctuation">,</span><span class="token string">"notLogin"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">USERNAME_USED</span><span class="token punctuation">(</span><span class="token number">505</span><span class="token punctuation">,</span><span class="token string">"userNameUsed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> code<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ResultCodeEnum</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> code<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">Jwtå·¥å…·ç±»</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"jwt.token"</span><span class="token punctuation">)</span><span class="token comment">//ä»application.ymlä¸­è·å–</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtHelper</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> tokenExpiration<span class="token punctuation">;</span> <span class="token comment">//æœ‰æ•ˆæ—¶é—´,å•ä½æ¯«ç§’ 1000æ¯«ç§’ == 1ç§’</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> tokenSignKey<span class="token punctuation">;</span>  <span class="token comment">//å½“å‰ç¨‹åºç­¾åç§˜é’¥</span>    <span class="token comment">//ç”Ÿæˆtokenå­—ç¬¦ä¸²</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"YYGH-USER"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> tokenExpiration <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//å•ä½åˆ†é’Ÿ</span>                <span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS512</span><span class="token punctuation">,</span> tokenSignKey<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">compressWith</span><span class="token punctuation">(</span><span class="token class-name">CompressionCodecs</span><span class="token punctuation">.</span><span class="token constant">GZIP</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> token<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//ä»tokenå­—ç¬¦ä¸²è·å–userid</span>    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> claimsJws <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>tokenSignKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Claims</span> claims <span class="token operator">=</span> claimsJws<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Integer</span> userId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> claims<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> userId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åˆ¤æ–­tokenæ˜¯å¦æœ‰æ•ˆ</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isExpiration</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">boolean</span> isExpire <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>tokenSignKey<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">getExpiration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ²¡æœ‰è¿‡æœŸï¼Œæœ‰æ•ˆï¼Œè¿”å›false</span>            <span class="token keyword">return</span> isExpire<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//è¿‡æœŸå‡ºç°å¼‚å¸¸ï¼Œè¿”å›true</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
    <categories>
      
      <category>javaå·¥å…·ç±»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>springboot</tag>
      
      <tag>utils</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nginxç¼–è¯‘å®‰è£…</title>
    <link href="/blog/347607591.html"/>
    <url>/blog/347607591.html</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">ä¸€ï¼šåœ¨nginxå®˜ç½‘ä¸‹è½½Linuxå®‰è£…åŒ…<p><ul><li><p>è¿›å…¥<a href="https://nginx.org/">https://nginx.org/</a> æ‰¾åˆ°ä½ æƒ³è¦çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸‹è½½,æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ <code>nginx-1.21.6.tar.gz</code></p></li><li><p>é€šè¿‡Xftpä¸Šä¼ åˆ°ä½ çš„CentOSæœåŠ¡å™¨</p></li></ul><p class="note note-warning">äºŒï¼šè§£å‹ç¼©å®‰è£…åŒ…<p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> nginx-1.21.6.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p class="note note-warning">ä¸‰ï¼šç¼–è¯‘å®‰è£…<p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> nginx-1.21.6<span class="token comment">#ls å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸ªconfigureæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå®‰è£…è„šæœ¬</span>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/nginx <span class="token comment"># --prefixæ˜¯æŒ‡å®šå®‰è£…åœ¨å“ªä¸ªç›®å½•ä¸‹</span><span class="token comment">#æ‰§è¡Œå‘ç°æŠ¥é”™</span><span class="token comment">#1.ç¼ºå°‘Cè¯­è¨€ç¼–è¯‘å™¨</span>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc<span class="token comment">#2.ç¼ºå°‘pcreåº“</span>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> pcre pcre-devel<span class="token comment">#3.ç¼ºå°‘zlibåº“</span>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> zlib zlib-devel<span class="token comment">#ç¼–è¯‘</span><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-warning">å››ï¼šå¯åŠ¨nginx<p><ul><li>è¿›å…¥å®‰è£…ç›®å½•ï¼š<code>/usr/local/nginx</code></li></ul><p><code>cd /usr/local/nginx</code></p><ul><li><p>è¿›å…¥sbinç›®å½•ï¼š<code>/sbin</code></p><p><code>cd /sbin</code></p></li><li><p>å¯åŠ¨</p><p><code>./nginx</code></p></li><li><p>æµè§ˆå™¨è®¿é—®</p><p><code>ip:8080</code></p></li></ul><p class="note note-danger">å‘ç°è®¿é—®ä¸åˆ°ï¼Œå› ä¸ºé˜²ç«å¢™é˜»æ­¢äº†è®¿é—®ï¼Œè§£å†³åŠæ³•:</p><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#1.ç›´æ¥å…³é—­é˜²ç«å¢™ï¼Œä¸€èˆ¬ç”Ÿäº§å’Œå­¦ä¹ çš„æ—¶å€™å¯ä»¥ç›´æ¥å…³é—­é˜²ç«å¢™</span>systemctl stop firewalld.servicesystemctl disable firewalld.service <span class="token comment">#ç¦æ­¢é˜²ç«å¢™å¼€æœºè‡ªå¯åŠ¨</span><span class="token comment">#2.å®‰å…¨çš„æ–¹å¼ï¼šéœ€è¦å“ªä¸ªç«¯å£æ‰å¼€æ”¾å“ªä¸ª</span>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp <span class="token parameter variable">--permanent</span><span class="token comment">#é‡å¯é˜²ç«å¢™</span>firewall-cmd <span class="token parameter variable">--reload</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-warning">äº”:å…³é—­nginxåŠå…¶ä»–å‘½ä»¤<p><ul><li>å¿«é€Ÿåœæ­¢nginx <code>./nginx -s stop</code></li><li>ä¼˜é›…å…³é—­ï¼Œåœ¨é€€å‡ºå‰å®Œæˆå·²ç»æ¥æ”¶çš„è¯·æ±‚ <code>./nginx -s quit</code></li><li>é‡æ–°åŠ è½½é…ç½® <code>./nginx -s reload</code></li><li>æŸ¥çœ‹nginxç‰ˆæœ¬å· <code>./nginx -v</code></li></ul><p class="note note-warning">å…­:å®‰è£…æˆç³»ç»ŸæœåŠ¡<p><ul><li>åˆ›å»ºæœåŠ¡è„šæœ¬</li></ul><p> <code>vi /usr/lib/systemd/system/nginx.service</code></p>  <figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span><span class="token assign-left variable">Description</span><span class="token operator">=</span>nginx - web server<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target remote-fs.target nss-lookup.target<span class="token punctuation">[</span>Service<span class="token punctuation">]</span><span class="token assign-left variable">Type</span><span class="token operator">=</span>forking<span class="token assign-left variable">PIDFile</span><span class="token operator">=</span>/usr/local/nginx/logs/nginx.pid<span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-t</span> <span class="token parameter variable">-c</span> /usr/local/nginx/conf/nginx.conf<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-c</span> /usr/local/nginx/conf/nginx.conf<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> reload<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> stop<span class="token assign-left variable">ExecQuit</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> quit<span class="token assign-left variable">PrivateTmp</span><span class="token operator">=</span>true<span class="token punctuation">[</span>Install<span class="token punctuation">]</span><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><ul><li><p>é‡æ–°åŠ è½½ç³»ç»ŸæœåŠ¡</p><p><code>systemctl daemon-reload</code></p></li><li><p>å¯åŠ¨æœåŠ¡</p><p><code>systemctl start nginx</code></p></li><li><p>å…³é—­æœåŠ¡</p><p><code>systemctl stop nginx</code></p></li><li><p>é‡å¯æœåŠ¡</p><p><code>systemctl restart nginx</code></p></li><li><p>å¼€å¯è‡ªå¯åŠ¨</p><p><code>systemctl enable nginx</code></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootä¸­é›†æˆSpringSecurityå’ŒJwt</title>
    <link href="/blog/619017079.html"/>
    <url>/blog/619017079.html</url>
    
    <content type="html"><![CDATA[<h3 id="å¦‚ä½•åœ¨SpringBootä¸­é›†æˆSpringSecurityå’ŒJwtï¼Ÿ"><a href="#å¦‚ä½•åœ¨SpringBootä¸­é›†æˆSpringSecurityå’ŒJwtï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨SpringBootä¸­é›†æˆSpringSecurityå’ŒJwtï¼Ÿ"></a>å¦‚ä½•åœ¨SpringBootä¸­é›†æˆSpringSecurityå’ŒJwtï¼Ÿ</h3><blockquote><p>Jwtå¤§å®¶åº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¤§å®¶å†™å®‰å…¨æ¡†æ¶åº”è¯¥ç”¨åˆ°æœ€å¤šçš„å°±æ˜¯Jwtäº†ï¼Œè€ŒSpringSecurityå¤§å¤šæ•°æ˜¯å¤§é¡¹ç›®åœ¨ç”¨ç„¶åæœ€è¿‘æµ…å­¦äº†ä¸€ä¸‹SpringSecurity,ä½†æ˜¯ç½‘ä¸Šçš„æ•™ç¨‹å¤§å¤šæ•°çš„é›†æˆéƒ½æ˜¯è€ç‰ˆæœ¬ï¼Œå¯¹äºæ–°ç‰ˆæœ¬çš„é›†æˆæ¯”è¾ƒå°‘ï¼Œç„¶åè‡ªå·±ä¹Ÿæ˜¯ç¢ç£¨äº†å¾ˆä¹…ï¼Œçœ‹äº†ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œï¼Œç„¶åç°åœ¨æµ…æµ…è®°å½•ä¸€ä¸‹é›†æˆè¿‡ç¨‹å§ã€‚</p></blockquote><p class="note note-primary">å‰ç½®ç”¨æˆ·ç±»<p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@EqualsAndHashCode</span><span class="token punctuation">(</span>callSuper <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Accessors</span><span class="token punctuation">(</span>chain <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"user_info"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Alias</span><span class="token punctuation">(</span><span class="token string">"UserInfo"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token comment">//åºåˆ—åŒ–</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>        <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span><span class="token comment">//é‚®ç®±</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span><span class="token comment">//å¯†ç </span>    <span class="token keyword">private</span> <span class="token class-name">String</span> nickName<span class="token punctuation">;</span><span class="token comment">//æ˜µç§°</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> realName<span class="token punctuation">;</span><span class="token comment">//çœŸå®å§“å</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span><span class="token comment">//ç”µè¯</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span><span class="token comment">//æ€§åˆ«</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> avatar<span class="token punctuation">;</span><span class="token comment">// å¤´åƒ</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="ä¸€-å¼•å…¥ä¾èµ–"><a href="#ä¸€-å¼•å…¥ä¾èµ–" class="headerlink" title="ä¸€.å¼•å…¥ä¾èµ–"></a><p class="note note-info">ä¸€.å¼•å…¥ä¾èµ–<p></h4><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--SpringSecurityä¾èµ–--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--ç‰ˆæœ¬è‡ªé€‰ï¼Œæˆ–è€…çˆ¶é¡¹ç›®ç‰ˆæœ¬ï¼Œæœ¬æ–‡ç”¨çš„3.1.3--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--Jwtä¾èµ–--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.auth0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>java-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.11.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="äºŒ-Jwtå·¥å…·ç±»"><a href="#äºŒ-Jwtå·¥å…·ç±»" class="headerlink" title="äºŒ.Jwtå·¥å…·ç±»"></a><p class="note note-info">äºŒ.Jwtå·¥å…·ç±»<p></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtUtils</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//ç®—æ³•å¯†é’¥</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;jwt.secretKey&#125;"</span><span class="token punctuation">)</span><span class="token comment">//åœ¨application.ymlæ–‡ä»¶é‡Œå†™ï¼Œç„¶åæ³¨å…¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> jwtSecretKey<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> userInfo<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> authList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//åˆ›å»ºæ—¶é—´</span>        <span class="token class-name">Date</span> currentTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®è¿‡æœŸæ—¶é—´</span>        <span class="token class-name">Date</span> expireTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span>  <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//jwt çš„headerä¿¡æ¯</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> headerClaims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        headerClaims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"JWT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        headerClaims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"alg"</span><span class="token punctuation">,</span> <span class="token string">"HS256"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠ å¯†ç®—æ³•</span>        <span class="token comment">//åˆ›å»ºjwt</span>        <span class="token keyword">return</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withHeader</span><span class="token punctuation">(</span>headerClaims<span class="token punctuation">)</span> <span class="token comment">// å¤´éƒ¨</span>                <span class="token punctuation">.</span><span class="token function">withIssuedAt</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span> <span class="token comment">//å·²æ³¨å†Œå£°æ˜ï¼šç­¾å‘æ—¥æœŸï¼Œå‘è¡Œæ—¥æœŸ</span>                <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span>expireTime<span class="token punctuation">)</span> <span class="token comment">//å·²æ³¨å†Œå£°æ˜ è¿‡æœŸæ—¶é—´</span>                <span class="token punctuation">.</span><span class="token function">withIssuer</span><span class="token punctuation">(</span><span class="token string">"xp"</span><span class="token punctuation">)</span>  <span class="token comment">//å·²æ³¨å†Œå£°æ˜ï¼Œç­¾å‘äºº</span>                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span> <span class="token comment">//ç§æœ‰å£°æ˜ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰</span>                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">"auth"</span><span class="token punctuation">,</span> authList<span class="token punctuation">)</span> <span class="token comment">//ç§æœ‰å£°æ˜ï¼Œå¯ä»¥è‡ªå®šä¹‰</span>                <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>jwtSecretKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­¾åï¼Œä½¿ç”¨HS256ç®—æ³•ç­¾åï¼Œå¹¶ä½¿ç”¨å¯†é’¥</span>        <span class="token comment">//HS256æ˜¯ä¸€ç§å¯¹ç§°ç®—æ³•ï¼Œè¿™æ„å‘³ç€åªæœ‰ä¸€ä¸ªå¯†é’¥ï¼Œåœ¨åŒæ–¹ä¹‹é—´å…±äº«ã€‚ ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ç”Ÿæˆç­¾åå¹¶å¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚ åº”ç‰¹åˆ«æ³¨æ„é’¥åŒ™æ˜¯å¦ä¿å¯†ã€‚</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * éªŒè¯jwtçš„ç­¾åï¼Œç®€ç§°éªŒç­¾     * @param token éœ€è¦éªŒç­¾çš„jwt     * @return éªŒç­¾ç»“æœ     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">verifyToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è·å–éªŒç­¾ç±»å¯¹è±¡</span>        <span class="token class-name">JWTVerifier</span> jwtVerifier <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>jwtSecretKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//éªŒç­¾ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œåˆ™è¯´æ˜jwtæ˜¯åˆæ³•çš„ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è¿‡æœŸ</span>            <span class="token class-name">DecodedJWT</span> decodedJWT <span class="token operator">=</span> jwtVerifier<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JWTVerificationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//å¦‚æœæŠ¥é”™è¯´æ˜jwt ä¸ºéæ³•çš„ï¼Œæˆ–è€…å·²è¿‡æœŸï¼ˆå·²è¿‡æœŸä¹Ÿå±äºéæ³•çš„ï¼‰</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"éªŒç­¾å¤±è´¥ï¼š&#123;&#125;"</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ ¹æ®tokenè·å–ç”¨æˆ·ä¿¡æ¯</span>    <span class="token keyword">public</span>  <span class="token class-name">String</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ä½¿ç”¨ç§˜é’¥åˆ›å»ºä¸€ä¸ªè§£æå¯¹è±¡</span>            <span class="token class-name">JWTVerifier</span> jwtVerifier<span class="token operator">=</span><span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>jwtSecretKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//éªŒè¯JWT</span>            <span class="token class-name">DecodedJWT</span> decodedJWT <span class="token operator">=</span> jwtVerifier<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Claim</span> username <span class="token operator">=</span> decodedJWT<span class="token punctuation">.</span><span class="token function">getClaim</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ³¨æ„å¯¹è±¡è¦åºåˆ—åŒ–</span>            <span class="token keyword">return</span> username<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TokenExpiredException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>ã€    <span class="token comment">//é€šè¿‡tokenè·å–ç”¨æˆ·æƒé™åˆ—è¡¨</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ä½¿ç”¨ç§˜é’¥åˆ›å»ºä¸€ä¸ªè§£æå¯¹è±¡</span>            <span class="token class-name">JWTVerifier</span> jwtVerifier<span class="token operator">=</span><span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>jwtSecretKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//éªŒè¯JWT</span>            <span class="token class-name">DecodedJWT</span> decodedJWT <span class="token operator">=</span> jwtVerifier<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Claim</span> auth <span class="token operator">=</span> decodedJWT<span class="token punctuation">.</span><span class="token function">getClaim</span><span class="token punctuation">(</span><span class="token string">"auth"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> auth<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TokenExpiredException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="ä¸‰-æ–°å»ºå®‰å…¨ç”¨æˆ·ç±»SecurityUser"><a href="#ä¸‰-æ–°å»ºå®‰å…¨ç”¨æˆ·ç±»SecurityUser" class="headerlink" title="ä¸‰.æ–°å»ºå®‰å…¨ç”¨æˆ·ç±»SecurityUser"></a><p class="note note-info">ä¸‰.æ–°å»ºå®‰å…¨ç”¨æˆ·ç±»SecurityUser<p></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityUser</span> <span class="token keyword">implements</span> <span class="token class-name">UserDetails</span> <span class="token punctuation">&#123;</span><span class="token comment">//SpringSecurityæä¾›çš„æ¥å£</span>    <span class="token comment">//æ ¸å¿ƒå°±æ˜¯å®ç°UserDeatilsæ¥å£ï¼Œç™»å½•çš„å¯¹è±¡å­˜åœ¨è¿™ä¸ªç±»é‡Œé¢</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">></span></span> simpleGrantedAuthorities<span class="token punctuation">;</span>        <span class="token comment">//ä¼ å…¥ä¸€ä¸ªç³»ç»Ÿåº”ç”¨å¯¹è±¡æ„é€ SecurityUser</span>    <span class="token keyword">public</span> <span class="token class-name">SecurityUser</span><span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//å¦‚æœè®¾ç½®äº†æƒé™å°±åœ¨æ­¤å®ç°ç»™SecurityUserèµ‹äºˆæƒé™ä¸šåŠ¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> <span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> userPassword<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ³¨æ„æ¸…é™¤å¯†ç ï¼Œå› ä¸ºä¸æƒ³è¿”å›æ•°æ®æ—¶è®©å‰ç«¯çŸ¥é“ï¼Œåªèƒ½ç”±åç«¯éªŒè¯</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> userPassword<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAccountNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAccountNonLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isCredentialsNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="å››-å°†ç”¨æˆ·Serviceå®ç°ç±»å®ç°UserDetailsService"><a href="#å››-å°†ç”¨æˆ·Serviceå®ç°ç±»å®ç°UserDetailsService" class="headerlink" title="å››.å°†ç”¨æˆ·Serviceå®ç°ç±»å®ç°UserDetailsService"></a><p class="note note-info">å››.å°†ç”¨æˆ·Serviceå®ç°ç±»å®ç°UserDetailsService<p></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfoServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfoMapper</span><span class="token punctuation">,</span> <span class="token class-name">UserInfo</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">IUserInfoService</span><span class="token punctuation">,</span> <span class="token class-name">UserDetailsService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">UserInfoMapper</span> userInfoMapper<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">&#123;</span>        <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> userInfoMapper<span class="token punctuation">.</span><span class="token function">selectByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">(</span><span class="token string">"è´¦å·ä¸å­˜åœ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SecurityUser</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="äº”-å®ç°Jwtè¿‡æ»¤å™¨ç±»ï¼Œç”¨äºæ£€æŸ¥token"><a href="#äº”-å®ç°Jwtè¿‡æ»¤å™¨ç±»ï¼Œç”¨äºæ£€æŸ¥token" class="headerlink" title="äº”.å®ç°Jwtè¿‡æ»¤å™¨ç±»ï¼Œç”¨äºæ£€æŸ¥token"></a><p class="note note-info">äº”.å®ç°Jwtè¿‡æ»¤å™¨ç±»ï¼Œç”¨äºæ£€æŸ¥token<p></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtCheckFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">JwtUtils</span> jwtUtils<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è·å–è¯·æ±‚uri</span>        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœæ˜¯ç™»å½•é¡µé¢ï¼Œæ”¾è¡Œ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>requestURI<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//è·å–è¯·æ±‚å¤´ä¸­çš„Authorization</span>        <span class="token class-name">String</span> authorization <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å¦‚æœAuthorizationä¸ºç©ºï¼Œé‚£ä¹ˆä¸å…è®¸ç”¨æˆ·è®¿é—®ï¼Œç›´æ¥è¿”å›</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>authorization<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">printFront</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span><span class="token string">"æœªç™»å½•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//Authorization å»æ‰å¤´éƒ¨çš„Bearer ä¿¡æ¯ï¼Œè·å–tokenå€¼</span>        <span class="token class-name">String</span> jwtToken <span class="token operator">=</span> authorization<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"Bearer "</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//éªŒç­¾</span>        <span class="token keyword">boolean</span> verifyTokenResult <span class="token operator">=</span> jwtUtils<span class="token punctuation">.</span><span class="token function">verifyToken</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//éªŒç­¾ä¸æˆåŠŸ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>verifyTokenResult<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">printFront</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span><span class="token string">"jwtToken å·²è¿‡æœŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//ä»payloadä¸­è·å–userInfo</span>        <span class="token class-name">String</span> userInfo <span class="token operator">=</span> jwtUtils<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä»payloadä¸­è·å–æˆæƒåˆ—è¡¨</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> userAuth <span class="token operator">=</span> jwtUtils<span class="token punctuation">.</span><span class="token function">getAuth</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ›å»ºç™»å½•ç”¨æˆ·</span>        <span class="token class-name">UserInfo</span> user <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">,</span> <span class="token class-name">UserInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SecurityUser</span> securityUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecurityUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®æƒé™</span>        <span class="token comment">//List&lt;SimpleGrantedAuthority> authList = userAuth.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toList());</span>        <span class="token comment">//securityUser.setSimpleGrantedAuthorities(authList);</span>        <span class="token class-name">UsernamePasswordAuthenticationToken</span> usernamePasswordAuthenticationToke <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>securityUser                <span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡å®‰å…¨ä¸Šä¸‹æ–‡è®¾ç½®è®¤è¯ä¿¡æ¯</span>        <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>usernamePasswordAuthenticationToke<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ç»§ç»­è®¿é—®ç›¸åº”çš„urlç­‰</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">printFront</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HttpResult</span> httpResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        httpResult<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        httpResult<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>httpResult<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h4 id="å…­-æ–°å»ºSecurityé…ç½®ç±»"><a href="#å…­-æ–°å»ºSecurityé…ç½®ç±»" class="headerlink" title="å…­.æ–°å»ºSecurityé…ç½®ç±»"></a><p class="note note-info">å…­.æ–°å»ºSecurityé…ç½®ç±»<p></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token annotation punctuation">@EnableMethodSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">JwtUtils</span> jwtUtils<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">JwtCheckFilter</span> jwtCheckFilter<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">securityFilterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        http<span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span>jwtCheckFilter<span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        http<span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span>auth <span class="token operator">-></span> auth                <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//æ‰€æœ‰è¯·æ±‚</span>                <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//éƒ½éœ€è¦è®¤è¯</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>        http<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span>form <span class="token operator">-></span> form                <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//ç™»å½•æ¥å£æ”¾å¼€</span>                <span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AuthenticationSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//è®¤è¯æˆåŠŸå¤„ç†å™¨</span>                    <span class="token annotation punctuation">@Override</span>                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationSuccess</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>                        <span class="token comment">//ä»è®¤è¯ä¿¡æ¯ä¸­è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</span>                        <span class="token class-name">SecurityUser</span> securityUser <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SecurityUser</span><span class="token punctuation">)</span> authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> securityUser<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">String</span> strUserInfo <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//                        List&lt;SimpleGrantedAuthority> authorities = (List&lt;SimpleGrantedAuthority>) securityUser.getAuthorities();</span><span class="token comment">//                        List&lt;String> authList = authorities.stream().map(SimpleGrantedAuthority::getAuthority).collect(Collectors.toList());</span><span class="token comment">//                        //ç”ŸæˆJWT</span>                        <span class="token class-name">String</span> token <span class="token operator">=</span> jwtUtils<span class="token punctuation">.</span><span class="token function">createToken</span><span class="token punctuation">(</span>strUserInfo<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">HttpResult</span> httpResult <span class="token operator">=</span> <span class="token class-name">HttpResult</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"jwtç”ŸæˆæˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"Bearer "</span><span class="token operator">+</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token function">printToken</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">,</span>httpResult<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">printToken</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span><span class="token class-name">HttpResult</span> httpResult<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">String</span> jwt <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>httpResult<span class="token punctuation">)</span><span class="token punctuation">;</span>                        response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        writer<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>                        writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>        http<span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span>csrf<span class="token operator">-></span>csrf<span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå°±å¯ä¸ä½¿ç”¨å•¦ğŸ˜´ğŸ˜´ğŸ˜´ğŸ˜´</p>]]></content>
    
    
    <categories>
      
      <category>Webåº”ç”¨å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>SpringSecurity</tag>
      
      <tag>Jwt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äºŒåˆ†æŸ¥æ‰¾</title>
    <link href="/blog/3907716225.html"/>
    <url>/blog/3907716225.html</url>
    
    <content type="html"><![CDATA[<h2 id="äºŒåˆ†æŸ¥æ‰¾çš„å‡ ç§æ–¹å¼"><a href="#äºŒåˆ†æŸ¥æ‰¾çš„å‡ ç§æ–¹å¼" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾çš„å‡ ç§æ–¹å¼"></a>äºŒåˆ†æŸ¥æ‰¾çš„å‡ ç§æ–¹å¼</h2><p class="note note-success">ç¬¬ä¸€ç§:å·¦é—­å³é—­</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>j <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           m <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token punctuation">)</span><span class="token operator">>>></span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               i<span class="token operator">=</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               j<span class="token operator">=</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>               <span class="token keyword">return</span> m<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">ç¬¬äºŒç§ï¼šå·¦é—­å³å¼€</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>j <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           m <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token punctuation">)</span><span class="token operator">>>></span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               i<span class="token operator">=</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               j<span class="token operator">=</span>m<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>               <span class="token keyword">return</span> m<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">ç¬¬ä¸‰ç§ï¼šå¹³è¡¡ç‰ˆäºŒåˆ†æŸ¥æ‰¾</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>j <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           m <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token punctuation">)</span><span class="token operator">>>></span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               j<span class="token operator">=</span>m<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>               i <span class="token operator">=</span> m<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>target<span class="token punctuation">)</span><span class="token operator">?</span>i<span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p class="note note-success">ç¬¬å››ç§ï¼šArraysç±»çš„æ–¹æ³•</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿ</title>
    <link href="/blog/3494630844.html"/>
    <url>/blog/3494630844.html</url>
    
    <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿå¯¼å­¦æ¡ˆé¢˜ç›®"><a href="#æ“ä½œç³»ç»Ÿå¯¼å­¦æ¡ˆé¢˜ç›®" class="headerlink" title="æ“ä½œç³»ç»Ÿå¯¼å­¦æ¡ˆé¢˜ç›®"></a>æ“ä½œç³»ç»Ÿå¯¼å­¦æ¡ˆé¢˜ç›®</h1><h2 id="ä¸€-æ“ä½œç³»ç»Ÿæ¦‚å¿µã€åŠŸèƒ½ã€å‘å±•å†å²"><a href="#ä¸€-æ“ä½œç³»ç»Ÿæ¦‚å¿µã€åŠŸèƒ½ã€å‘å±•å†å²" class="headerlink" title="ä¸€.æ“ä½œç³»ç»Ÿæ¦‚å¿µã€åŠŸèƒ½ã€å‘å±•å†å²"></a>ä¸€.æ“ä½œç³»ç»Ÿæ¦‚å¿µã€åŠŸèƒ½ã€å‘å±•å†å²</h2><h3 id="1-ä¸ºä»€ä¹ˆå­¦ä¹ æ“ä½œç³»ç»Ÿï¼Œå…¶é‡è¦æ€§ï¼Œå¿…è¦æ€§ï¼Œæ€æ ·å­¦ä¹ æ“ä½œç³»ç»Ÿï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆå­¦ä¹ æ“ä½œç³»ç»Ÿï¼Œå…¶é‡è¦æ€§ï¼Œå¿…è¦æ€§ï¼Œæ€æ ·å­¦ä¹ æ“ä½œç³»ç»Ÿï¼Ÿ" class="headerlink" title="1.ä¸ºä»€ä¹ˆå­¦ä¹ æ“ä½œç³»ç»Ÿï¼Œå…¶é‡è¦æ€§ï¼Œå¿…è¦æ€§ï¼Œæ€æ ·å­¦ä¹ æ“ä½œç³»ç»Ÿï¼Ÿ"></a>1.ä¸ºä»€ä¹ˆå­¦ä¹ æ“ä½œç³»ç»Ÿï¼Œå…¶é‡è¦æ€§ï¼Œå¿…è¦æ€§ï¼Œæ€æ ·å­¦ä¹ æ“ä½œç³»ç»Ÿï¼Ÿ</h3><p>ç­”ï¼šå­¦ä¹ æ“ä½œç³»ç»Ÿæ˜¯è®¡ç®—æœºç§‘å­¦å’Œå·¥ç¨‹å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œå­¦ä¹ æ“ä½œç³»ç»Ÿæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„é‡è¦æ€§å’Œå¿…è¦æ€§ï¼š</p><ol><li><p>æé«˜è®¡ç®—æœºæŠ€èƒ½ï¼šæ“ä½œç³»ç»Ÿæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæ‰€æœ‰åº”ç”¨è½¯ä»¶éƒ½æ˜¯å»ºç«‹åœ¨æ“ä½œç³»ç»Ÿçš„åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤å­¦ä¹ æ“ä½œç³»ç»Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£è®¡ç®—æœºç³»ç»Ÿçš„å·¥ä½œåŸç†ã€‚</p></li><li><p>æŒæ¡è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼šæ“ä½œç³»ç»Ÿæ¶‰åŠåˆ°è®¡ç®—æœºç¡¬ä»¶ã€è½¯ä»¶ã€ç½‘ç»œç­‰å¤šæ–¹é¢çš„çŸ¥è¯†ï¼Œå­¦ä¹ æ“ä½œç³»ç»Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬å…¨é¢æŒæ¡è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œæœ‰åˆ©äºæé«˜æˆ‘ä»¬çš„å­¦æœ¯æ°´å¹³å’ŒèŒä¸šæŠ€èƒ½ã€‚</p></li><li><p>æé«˜ç¼–ç¨‹èƒ½åŠ›ï¼šæ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªéå¸¸åºå¤§å’Œå¤æ‚çš„è½¯ä»¶ç³»ç»Ÿï¼Œå­¦ä¹ æ“ä½œç³»ç»Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ç¼–ç¨‹èƒ½åŠ›å’Œè½¯ä»¶å·¥ç¨‹æŠ€èƒ½ï¼ŒåŒ…æ‹¬ä»£ç è®¾è®¡ã€è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–ç­‰æ–¹é¢çš„èƒ½åŠ›ã€‚</p></li><li><p>æé«˜ç³»ç»Ÿæ€§èƒ½ï¼šå¯¹äºç³»ç»Ÿç®¡ç†å‘˜å’Œç½‘ç»œç®¡ç†å‘˜æ¥è¯´ï¼Œå­¦ä¹ æ“ä½œç³»ç»Ÿå¯ä»¥å¸®åŠ©ä»–ä»¬æ›´å¥½åœ°ç®¡ç†å’Œç»´æŠ¤è®¡ç®—æœºç³»ç»Ÿï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚</p></li></ol><p>å­¦ä¹ æ“ä½œç³»ç»Ÿçš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬è‡ªå­¦ã€å‚åŠ è¯¾ç¨‹ã€é˜…è¯»ç›¸å…³ä¹¦ç±ã€å‚ä¸å¼€æºé¡¹ç›®ç­‰ç­‰ã€‚å¦‚æœæƒ³è¦æ·±å…¥å­¦ä¹ æ“ä½œç³»ç»Ÿï¼Œå»ºè®®ä»è®¡ç®—æœºåŸç†å’Œæ“ä½œç³»ç»ŸåŸºç¡€å¼€å§‹å­¦ä¹ ï¼Œäº†è§£è®¡ç®—æœºçš„ä½“ç³»ç»“æ„ã€CPUæŒ‡ä»¤é›†ã€CPUä¸­æ–­å¤„ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰åŸºæœ¬æ¦‚å¿µå’ŒåŸç†ï¼Œç„¶åå¯ä»¥é˜…è¯»ã€Šæ“ä½œç³»ç»Ÿæ¦‚å¿µã€‹ã€ã€Šç°ä»£æ“ä½œç³»ç»Ÿã€‹ç­‰æ“ä½œç³»ç»Ÿç»å…¸æ•™æï¼Œè·Ÿéšå¼€æºç¤¾åŒºçš„é¡¹ç›®å®è·µæ¥æ·±å…¥æ¢ç©¶æ“ä½œç³»ç»Ÿçš„å†…éƒ¨æœºåˆ¶å’Œå®ç°åŸç†ã€‚</p><h3 id="2-æœ‰äººè®¤ä¸ºwindowsï¼ŒMac-OSï¼ŒAndroidå°±å¤Ÿç”¨äº†ï¼Œä¸å¿…å†å¼€å‘æ“ä½œç³»ç»Ÿï¼›æœ‰äººè¯´æ‰€è°“çš„å›½äº§ç³»ç»Ÿå°±æ˜¯LinuxåŒ…è£…ä¸€ä¸‹ï¼Œæ¯«æ— æ„ä¹‰ï¼›æœ‰äººè®¤ä¸ºç ”ç©¶é™¢ã€é«˜æ ¡éƒ½åº”è¯¥æŠ•å…¥äººå‘˜ç»è´¹å»åšæ“ä½œç³»ç»Ÿçš„ç ”ç©¶ã€‚ä½ å¦‚ä½•è¯„ä»·è¿™äº›è§‚ç‚¹"><a href="#2-æœ‰äººè®¤ä¸ºwindowsï¼ŒMac-OSï¼ŒAndroidå°±å¤Ÿç”¨äº†ï¼Œä¸å¿…å†å¼€å‘æ“ä½œç³»ç»Ÿï¼›æœ‰äººè¯´æ‰€è°“çš„å›½äº§ç³»ç»Ÿå°±æ˜¯LinuxåŒ…è£…ä¸€ä¸‹ï¼Œæ¯«æ— æ„ä¹‰ï¼›æœ‰äººè®¤ä¸ºç ”ç©¶é™¢ã€é«˜æ ¡éƒ½åº”è¯¥æŠ•å…¥äººå‘˜ç»è´¹å»åšæ“ä½œç³»ç»Ÿçš„ç ”ç©¶ã€‚ä½ å¦‚ä½•è¯„ä»·è¿™äº›è§‚ç‚¹" class="headerlink" title="2.æœ‰äººè®¤ä¸ºwindowsï¼ŒMac OSï¼ŒAndroidå°±å¤Ÿç”¨äº†ï¼Œä¸å¿…å†å¼€å‘æ“ä½œç³»ç»Ÿï¼›æœ‰äººè¯´æ‰€è°“çš„å›½äº§ç³»ç»Ÿå°±æ˜¯LinuxåŒ…è£…ä¸€ä¸‹ï¼Œæ¯«æ— æ„ä¹‰ï¼›æœ‰äººè®¤ä¸ºç ”ç©¶é™¢ã€é«˜æ ¡éƒ½åº”è¯¥æŠ•å…¥äººå‘˜ç»è´¹å»åšæ“ä½œç³»ç»Ÿçš„ç ”ç©¶ã€‚ä½ å¦‚ä½•è¯„ä»·è¿™äº›è§‚ç‚¹."></a>2.æœ‰äººè®¤ä¸ºwindowsï¼ŒMac OSï¼ŒAndroidå°±å¤Ÿç”¨äº†ï¼Œä¸å¿…å†å¼€å‘æ“ä½œç³»ç»Ÿï¼›æœ‰äººè¯´æ‰€è°“çš„å›½äº§ç³»ç»Ÿå°±æ˜¯LinuxåŒ…è£…ä¸€ä¸‹ï¼Œæ¯«æ— æ„ä¹‰ï¼›æœ‰äººè®¤ä¸ºç ”ç©¶é™¢ã€é«˜æ ¡éƒ½åº”è¯¥æŠ•å…¥äººå‘˜ç»è´¹å»åšæ“ä½œç³»ç»Ÿçš„ç ”ç©¶ã€‚ä½ å¦‚ä½•è¯„ä»·è¿™äº›è§‚ç‚¹.</h3><p>ç­”ï¼šè¿™äº›è§‚ç‚¹éƒ½æœ‰ä¸€å®šé“ç†ï¼Œä½†éœ€è¦ä»å¤šä¸ªè§’åº¦æ¥è¯„ä»·ã€‚æˆ‘çš„è§‚ç‚¹å¦‚ä¸‹ï¼š</p><ol><li><p>Windowsã€MAC OSå’ŒAndroidç­‰æ“ä½œç³»ç»Ÿå·²ç»è¶³å¤Ÿä¸°å¯Œï¼Œè€Œä¸”å·²ç»åœ¨ä¸åŒé¢†åŸŸå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œå› æ­¤æŸç§ç¨‹åº¦ä¸Šç¡®å®æ²¡æœ‰å¿…è¦å†å¼€å‘æ–°çš„æ“ä½œç³»ç»Ÿã€‚ä½†æ˜¯ï¼Œä»ç§‘æŠ€åˆ›æ–°å’ŒæŠ€æœ¯è¿›æ­¥çš„è§’åº¦æ¥çœ‹ï¼Œæ“ä½œç³»ç»Ÿçš„ç ”ç©¶å’Œå¼€å‘ä»ç„¶å…·æœ‰å·¨å¤§ä»·å€¼ã€‚æ–°çš„æ“ä½œç³»ç»Ÿå¯èƒ½å¼•å…¥æ–°çš„ç¼–ç¨‹æ¨¡å‹ã€æ–°çš„åº”ç”¨åœºæ™¯å’Œæ–°çš„æŠ€æœ¯ç‰¹æ€§ï¼Œä»è€Œå¸¦æ¥æ›´å¤šçš„å˜é©å’Œçªç ´ã€‚</p></li><li><p>å›½äº§æ“ä½œç³»ç»Ÿè™½ç„¶é€šå¸¸åŸºäºå¼€æºLinuxç³»ç»Ÿæ„å»ºï¼Œä½†è¿™å¹¶ä¸ä»£è¡¨å®ƒä»¬æ¯«æ— æ„ä¹‰ã€‚å›½äº§ç³»ç»Ÿåœ¨ä¸æ–­åˆ›æ–°å’Œæ”¹è¿›ï¼Œä»¥é€‚åº”å›½å†…çš„ä¸åŒéœ€æ±‚å’Œå¸‚åœºç¯å¢ƒã€‚æ­¤å¤–ï¼Œå›½äº§ç³»ç»Ÿè¿˜å…·æœ‰ä¿¡æ¯å®‰å…¨å’Œè‡ªä¸»å¯æ§çš„ä¼˜åŠ¿ï¼Œå¯ä»¥æé«˜å›½å†…è®¡ç®—æœºç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚å› æ­¤ï¼Œå›½äº§æ“ä½œç³»ç»Ÿåœ¨ä¸­å›½çš„å‘å±•ä»ç„¶å…·æœ‰é‡è¦çš„æ„ä¹‰ã€‚</p></li><li><p>å¯¹äºç ”ç©¶é™¢å’Œé«˜æ ¡è€Œè¨€ï¼Œä»äº‹æ“ä½œç³»ç»Ÿçš„ç ”ç©¶å’Œå¼€å‘æ˜¯é‡è¦çš„å­¦æœ¯è¯¾é¢˜å’ŒæŠ€æœ¯æŒ‘æˆ˜ã€‚æ“ä½œç³»ç»Ÿä¸ä»…æ˜¯è®¡ç®—æœºé¢†åŸŸçš„åŸºç¡€å’Œæ ¸å¿ƒï¼Œè€Œä¸”ä¹Ÿæ¶‰åŠåˆ°äººå·¥æ™ºèƒ½ã€ç‰©è”ç½‘ã€è¾¹ç¼˜è®¡ç®—ç­‰é‡è¦çš„æŠ€æœ¯é¢†åŸŸã€‚å› æ­¤ï¼ŒæŠ•å…¥äººå‘˜å’Œç»è´¹è¿›è¡Œæ“ä½œç³»ç»Ÿç ”ç©¶å’Œå¼€å‘ä¹Ÿæ˜¯éå¸¸æœ‰æ„ä¹‰å’Œå¿…è¦çš„ã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œæ“ä½œç³»ç»Ÿçš„ç ”ç©¶å’Œå¼€å‘å¯¹äºè®¡ç®—æœºé¢†åŸŸå’Œäº§ä¸šçš„å‘å±•éƒ½å…·æœ‰é‡è¦çš„è´¡çŒ®ï¼Œæˆ‘ä»¬åº”è¯¥é¼“åŠ±å’Œæ”¯æŒè¿™æ–¹é¢çš„æ¢ç´¢å’Œåˆ›æ–°ã€‚</p><h3 id="3-ä¸€äº›æ•™ææŒ‡å‡ºæ“ä½œç³»ç»Ÿçš„4ä¸ªç‰¹å¾ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥ï¼Œæ•™æ17é¡µçš„â€œä¸ç¡®å®šæ€§â€å¯¹åº”ç€ä»€ä¹ˆï¼Ÿè¯·å¯¹è¿™äº›ç‰¹å¾åšå‡ºè§£é‡Šã€‚"><a href="#3-ä¸€äº›æ•™ææŒ‡å‡ºæ“ä½œç³»ç»Ÿçš„4ä¸ªç‰¹å¾ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥ï¼Œæ•™æ17é¡µçš„â€œä¸ç¡®å®šæ€§â€å¯¹åº”ç€ä»€ä¹ˆï¼Ÿè¯·å¯¹è¿™äº›ç‰¹å¾åšå‡ºè§£é‡Šã€‚" class="headerlink" title="3.ä¸€äº›æ•™ææŒ‡å‡ºæ“ä½œç³»ç»Ÿçš„4ä¸ªç‰¹å¾ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥ï¼Œæ•™æ17é¡µçš„â€œä¸ç¡®å®šæ€§â€å¯¹åº”ç€ä»€ä¹ˆï¼Ÿè¯·å¯¹è¿™äº›ç‰¹å¾åšå‡ºè§£é‡Šã€‚"></a>3.ä¸€äº›æ•™ææŒ‡å‡ºæ“ä½œç³»ç»Ÿçš„4ä¸ªç‰¹å¾ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥ï¼Œæ•™æ17é¡µçš„â€œä¸ç¡®å®šæ€§â€å¯¹åº”ç€ä»€ä¹ˆï¼Ÿè¯·å¯¹è¿™äº›ç‰¹å¾åšå‡ºè§£é‡Šã€‚</h3><p>ç­”ï¼šæ•™æçš„â€œä¸ç¡®å®šæ€§â€ç‰¹å¾å¯ä»¥ç†è§£ä¸ºâ€œå¹¶å‘â€å’Œâ€œå¼‚æ­¥â€ç‰¹å¾çš„ç»“åˆã€‚æ“ä½œç³»ç»Ÿä¸­çš„ä¸ç¡®å®šæ€§ä¸»è¦æ˜¯æŒ‡åœ¨å¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œå¤„ç†å™¨å’ŒIOè®¾å¤‡çš„è¯·æ±‚ä¼šä»¥ä¸å¯é¢„æµ‹çš„é¡ºåºå‡ºç°ï¼Œè€Œä¸”æ“ä½œç³»ç»Ÿæ— æ³•é¢„æµ‹å®ƒä»¬çš„è°ƒåº¦é¡ºåºã€‚è¿™ç§ä¸ç¡®å®šæ€§ä¹Ÿè¢«ç§°ä¸ºâ€œç«æ€æ¡ä»¶â€ï¼ˆrace conditionï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿›ç¨‹å‡ºç°ä¸å¯é¢„æµ‹çš„ç»“æœã€‚</p><p>å››ä¸ªç‰¹å¾çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><ol><li><p>å¹¶å‘ï¼ˆConcurrencyï¼‰ï¼šæŒ‡åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œæœ‰å¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œã€‚åœ¨å•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå¹¶å‘æ˜¯é€šè¿‡ä¸­æ–­ã€æ—¶é’Ÿä¸­æ–­æˆ–å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯æ¥å®ç°çš„ã€‚è€Œåœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œåˆ™å­˜åœ¨çœŸæ­£çš„å¹¶è¡Œå¤„ç†ã€‚</p></li><li><p>å…±äº«ï¼ˆSharingï¼‰ï¼šæŒ‡ç³»ç»Ÿä¸­çš„èµ„æºï¼ˆå¦‚ç¡¬ç›˜ã€æ‰“å°æœºç­‰ï¼‰å¯ä¾›å¤šä¸ªè¿›ç¨‹æˆ–ç”¨æˆ·å…±åŒä½¿ç”¨ã€‚å› ä¸ºèµ„æºæœ‰é™ï¼Œå®ƒçš„è®¿é—®éœ€è¦åè°ƒå’Œç®¡ç†ã€‚</p></li><li><p>è™šæ‹Ÿï¼ˆVirtualizationï¼‰ï¼šæŒ‡é€šè¿‡ä¸€ç§æ–¹å¼ï¼ŒæŠŠä¸€ä¸ªç‰©ç†èµ„æºè½¬åŒ–ä¸ºå¤šä¸ªé€»è¾‘ä¸Šçš„èµ„æºï¼Œä½¿å¾—å¤šä¸ªè¿›ç¨‹æˆ–ç”¨æˆ·å¯ä»¥åŒæ—¶ä½¿ç”¨è¿™äº›èµ„æºã€‚ä¾‹å¦‚ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´å…è®¸å¤šä¸ªè¿›ç¨‹å…±äº«å†…å­˜ï¼Œä½†æ¯ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºå†…å­˜æ˜¯ç‹¬å çš„ã€‚</p></li><li><p>å¼‚æ­¥ï¼ˆAsynchronyï¼‰ï¼šæŒ‡æ“ä½œç³»ç»Ÿæ— æ³•é¢„æµ‹è¿›ç¨‹çš„è¯·æ±‚å’Œæ‰§è¡Œæ—¶é—´ï¼Œè¯·æ±‚å’Œæ‰§è¡Œä¹‹é—´çš„æ—¶é—´é—´éš”å¯èƒ½ä¸ç¡®å®šã€‚è¿™æ˜¯å› ä¸ºè¿›ç¨‹çš„è¯·æ±‚æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´éƒ½å—åˆ°è®¸å¤šå› ç´ çš„å½±å“ï¼Œå¦‚ç”¨æˆ·è¾“å…¥ã€IOæ“ä½œç­‰ã€‚ä¸ºäº†åº”å¯¹è¿™ç§ä¸ç¡®å®šæ€§ï¼Œæ“ä½œç³»ç»Ÿé€šå¸¸é‡‡ç”¨ä¸­æ–­å¤„ç†ã€è°ƒåº¦ç®—æ³•ç­‰æ–¹å¼ã€‚</p><p>æ€»ä¹‹ï¼Œè¿™å››ä¸ªç‰¹å¾æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè¿™å››ä¸ªç‰¹å¾çš„ç»„åˆä¸ºè®¡ç®—æœºç³»ç»Ÿæä¾›äº†åŸºç¡€è®¾æ–½ï¼Œä½¿å¤šä¸ªè¿›ç¨‹æˆ–ç”¨æˆ·å¯ä»¥å…±äº«èµ„æºå¹¶åœ¨åŒä¸€æ—¶é—´è¿è¡Œã€‚åŒæ—¶ï¼Œç”±äºæ“ä½œç³»ç»Ÿçš„ç‰¹æ®Šæ€§è´¨ï¼Œæ“ä½œç³»ç»Ÿçš„åˆ†æã€è®¾è®¡å’Œå®ç°éƒ½ä¸å®ƒä»¬æœ‰ç€å¯†åˆ‡çš„è”ç³»ã€‚</p></li></ol><h3 id="4-å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ä¸è”ç³»ï¼Ÿç°ä»£è®¡ç®—æœºå†…æœ‰å¤šå°‘CPUï¼Ÿç¨‹åºè¿è¡Œæ˜¯å¹¶è¡Œè¿˜æ˜¯å¹¶å‘ï¼Ÿ"><a href="#4-å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ä¸è”ç³»ï¼Ÿç°ä»£è®¡ç®—æœºå†…æœ‰å¤šå°‘CPUï¼Ÿç¨‹åºè¿è¡Œæ˜¯å¹¶è¡Œè¿˜æ˜¯å¹¶å‘ï¼Ÿ" class="headerlink" title="4.å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ä¸è”ç³»ï¼Ÿç°ä»£è®¡ç®—æœºå†…æœ‰å¤šå°‘CPUï¼Ÿç¨‹åºè¿è¡Œæ˜¯å¹¶è¡Œè¿˜æ˜¯å¹¶å‘ï¼Ÿ"></a>4.å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ä¸è”ç³»ï¼Ÿç°ä»£è®¡ç®—æœºå†…æœ‰å¤šå°‘CPUï¼Ÿç¨‹åºè¿è¡Œæ˜¯å¹¶è¡Œè¿˜æ˜¯å¹¶å‘ï¼Ÿ</h3><p>ç­”ï¼šå¹¶è¡Œï¼ˆParallelï¼‰å’Œå¹¶å‘ï¼ˆConcurrencyï¼‰æ˜¯ä¸¤ä¸ªæ¦‚å¿µã€‚</p><p>å¹¶å‘æ˜¯æŒ‡å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶é—´æ®µå†…è¢«æ‰§è¡Œï¼Œå¸¸å¸¸æ˜¯åœ¨ä¸€ä¸ª CPU ä¸Šè½®æµäº¤æ›¿æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä»è€Œé€ æˆå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œçš„é”™è§‰ã€‚</p><p>å¹¶è¡Œæ˜¯æŒ‡å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶é—´ç‚¹ä¸Šè¢«æ‰§è¡Œï¼Œå¤šä¸ª CPU å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªè®¡ç®—ç¯èŠ‚ã€‚</p><p>ç°ä»£è®¡ç®—æœºå†…éƒ¨çš„ CPU æ•°é‡å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè®¡ç®—æœºè®¾å¤‡çš„è®¡ç®—èƒ½åŠ›éœ€æ±‚ï¼Œä»æ—¥å¸¸ä½¿ç”¨çš„ PC å’Œ Mac ç­‰å°å¼æœºå’Œç¬”è®°æœ¬ç”µè„‘ä¸­çš„ 2 æˆ– 4 æ ¸ CPUï¼Œåˆ°æ•°æ®ä¸­å¿ƒå’Œé«˜æ€§èƒ½è®¡ç®—æœºï¼ˆHPCï¼‰ä¸­å¯æ‹“å±•åˆ°è¶…è¿‡æ•°åƒä¸ªæ ¸å¿ƒçš„ CPUã€‚</p><p>ç¨‹åºè¿è¡Œæ—¶å¹¶è¡Œè¿˜æ˜¯å¹¶å‘ï¼Œåˆ™å–å†³äºå®é™…ä½¿ç”¨çš„è®¡ç®—ç¯å¢ƒã€‚åœ¨å•ä¸ª CPU è®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åºé€šå¸¸æ˜¯å¹¶å‘çš„ï¼Œè€Œåœ¨æ‹¥æœ‰å¤šä¸ª CPU çš„è®¡ç®—æœºè®¾å¤‡ä¸Šè¿è¡Œçš„ç¨‹åºå¯èƒ½åŒæ—¶æ‰§è¡Œå¹¶è¡Œè®¡ç®—ã€‚</p><h3 id="5-æœ‰äººè¯´ï¼šä¸“å¿ƒåšäº‹ä¸€ä»¶äº‹æ¯”åŒæ—¶åšå¤šä»¶äº‹æ•ˆç‡é«˜ï¼Œé‚£ä¹ˆå¤šé“ç³»ç»Ÿæ•ˆç‡æ²¡æœ‰å•é“ç³»ç»Ÿæ•ˆç‡é«˜ï¼Œè¿™ç§è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Ÿå•é“çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Œå¤šé“ç³»ç»Ÿæ˜¯å¦å·²ç»å–ä»£äº†å•é“ç³»ç»Ÿï¼Ÿ"><a href="#5-æœ‰äººè¯´ï¼šä¸“å¿ƒåšäº‹ä¸€ä»¶äº‹æ¯”åŒæ—¶åšå¤šä»¶äº‹æ•ˆç‡é«˜ï¼Œé‚£ä¹ˆå¤šé“ç³»ç»Ÿæ•ˆç‡æ²¡æœ‰å•é“ç³»ç»Ÿæ•ˆç‡é«˜ï¼Œè¿™ç§è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Ÿå•é“çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Œå¤šé“ç³»ç»Ÿæ˜¯å¦å·²ç»å–ä»£äº†å•é“ç³»ç»Ÿï¼Ÿ" class="headerlink" title="5.æœ‰äººè¯´ï¼šä¸“å¿ƒåšäº‹ä¸€ä»¶äº‹æ¯”åŒæ—¶åšå¤šä»¶äº‹æ•ˆç‡é«˜ï¼Œé‚£ä¹ˆå¤šé“ç³»ç»Ÿæ•ˆç‡æ²¡æœ‰å•é“ç³»ç»Ÿæ•ˆç‡é«˜ï¼Œè¿™ç§è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Ÿå•é“çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Œå¤šé“ç³»ç»Ÿæ˜¯å¦å·²ç»å–ä»£äº†å•é“ç³»ç»Ÿï¼Ÿ"></a>5.æœ‰äººè¯´ï¼šä¸“å¿ƒåšäº‹ä¸€ä»¶äº‹æ¯”åŒæ—¶åšå¤šä»¶äº‹æ•ˆç‡é«˜ï¼Œé‚£ä¹ˆå¤šé“ç³»ç»Ÿæ•ˆç‡æ²¡æœ‰å•é“ç³»ç»Ÿæ•ˆç‡é«˜ï¼Œè¿™ç§è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Ÿå•é“çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Œå¤šé“ç³»ç»Ÿæ˜¯å¦å·²ç»å–ä»£äº†å•é“ç³»ç»Ÿï¼Ÿ</h3><p>ç­”ï¼šè¿™ç§è¯´æ³•æ˜¯æœ‰é“ç†çš„ã€‚ä¸“å¿ƒåšä¸€ä»¶äº‹æ¯”åŒæ—¶åšå¤šä»¶äº‹æ›´èƒ½æé«˜æ•ˆç‡ï¼Œå› ä¸ºå½“æˆ‘ä»¬ä¸“æ³¨äºä¸€ä»¶äº‹æƒ…æ—¶ï¼Œå¯ä»¥æ›´å¥½åœ°é›†ä¸­ç²¾åŠ›å’Œèµ„æºï¼Œèƒ½å¤Ÿæ›´å¿«åœ°å®Œæˆä»»åŠ¡ï¼Œå‡å°‘é—æ¼å’Œé”™è¯¯çš„æ¦‚ç‡ã€‚åŒæ—¶ï¼Œå¤šä»»åŠ¡åˆ‡æ¢æ‰€å¸¦æ¥çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ä¹Ÿä¼šé™ä½è®¡ç®—æœºç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ã€‚</p><p>å•é“ç³»ç»Ÿæ˜¯æŒ‡ä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡æˆ–è¿›ç¨‹çš„æ“ä½œç³»ç»Ÿï¼Œåœ¨å•ä»»åŠ¡æ¡ä»¶ä¸‹ï¼Œä¸€æ—¦ä»»åŠ¡è¿›å…¥å°±ä¼šä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°å…¶è¿è¡Œç»“æŸä¸ºæ­¢ã€‚å•é“ç³»ç»Ÿçš„å¥½å¤„æ˜¯ç®€å•ï¼Œæ˜“äºå®ç°å’Œç»´æŠ¤ï¼Œè€Œä¸”å¯ä»¥é¿å…å¤šä»»åŠ¡åˆ‡æ¢çš„å¼€é”€å’Œè°ƒåº¦é—®é¢˜ã€‚å®ƒé€‚ç”¨äºèµ„æºç®€å•çš„ç¯å¢ƒï¼Œåœ¨è¾ƒç®€å•çš„åœºæ™¯ä¸‹å¯ä»¥ä¼˜åŒ–æ•´ä¸ªç³»ç»Ÿã€‚</p><p>ç„¶è€Œï¼Œç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­å¤šæ•°é‡‡ç”¨å¤šé“ç³»ç»Ÿï¼ˆMulti-Programming System)ã€‚å¤šé“ç³»ç»Ÿæ„å‘³ç€å¤šä¸ªè¿›ç¨‹åŒæ—¶åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­å·¥ä½œï¼Œè®¡ç®—æœºç³»ç»Ÿå¯ä»¥åœ¨æ¯ä¸ªç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å®Œæˆå¤šä»»åŠ¡åˆ‡æ¢ï¼Œå……åˆ†åˆ©ç”¨ CPU å’Œå…¶ä»–èµ„æºï¼Œä»è€Œæé«˜æ•´ä¸ªç³»ç»Ÿçš„æ•ˆç‡ã€‚</p><p>ç›¸è¾ƒäºå•é“ç³»ç»Ÿï¼Œå¤šé“ç³»ç»Ÿæœ€å¤§çš„å¥½å¤„åœ¨äºå¯ä»¥æœ‰æ•ˆåœ°å……åˆ†åˆ©ç”¨èµ„æºï¼Œå‡å°‘äº†è¿›ç¨‹ç­‰å¾…æ—¶é—´ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å“åº”é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œå¤šé“ç³»ç»Ÿå¯ä»¥å…¼å®¹å¤šç§åº”ç”¨ç¨‹åºï¼Œæå‡æ•´ä¸ªç³»ç»Ÿçš„å…¼å®¹æ€§å’Œåº”ç”¨åœºæ™¯ã€‚</p><p>æ€»ä¹‹ï¼Œå•é“ç³»ç»Ÿçš„å¥½å¤„åœ¨äºç®€å•å’Œæ˜“äºå®ç°ç»´æŠ¤ï¼Œä½†æ˜¯åœ¨ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå¤šé“ç³»ç»Ÿå·²ç»æˆä¸ºä¸»æµï¼Œå®ƒå……åˆ†åˆ©ç”¨äº†è®¡ç®—æœºèµ„æºï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå¤šä¸ªè¿›ç¨‹å’Œåº”ç”¨ç¨‹åºæä¾›æ›´å¥½çš„æœåŠ¡å’Œæ”¯æŒã€‚<br>å…³äºâ€œä¸“å¿ƒåšäº‹ä¸€ä»¶äº‹æ¯”åŒæ—¶åšå¤šä»¶äº‹æ•ˆç‡é«˜ï¼Œé‚£ä¹ˆå¤šé“ç³»ç»Ÿæ•ˆç‡æ²¡æœ‰å•é“ç³»ç»Ÿæ•ˆç‡é«˜ï¼Œè¿™ç§è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Ÿâ€çš„é—®é¢˜ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œåˆ†æã€‚ä»åŸåˆ™ä¸Šæ¥è¯´ï¼Œå¤šé“ç³»ç»Ÿçš„æ•ˆç‡åº”è¯¥æ¯”å•é“ç³»ç»Ÿçš„æ•ˆç‡é«˜ï¼Œè¿™æ˜¯å› ä¸ºå¤šé“ç³»ç»Ÿå…è®¸ç³»ç»ŸåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œè¿›è€Œæé«˜äº† CPUã€å†…å­˜ç­‰ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡ï¼Œä»è€Œè¾¾åˆ°æ›´é«˜çš„ç³»ç»Ÿååé‡å’Œæ›´å°‘çš„ç­‰å¾…æ—¶é—´ã€‚ä½†æ˜¯ï¼Œç”±äºå¤šé“ç³»ç»Ÿéœ€è¦å¯¹å¤šä¸ªä»»åŠ¡ä¹‹é—´çš„èµ„æºå…±äº«å’Œè°ƒåº¦è¿›è¡Œç®¡ç†ï¼Œå› æ­¤éœ€è¦æ›´å¤§çš„ç³»ç»Ÿå†…æ ¸å’Œç®¡ç†å¼€é”€ï¼Œä¹Ÿæœ‰å¯èƒ½å¸¦æ¥æ›´å¤šçš„å‚ç›´æ€§èƒ½ä¸‹é™ã€‚å› æ­¤ï¼Œåœ¨å®è·µä¸­ï¼Œé€‰æ‹©å•é“ç³»ç»Ÿè¿˜æ˜¯å¤šé“ç³»ç»Ÿåº”è¯¥æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œæ€§èƒ½æŒ‡æ ‡è¿›è¡Œæ¯”è¾ƒå’Œé€‰æ‹©ã€‚</p><p>å•é“ç³»ç»Ÿçš„ä¼˜åŠ¿åœ¨äºåœ¨è¿è¡Œå•ä¸ªè¿›ç¨‹æ—¶æ‹¥æœ‰æœ€é«˜çš„ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ï¼Œä»¥åŠæ›´å°‘çš„èµ„æºè°ƒåº¦å’Œç®¡ç†å¼€é”€ã€‚å› æ­¤ï¼Œåœ¨éœ€è¦å¤„ç†å…·æœ‰ä¸€è‡´æ€§éœ€æ±‚çš„ç‹¬ç«‹ä»»åŠ¡ï¼ˆä¾‹å¦‚å•ä¸ªåº”ç”¨ç¨‹åºã€æœåŠ¡ç­‰ï¼‰æ—¶ï¼Œå•é“ç³»ç»Ÿå¯èƒ½æ˜¯ä¸€ä¸ªè‰¯å¥½çš„é€‰æ‹©ã€‚ç›¸åï¼Œå¤šé“ç³»ç»Ÿæ›´é€‚ç”¨äºéœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ä¸”éœ€è¦è¾ƒé«˜èµ„æºçš„åœºæ™¯ã€‚</p><p>éšç€è®¡ç®—æœºç³»ç»Ÿçš„å‘å±•ï¼Œå¤šé“ç³»ç»Ÿå·²ç»åŸºæœ¬ä¸Šå–ä»£äº†å•é“ç³»ç»Ÿï¼Œå› ä¸ºå¤šé“ç³»ç»Ÿåœ¨å¤§å¤šæ•°åº”ç”¨åœºæ™¯ä¸‹å…·æœ‰æ›´é«˜çš„æ•ˆç‡å’Œæ€§èƒ½ã€‚ä½†æ˜¯ï¼Œä¸€äº›ç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚å®æ—¶ç³»ç»Ÿå’ŒåµŒå…¥å¼ç³»ç»Ÿï¼Œåœ¨å®è·µä¸­éœ€è¦ä½¿ç”¨å•é“ç³»ç»Ÿæˆ–è€…å•é“å¤„ç†å™¨ã€‚</p><h3 id="6-å®æ—¶ç³»ç»Ÿçš„æ¦‚å¿µã€è¡¡é‡æŒ‡æ ‡ç­‰ï¼ŒWindowså“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œæ˜¯å¦æ˜¯å®æ—¶ç³»ç»Ÿï¼Ÿ"><a href="#6-å®æ—¶ç³»ç»Ÿçš„æ¦‚å¿µã€è¡¡é‡æŒ‡æ ‡ç­‰ï¼ŒWindowså“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œæ˜¯å¦æ˜¯å®æ—¶ç³»ç»Ÿï¼Ÿ" class="headerlink" title="6.å®æ—¶ç³»ç»Ÿçš„æ¦‚å¿µã€è¡¡é‡æŒ‡æ ‡ç­‰ï¼ŒWindowså“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œæ˜¯å¦æ˜¯å®æ—¶ç³»ç»Ÿï¼Ÿ"></a>6.å®æ—¶ç³»ç»Ÿçš„æ¦‚å¿µã€è¡¡é‡æŒ‡æ ‡ç­‰ï¼ŒWindowså“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œæ˜¯å¦æ˜¯å®æ—¶ç³»ç»Ÿï¼Ÿ</h3><p>ç­”ï¼šå®æ—¶ç³»ç»Ÿæ˜¯æŒ‡è®¡ç®—æœºæˆ–åµŒå…¥å¼ç³»ç»Ÿéœ€è¦åœ¨ä¸¥æ ¼çš„æ—¶é—´é™åˆ¶å†…å®Œæˆä»»åŠ¡ã€‚å®æ—¶ç³»ç»Ÿå¯ä»¥åˆ†ä¸ºç¡¬å®æ—¶ç³»ç»Ÿå’Œè½¯å®æ—¶ç³»ç»Ÿã€‚ç¡¬å®æ—¶ç³»ç»Ÿéœ€è¦ä»¥ç¡®åˆ‡çš„æ—¶åºæ»¡è¶³ä¸»è¦ä»»åŠ¡ï¼Œè€Œè½¯å®æ—¶ç³»ç»Ÿå¯ä»¥å®¹å¿ä¸€å®šç¨‹åº¦çš„åå·®ã€‚å®æ—¶ç³»ç»Ÿçš„æ€§èƒ½é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªæŒ‡æ ‡è¿›è¡Œè¡¡é‡ï¼š</p><ol><li><p>å“åº”æ—¶é—´ï¼šæŒ‡ä»å‘å‡ºè¯·æ±‚åˆ°è·å¾—å›åº”çš„æ—¶é—´ï¼Œå³ä»è¯·æ±‚åˆ°ä»»åŠ¡å®Œæˆæ‰€éœ€çš„æ—¶é—´ã€‚</p></li><li><p>å‘¨è½¬æ—¶é—´ï¼šæŒ‡ä»ä»»åŠ¡å‘èµ·åˆ°ä»»åŠ¡ç»“æŸçš„æ—¶é—´ã€‚</p></li><li><p>æ—¶åºå‡†ç¡®åº¦ï¼šç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿåœ¨ç²¾ç¡®çš„æ—¶é—´å†…å®Œæˆä»»åŠ¡ã€‚</p></li><li><p>ä¸­æ–­å»¶è¿Ÿï¼šæŒ‡ç¡¬å®æ—¶ç³»ç»Ÿåœ¨æ”¶åˆ°ä¸­æ–­è¯·æ±‚åï¼Œèƒ½å¤Ÿåœ¨å®Œå…¨å‡†ç¡®çš„æ—¶é—´å†…å®Œæˆä»»åŠ¡çš„èƒ½åŠ›ã€‚</p></li></ol><p>Windows ä¸æ˜¯ä¸€ä¸ªå®æ—¶ç³»ç»Ÿã€‚è™½ç„¶ Windows å“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œä½†å®ƒå¹¶æ²¡æœ‰è®¾è®¡æˆä¸€ä¸ªç¡¬å®æ—¶ç³»ç»Ÿã€‚è¿™æ˜¯å› ä¸º Windows ä¸ºäº†æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œè®¡ç®—èƒ½åŠ›ï¼Œä¼šåœ¨ä¸åŒçš„æ—¶é—´æ®µæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨ç½‘ç»œå’Œ IO è°ƒåº¦ä¸Šå…·æœ‰ä¸å®Œå…¨å¯é¢„æµ‹çš„æ€§è´¨ã€‚ç„¶è€Œï¼Œå¯¹äºè®¸å¤šæ­£å¸¸ç”¨æˆ·çš„åº”ç”¨ï¼Œå¦‚æ–‡æ¡£ç¼–è¾‘ã€å›¾ç‰‡å¤„ç†å’Œå¤šåª’ä½“æ’­æ”¾ç­‰æ–¹é¢ï¼ŒWindows å…·æœ‰å¾ˆé«˜çš„å®æ—¶æ€§å’Œå®ç”¨æ€§ï¼Œå¯ä»¥å®Œå…¨æ»¡è¶³å¸¸è§ä»»åŠ¡çš„éœ€æ±‚ã€‚</p><h3 id="7-å¤šæ ¸å’Œå¤šCPU-çš„è§£é‡Šï¼Œå’Œå¹¶è¡Œå¹¶å‘çš„å…³ç³»"><a href="#7-å¤šæ ¸å’Œå¤šCPU-çš„è§£é‡Šï¼Œå’Œå¹¶è¡Œå¹¶å‘çš„å…³ç³»" class="headerlink" title="7.å¤šæ ¸å’Œå¤šCPU çš„è§£é‡Šï¼Œå’Œå¹¶è¡Œå¹¶å‘çš„å…³ç³»"></a>7.å¤šæ ¸å’Œå¤šCPU çš„è§£é‡Šï¼Œå’Œå¹¶è¡Œå¹¶å‘çš„å…³ç³»</h3><p>ç­”ï¼šå¤šæ ¸å’Œå¤šCPUæ˜¯æŒ‡ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­çš„ä¸¤ç§ä¸åŒçš„å¤šå¤„ç†å™¨æŠ€æœ¯ã€‚</p><p>å¤šæ ¸å¤„ç†å™¨å¯ä»¥åœ¨ä¸€ä¸ª CPU èŠ¯ç‰‡å†…é›†æˆå¤šä¸ªç‹¬ç«‹çš„å¤„ç†æ ¸å¿ƒï¼Œæ¯ä¸ªæ ¸å¿ƒå¯ä»¥ç‹¬ç«‹å¤„ç†å¤šä¸ªä»»åŠ¡æˆ–çº¿ç¨‹ï¼Œå¹¶å…±äº« CPU å†…éƒ¨ç¼“å­˜å’Œå…¶ä»–ç³»ç»Ÿèµ„æºã€‚å¤šæ ¸å¤„ç†å™¨æé«˜äº†è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦å’Œå¤„ç†èƒ½åŠ›ï¼ŒèŠ‚çœäº†èƒ½æºå’Œç‰©ç†ç©ºé—´æˆæœ¬ï¼Œå¹¶é™ä½äº†è®¡ç®—æœºç³»ç»Ÿçš„å¤æ‚æ€§å’Œæ•…éšœç‡ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¤šä¸ª CPU å¹¶è¡Œå·¥ä½œï¼Œæ¯ä¸ª CPU éƒ½å¯ä»¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡æˆ–å¤„ç†çº¿ç¨‹ã€‚ä¸å¤šæ ¸å¤„ç†å™¨ç›¸æ¯”ï¼Œå¤š CPU å¤„ç†å™¨éœ€è¦æ›´å¤šçš„ç‰©ç†ç©ºé—´ã€ç³»ç»Ÿèµ„æºå’Œèƒ½é‡ï¼Œå¹¶ä¸”éœ€è¦æ›´å¤šçš„ç¡¬ä»¶ã€ç³»ç»Ÿè½¯ä»¶å’Œæ“ä½œç³»ç»Ÿæ”¯æŒã€‚å¤š CPU å¤„ç†å™¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°æ›´é«˜çš„å¹¶è¡Œæ€§ï¼Œä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p><p>å¹¶è¡Œå’Œå¹¶å‘æ˜¯ä¸¤ä¸ªæœ‰å¯†åˆ‡å…³ç³»ä½†å´ä¸åŒçš„æ¦‚å¿µã€‚</p><p>å¹¶è¡Œå¯ä»¥ç†è§£ä¸ºå¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶é—´ç‚¹ä¸Šè¢«è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šä¸ªä»»åŠ¡åŒæ—¶å‘ç”Ÿï¼Œå¹¶ä¸”ä¸äº’ç›¸å¹²æ‰°ã€‚åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œå¤šä¸ª CPU å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œå³å¹¶è¡Œè®¡ç®—ã€‚</p><p>å¹¶å‘æ˜¯æŒ‡å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶é—´æ®µå†…è¢«è¿è¡Œï¼Œå¹¶ä¸”å®ƒä»¬ä¼šç›¸äº’å¹²æ‰°å’Œå½±å“ã€‚åœ¨å• CPU ç³»ç»Ÿä¸­ï¼Œç”±äºæ“ä½œç³»ç»Ÿè°ƒåº¦ç®—æ³•çš„å­˜åœ¨ï¼Œä¸€ä¸ªè¿›ç¨‹åœ¨å¤„ç† I&#x2F;O æ“ä½œçš„åŒæ—¶ï¼Œå¯èƒ½ä¼šæš‚åœå®ƒçš„ CPU è¯·æ±‚ï¼Œå…è®¸å…¶ä»–è¿›ç¨‹è·å¾— CPU æ‰§è¡Œæ—¶é—´ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶è¿è¡Œï¼Œä½†æ˜¯å®ƒä»¬å…±äº« CPU å’Œå…¶ä»–ç³»ç»Ÿèµ„æºï¼Œäº§ç”Ÿèµ„æºäº‰ç”¨é—®é¢˜ã€‚</p><p>æ€»ä¹‹ï¼Œå¹¶è¡ŒæŒ‡çš„æ˜¯åŒä¸€æ—¶é—´ç‚¹ä¸Šå¤šä¸ªä»»åŠ¡çš„å¤„ç†èƒ½åŠ›ï¼Œè€Œå¹¶å‘æŒ‡çš„æ˜¯åŒä¸€æ—¶é—´æ®µå†…å¤šä¸ªä»»åŠ¡çš„å¤„ç†èƒ½åŠ›ã€‚å¤šæ ¸å’Œå¤š CPU å¤„ç†å™¨éƒ½å¯ä»¥å®ç°æ›´é«˜çš„å¹¶è¡Œæ€§å’Œå¹¶å‘æ€§ï¼Œæé«˜è®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</p><h3 id="8-Linuxæ˜¯å¼€æºè½¯ä»¶ï¼Œè‡ªç”±-Free-è½¯ä»¶ï¼Œå¼€æºåè®®GPLæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¼€æºå’Œå…è´¹çš„å…³ç³»"><a href="#8-Linuxæ˜¯å¼€æºè½¯ä»¶ï¼Œè‡ªç”±-Free-è½¯ä»¶ï¼Œå¼€æºåè®®GPLæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¼€æºå’Œå…è´¹çš„å…³ç³»" class="headerlink" title="8.Linuxæ˜¯å¼€æºè½¯ä»¶ï¼Œè‡ªç”±(Free)è½¯ä»¶ï¼Œå¼€æºåè®®GPLæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¼€æºå’Œå…è´¹çš„å…³ç³»"></a>8.Linuxæ˜¯å¼€æºè½¯ä»¶ï¼Œè‡ªç”±(Free)è½¯ä»¶ï¼Œå¼€æºåè®®GPLæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¼€æºå’Œå…è´¹çš„å…³ç³»</h3><p>ç­”ï¼šGNU General Public License (GPL) æ˜¯ä¸€ç§å¼€æºè½¯ä»¶ä½¿ç”¨å’Œåˆ†å‘çš„è®¸å¯åè®®ã€‚GPL å…è®¸å¼€å‘è€…å…è´¹åœ°ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹ã€å‘å¸ƒè½¯ä»¶ï¼Œå¹¶å¼ºåˆ¶å…¶åœ¨åˆ†å‘æ—¶å¼€æ”¾æºä»£ç ï¼Œå¹¶ä½¿ç”¨ GPL è®¸å¯åè®®åˆ†å‘å…¶è¡ç”Ÿä½œå“ã€‚ä½¿ç”¨ GPL è®¸å¯åè®®å‘å¸ƒçš„è½¯ä»¶å¯ä»¥è‡ªç”±ä½¿ç”¨ï¼Œåˆ†å‘ï¼Œä¿®æ”¹ï¼ŒåŒæ—¶åˆ†å‘çš„ä»»ä½•è¡ç”Ÿä½œå“ä¹Ÿå¿…é¡»åœ¨åŒä¸€è®¸å¯åè®®ä¸‹åˆ†å‘ï¼Œå¹¶ä¸”éœ€è¦å¼€æ”¾æºä»£ç ã€‚</p><p>å¼€æºè½¯ä»¶æŒ‡çš„æ˜¯å¯ä»¥é€šè¿‡æŸ¥çœ‹æºä»£ç æ¥äº†è§£åº”ç”¨ç¨‹åºè¿è¡Œçš„ç»†èŠ‚ã€æœºåˆ¶å’Œç»“æ„ï¼Œä¸”å¯ä»¥å…è´¹ä½¿ç”¨å’Œåˆ†å‘çš„è½¯ä»¶ã€‚å¼€æºä¸ä¸€å®šå…è´¹ï¼Œä½†æ˜¯å¼€æºè½¯ä»¶é€šå¸¸æ˜¯å…è´¹çš„æˆ–è€…ä½¿ç”¨è´¹ç”¨ç›¸å¯¹è¾ƒä½ã€‚å¼€æºè½¯ä»¶çš„ä½¿ç”¨è€…å¯ä»¥ä¿®æ”¹æºä»£ç ä»¥é€‚åº”è‡ªå·±çš„éœ€æ±‚å’Œç”¨é€”ï¼Œä½†æ˜¯éœ€è¦éµå®ˆé€‚ç”¨çš„ç‰ˆæƒå’Œè®¸å¯åè®®ã€‚</p><p>è‡ªç”±è½¯ä»¶æŒ‡çš„æ˜¯å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨ã€å¤åˆ¶ã€åˆ†å‘ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹æºä»£ç çš„è½¯ä»¶ã€‚è‡ªç”±è½¯ä»¶çš„ä½¿ç”¨è€…å¯ä»¥è‡ªç”±åœ°æ”¹è¿›ã€æ‰©å±•ã€ä¿®æ”¹ä»£ç ä»¥é€‚åº”è‡ªå·±çš„éœ€è¦ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒä»»ä½•ç‰ˆæƒé—®é¢˜ã€‚å¼€æºè½¯ä»¶å’Œè‡ªç”±è½¯ä»¶åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯ä¾§é‡ç‚¹ä¸åŒï¼Œè‡ªç”±è½¯ä»¶æ›´æ³¨é‡äºæ›´å¹¿æ³›çš„è‡ªç”±å’Œéšç§æƒï¼Œå¼€æºè½¯ä»¶æ›´æ³¨é‡äºæºä»£ç çš„å…¬å¼€æ€§å’Œé€æ˜åº¦ã€‚</p><p>å¼€æºå’Œå…è´¹çš„æ¦‚å¿µå¯†åˆ‡ç›¸å…³ï¼Œä½†æ˜¯å¹¶ä¸ç­‰ä»·ã€‚å¼€æºè½¯ä»¶çš„æºä»£ç æ˜¯å…¬å¼€å¯è§çš„ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥é˜…è¯»å’Œäº†è§£åº”ç”¨ç¨‹åºçš„å®ç°ç»†èŠ‚å’Œæœºåˆ¶ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è‡ªç”±åœ°ä¿®æ”¹ä»£ç å’Œåˆ›é€ è¡ç”Ÿä½œå“ã€‚ç„¶è€Œï¼Œå¼€æºå¹¶ä¸ä¸€å®šä»£è¡¨å…è´¹ï¼Œä¸€äº›å¼€æºè½¯ä»¶å¯èƒ½ä¼šæ”¶å–ä½¿ç”¨è´¹ç”¨ï¼Œä¾‹å¦‚ Red Hat çš„å•†ä¸š Linux å‘è¡Œç‰ˆã€‚è€Œå…è´¹è½¯ä»¶å¹¶ä¸ä¸€å®šæ˜¯å¼€æºçš„ï¼Œä¾‹å¦‚æŸäº›ä¸“æœ‰è½¯ä»¶å¯èƒ½æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯æºä»£ç æ˜¯ä¸å…¬å¼€çš„ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¼€æºå’Œå…è´¹æ˜¯ç›¸å…³ä½†ä¸ç­‰ä»·çš„æ¦‚å¿µï¼ŒGPL åè®®æ˜¯ä¸€ç§ä¿æŠ¤å¼€æºè½¯ä»¶çš„è®¸å¯è¯ï¼Œå…è®¸è½¯ä»¶ä½¿ç”¨è€…åœ¨ç¬¦åˆä¸€å®šæ¡ä»¶çš„æƒ…å†µä¸‹å…è´¹åœ°åˆ¶ä½œã€å‘å¸ƒå’Œä¿®æ”¹è½¯ä»¶çš„æºä»£ç ï¼ŒåŒæ—¶ç¡®ä¿å®ƒä»¬çš„ä¿®æ”¹å¿…é¡»æ˜¯å¼€æ”¾æºä»£ç çš„ã€‚</p><h3 id="9-æŸ¥é˜…èµ„æ–™äº†è§£å’Œæ“ä½œç³»ç»Ÿç›¸å…³çš„å‡ ä¸ªè‘—åäººç‰©ï¼šç†æŸ¥å¾·æ–¯æ‰˜æ›¼ï¼Œè‚¯Â·æ±¤æ™®æ£®ç­‰çš„äº‹è¿¹"><a href="#9-æŸ¥é˜…èµ„æ–™äº†è§£å’Œæ“ä½œç³»ç»Ÿç›¸å…³çš„å‡ ä¸ªè‘—åäººç‰©ï¼šç†æŸ¥å¾·æ–¯æ‰˜æ›¼ï¼Œè‚¯Â·æ±¤æ™®æ£®ç­‰çš„äº‹è¿¹" class="headerlink" title="9.æŸ¥é˜…èµ„æ–™äº†è§£å’Œæ“ä½œç³»ç»Ÿç›¸å…³çš„å‡ ä¸ªè‘—åäººç‰©ï¼šç†æŸ¥å¾·æ–¯æ‰˜æ›¼ï¼Œè‚¯Â·æ±¤æ™®æ£®ç­‰çš„äº‹è¿¹"></a>9.æŸ¥é˜…èµ„æ–™äº†è§£å’Œæ“ä½œç³»ç»Ÿç›¸å…³çš„å‡ ä¸ªè‘—åäººç‰©ï¼šç†æŸ¥å¾·æ–¯æ‰˜æ›¼ï¼Œè‚¯Â·æ±¤æ™®æ£®ç­‰çš„äº‹è¿¹</h3><p>ç­”ï¼š</p><ol><li>Richard Stallman (ç†æŸ¥å¾·Â·é©¬ä¿®Â·æ–¯æ‰˜æ›¼)</li></ol><p>Richard Stallmanï¼Œç®€ç§° rmsï¼Œæ˜¯è®¡ç®—æœºè‡ªç”±è½¯ä»¶è¿åŠ¨çš„å¥ åŸºäººä¹‹ä¸€ï¼Œä»–äº1983å¹´åˆ›ç«‹äº†è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šï¼ˆFree Software Foundationï¼Œä»¥ä¸‹ç®€ç§° FSFï¼‰ï¼Œå¹¶å‘èµ·äº† GNU é¡¹ç›®ã€‚ä»–æ˜¯ GNU é€šç”¨å…¬å…±è®¸å¯è¯ï¼ˆGeneral Public Licenseï¼Œä»¥ä¸‹ç®€ç§° GPLï¼‰çš„ä¸»è¦è®¾è®¡è€…ä¹‹ä¸€ï¼Œè¿™ä¹Ÿæ˜¯å¼€æºè½¯ä»¶ä¸­æœ€æœ‰å½±å“åŠ›çš„è®¸å¯è¯ä¹‹ä¸€ã€‚</p><p>ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼å§‹ç»ˆå¥‰è¡Œè‡ªç”±è½¯ä»¶çš„ç†å¿µï¼Œåšä¿¡å¼€æºè½¯ä»¶çš„å¿…è¦æ€§ï¼Œå¹¶åœ¨è®¸å¤šåœºåˆå‘è¡¨æ¼”è®²å’Œæ–‡ç« ï¼Œé˜è¿°è‡ªç”±è½¯ä»¶è¿åŠ¨çš„å“²å­¦å’Œç†å¿µã€‚ä»–ä¸€ç›´å€¡å¯¼å°†è½¯ä»¶è§†ä¸ºåŸºæœ¬æƒåˆ©è€Œéå•†å“ï¼Œå…¶ç›®æ ‡æ˜¯ä¸ºäº†æ¨åŠ¨è‡ªç”±è½¯ä»¶çš„å‘å±•ã€æé«˜äººæ°‘è‡ªæ²»æƒåˆ©ã€æŠµåˆ¶å•†ä¸šå¯¹æ•°å­—ç§‘æŠ€çš„æ§åˆ¶ã€ä¿ƒè¿›ä¿¡æ¯äº¤æµå’ŒçŸ¥è¯†å…±äº«ç­‰ã€‚</p><ol start="2"><li>Ken Thompsonï¼ˆè‚¯Â·æ±¤æ™®æ£®ï¼‰</li></ol><p>è‚¯Â·æ±¤æ™®æ£®ï¼ˆKenneth Lane Thompsonï¼‰æ˜¯è´å°”å®éªŒå®¤æ—©æœŸçš„ç ”ç©¶å‘˜ï¼Œæ˜¯ Unix æ“ä½œç³»ç»Ÿçš„è”åˆåˆ›å§‹äººä¹‹ä¸€ã€‚ä»–å’Œä¸¹å°¼æ–¯Â·é‡Œå¥‡ä¸€èµ·ï¼Œå‘æ˜äº† C è¯­è¨€å¹¶ä½¿ç”¨ C è¯­è¨€é‡æ–°å®ç°äº† Unix æ“ä½œç³»ç»Ÿï¼Œä»è€Œä¸ºæ“ä½œç³»ç»Ÿçš„å¯ç§»æ¤æ€§å’Œè·¨å¹³å°æ€§æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚</p><p>è‚¯Â·æ±¤æ™®æ£®è¿˜å¼€å‘äº†æ­£åˆ™è¡¨è¾¾å¼ã€streamç¼–è¾‘å™¨ï¼ˆsedï¼‰ã€æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆQEDã€edã€viï¼‰ã€å›¾å½¢ç»˜åˆ¶è¯­è¨€ï¼ˆPicï¼‰ã€ç±»å‹æ’ç‰ˆè¯­è¨€ï¼ˆtroffï¼‰ç­‰åŸºç¡€å·¥å…·ã€‚ä»–è¢«æˆäºˆå›¾çµå¥–ç­‰å¤šé¡¹è£èª‰ï¼Œä»¥è¡¨å½°å…¶å¯¹è®¡ç®—æœºç§‘å­¦çš„è´¡çŒ®ã€‚</p><ol start="3"><li>Linus Torvaldsï¼ˆæ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼‰</li></ol><p>æ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼ˆLinus Torvaldsï¼‰æ˜¯è‘—åçš„è®¡ç®—æœºç§‘å­¦å®¶å’Œç¨‹åºå‘˜ï¼Œä»–åˆ›ç«‹äº† Linux æ“ä½œç³»ç»Ÿå’Œ Git ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚åœ¨å¤§å­¦æ—¶ï¼Œä»–æ¨¡ä»¿ Unix æ“ä½œç³»ç»Ÿï¼Œäº1991å¹´åˆ›å»ºäº† Linux å†…æ ¸ï¼Œå¼€å¯äº†å¼€æºè½¯ä»¶çš„æ–°æ—¶ä»£ã€‚</p><p>Linux æ“ä½œç³»ç»Ÿä»£è¡¨äº†å¼€æºè½¯ä»¶çš„å†å²å’Œç°åœ¨ï¼Œå®ƒå‘å±•è¿…é€Ÿï¼Œå·²ç»æˆä¸ºç§‘å­¦è®¡ç®—ã€ä¼ä¸šæœåŠ¡å™¨ã€åµŒå…¥å¼ç³»ç»Ÿå’Œæ™ºèƒ½æ‰‹æœºç­‰é¢†åŸŸçš„ä¸»æµæ“ä½œç³»ç»Ÿã€‚æ—çº³æ–¯Â·æ‰˜ç“¦å…¹æ˜¯ Linux çš„åˆ›å»ºè€…å’Œç»´æŠ¤è€…ï¼Œä»–è‡´åŠ›äºå¼€å¯è®¡ç®—æœºè½¯ä»¶çš„å¼€æºæ–‡åŒ–ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¼€æºå…±äº«ç²¾ç¥çš„ä»£è¡¨äººç‰©ä¹‹ä¸€ã€‚</p><p>æ€»ä¹‹ï¼Œè¿™äº›äººç‰©å¯¹è®¡ç®—æœºè¡Œä¸šéƒ½åšå‡ºäº†é‡è¦çš„è´¡çŒ®ï¼Œä»–ä»¬çš„äº‹è¿¹å’Œæ€æƒ³å¯¹è®¡ç®—æœºé¢†åŸŸçš„å‘å±•å’Œæ¨åŠ¨ç»™äºˆäº†é‡è¦å½±å“ã€‚åœ¨è®¡ç®—æœºæŠ€æœ¯çš„ä¸æ–­å‘å±•ä¸­ï¼Œä»–ä»¬çš„äº‹è¿¹ä¹Ÿä¼šä¸ºäººä»¬æä¾›é‡è¦çš„å€Ÿé‰´å’Œå‚è€ƒã€‚</p><h3 id="10-æ‰¹å¤„ç†ç³»ç»Ÿä¸­æœ‰ä¸ªæ¦‚å¿µï¼šååé‡ï¼Œäº†è§£ååé‡çš„å«ä¹‰"><a href="#10-æ‰¹å¤„ç†ç³»ç»Ÿä¸­æœ‰ä¸ªæ¦‚å¿µï¼šååé‡ï¼Œäº†è§£ååé‡çš„å«ä¹‰" class="headerlink" title="10.æ‰¹å¤„ç†ç³»ç»Ÿä¸­æœ‰ä¸ªæ¦‚å¿µï¼šååé‡ï¼Œäº†è§£ååé‡çš„å«ä¹‰"></a>10.æ‰¹å¤„ç†ç³»ç»Ÿä¸­æœ‰ä¸ªæ¦‚å¿µï¼šååé‡ï¼Œäº†è§£ååé‡çš„å«ä¹‰</h3><p>   ç­”ï¼šåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œååé‡ï¼ˆthroughputï¼‰æ˜¯è¡¡é‡åœ¨ä¸€å®šæ—¶é—´å†…ä¸€å°æœºå™¨å¤„ç†çš„å·¥ä½œé‡çš„æŒ‡æ ‡ï¼Œé€šå¸¸ç”¨äºè¯„ä¼°è®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½ã€‚ååé‡å¯ä»¥ç”¨äºè¡¡é‡å¹¶å‘ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œæ¯”å¦‚ web æœåŠ¡å™¨ã€æ•°æ®åº“æœåŠ¡å™¨ç­‰ï¼Œè¿™äº›ç³»ç»Ÿéœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå› æ­¤éœ€è¦å…·å¤‡è¾ƒé«˜çš„ååé‡æ¥æ”¯æŒé«˜å¹¶å‘ã€‚</p><p>   ååé‡é€šå¸¸è¢«å®šä¹‰ä¸ºåœ¨ä¸€ä¸ªæŒ‡å®šæ—¶é—´æ®µå†…ï¼Œè®¡ç®—æœºç³»ç»Ÿå¤„ç†ä»»åŠ¡çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨æ¯ç§’é’Ÿå¤„ç† 100 ä¸ªè¯·æ±‚ï¼Œåˆ™å…¶ååé‡ä¸º 100 è¯·æ±‚&#x2F;ç§’ã€‚ååé‡é€šå¸¸ä¸å“åº”æ—¶é—´ï¼ˆresponse timeï¼‰ä¸€åŒä½¿ç”¨æ¥è¡¡é‡è®¡ç®—æœºç³»ç»Ÿçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚å“åº”æ—¶é—´æ˜¯æŒ‡å®Œæˆå•ä¸ªä»»åŠ¡æ‰€éœ€çš„æ—¶é—´ï¼Œè€Œååé‡åˆ™æ˜¯å•ä¸ªç³»ç»Ÿåœ¨æŸä¸ªæ—¶é—´æ®µå†…å®Œæˆä»»åŠ¡çš„æ•°é‡ã€‚</p><p>   åœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œååé‡æ˜¯æŒ‡åœ¨ä¸€å®šæ—¶é—´å†…å®Œæˆçš„ä»»åŠ¡æ•°é‡ã€‚æ‰¹å¤„ç†ç³»ç»Ÿé€šå¸¸è¢«ç”¨äºå¤„ç†å¤§é‡ç›¸ä¼¼æˆ–é‡å¤çš„ä»»åŠ¡ï¼Œå®ƒä»¬çš„å·¥ä½œæµç¨‹æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œå®Œå…¨ä¾èµ–äºç³»ç»Ÿå†…éƒ¨é¢„å®šä¹‰çš„è§„åˆ™å’Œæµç¨‹ã€‚æ‰¹å¤„ç†ç³»ç»Ÿéœ€è¦å¿«é€Ÿå¤„ç†å¤§é‡çš„æ•°æ®å¹¶ç”Ÿæˆå¤„ç†ç»“æœï¼Œå› æ­¤éœ€è¦å…·å¤‡è¾ƒé«˜çš„ååé‡æ¥æ”¯æŒã€‚</p><p>   ååé‡é€šå¸¸æ˜¯è®¡ç®—æœºç³»ç»Ÿæ€§èƒ½è¯„ä¼°ä¸­çš„ä¸€ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå®ƒå—åˆ°å¤šä¸ªå› ç´ çš„å½±å“ï¼ŒåŒ…æ‹¬ç¡¬ä»¶è®¾å¤‡ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºç­‰ã€‚åœ¨ä¼˜åŒ–è®¡ç®—æœºç³»ç»Ÿæ€§èƒ½æ—¶ï¼Œå¯ä»¥é€šè¿‡å¢åŠ ç³»ç»Ÿç¡¬ä»¶å®¹é‡ã€ä¼˜åŒ–ç®—æ³•ã€è°ƒæ•´åº”ç”¨ç¨‹åºä»£ç ç­‰æ–¹å¼æ¥æé«˜ååé‡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ€»ä½“æ€§èƒ½ã€‚</p><h3 id="11-è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹"><a href="#11-è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="11.è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹"></a>11.è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹</h3><p>ç­”ï¼šè„±æœºæ‰¹å¤„ç†ç³»ç»Ÿæ˜¯ä¸€ç§è®¡ç®—æœºç³»ç»Ÿï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯è‡ªåŠ¨å®Œæˆå¤§é‡é‡å¤æ€§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ•°æ®å¤„ç†ã€æŠ¥è¡¨ç”Ÿæˆç­‰ç­‰ã€‚è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿæœ‰è‡ªå·±ç‹¬ç«‹çš„ç¨‹åºå’Œæ•°æ®å­˜å‚¨ç©ºé—´ï¼Œå¹¶åœ¨ä¸éœ€è¦ç”¨æˆ·äº¤äº’æˆ–æ§åˆ¶çš„æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§é¢„å…ˆå®šä¹‰çš„ä»»åŠ¡åˆ—è¡¨è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ã€‚ä¸‹é¢æ˜¯è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹ï¼š</p><ol><li><p>æ“ä½œå‘˜ç¼–å†™ä½œä¸šå¡ï¼ˆjob cardï¼‰ï¼šåœ¨è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œæ“ä½œå‘˜é¦–å…ˆéœ€è¦ç¼–å†™ä¸€ä¸ªåŒ…å«ç¨‹åºå’Œå¤„ç†å‚æ•°ç­‰ä¿¡æ¯çš„ä½œä¸šå¡ã€‚ä½œä¸šå¡é€šå¸¸åŒ…å«ä½œä¸šåç§°ã€è¾“å…¥æ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶åã€ç¨‹åºåç§°ã€å¤„ç†å‚æ•°ç­‰ç­‰ä¿¡æ¯ã€‚</p></li><li><p>æäº¤ä½œä¸šå¡ï¼šæ“ä½œå‘˜å°†ä½œä¸šå¡æäº¤ç»™è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿç®¡ç†äººå‘˜ï¼Œç»è¿‡ä¸€å®šçš„å®¡æ ¸å’Œæ£€æŸ¥åï¼Œå°†è¯¥ä½œä¸šåŠ å…¥åˆ°ä½œä¸šé˜Ÿåˆ—ä¸­ã€‚</p></li><li><p>ä½œä¸šè°ƒåº¦ï¼šè„±æœºæ‰¹å¤„ç†ç³»ç»Ÿç®¡ç†ç¨‹åºæ ¹æ®ä¸€å®šçš„ä½œä¸šä¼˜å…ˆçº§ã€èµ„æºä½¿ç”¨ã€ä½œä¸šä¾èµ–ç­‰è€ƒè™‘å› ç´ ï¼Œå¯¹ä½œä¸šé˜Ÿåˆ—ä¸­çš„ä½œä¸šè¿›è¡Œè°ƒåº¦ã€‚å½“ç³»ç»Ÿå‡†å¤‡å¥½å¤„ç†æŸä¸ªä½œä¸šæ—¶ï¼Œä¾¿è¦æ±‚æ“ä½œå‘˜å°†ç›¸å…³çš„æ•°æ®æ–‡ä»¶åŠ è½½åˆ°ç³»ç»Ÿä¸­ã€‚</p></li><li><p>ä½œä¸šè¿è¡Œï¼šå½“ä½œä¸šè¿›å…¥ç³»ç»Ÿåï¼Œè„±æœºæ‰¹å¤„ç†ç³»ç»ŸæŒ‰ç…§æŒ‡å®šçš„ç¨‹åºå¤„ç†æ•°æ®æ–‡ä»¶ï¼Œæ‰§è¡Œå„ç§è®¡ç®—ä»»åŠ¡ï¼Œå¤„ç†æµç¨‹å®Œå…¨è‡ªåŠ¨è¿›è¡Œã€‚ä½œä¸šè¿è¡ŒæœŸé—´ç³»ç»Ÿä¼šè®°å½•å„ç§è¿è¡Œæ—¥å¿—ï¼Œå¦‚é”™è¯¯ä¿¡æ¯ã€å¤„ç†æ—¶é—´ã€å¤„ç†çš„è¾“å…¥åŠè¾“å‡ºç­‰ç­‰ã€‚</p></li><li><p>è¾“å‡ºæ•°æ®å’Œä½œä¸šæ§åˆ¶ï¼šå½“ä½œä¸šè¿è¡Œå®Œæ¯•åï¼Œç³»ç»Ÿä¼šå°†å¤„ç†çš„ç»“æœå­˜å‚¨åœ¨è¾“å‡ºæ•°æ®æ–‡ä»¶ä¸­ã€‚åœ¨è¾“å‡ºæ•°æ®å®Œæ¯•åï¼Œè„±æœºæ‰¹å¤„ç†ç³»ç»Ÿä¼šå°†è¿è¡Œæ—¥å¿—å’Œè¾“å‡ºæ•°æ®æ–‡ä»¶ç­‰ä¿¡æ¯äº¤è¿˜ç»™ç®¡ç†äººå‘˜ï¼Œä»¥ä¾›åç»­çš„æ“ä½œå’Œä½¿ç”¨ã€‚</p></li></ol><p>è„±æœºæ‰¹å¤„ç†ç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹æ˜¯æ“ä½œå‘˜æäº¤ä½œä¸šå¡ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨è¿è¡Œã€å¤„ç†è¾“å‡ºæ•°æ®ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ç¦»çº¿çš„ã€è‡ªåŠ¨åŒ–çš„ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å¤§é‡èŠ‚çº¦äººåŠ›ã€æ—¶é—´å’Œæˆæœ¬ï¼Œéå¸¸é€‚ç”¨äºå¤„ç†å¤§é‡ç›¸ä¼¼å·¥ä½œçš„åœºæ™¯ï¼Œä¾‹å¦‚æ—¥æŠ¥ã€æ‰¹é‡æ•°æ®å¤„ç†ç­‰åœºæ™¯ã€‚</p><h3 id="12-æè¿°è®¡ç®—æœºçš„å¯åŠ¨è¿‡ç¨‹"><a href="#12-æè¿°è®¡ç®—æœºçš„å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="12.æè¿°è®¡ç®—æœºçš„å¯åŠ¨è¿‡ç¨‹"></a>12.æè¿°è®¡ç®—æœºçš„å¯åŠ¨è¿‡ç¨‹</h3><p>ç­”ï¼šè®¡ç®—æœºçš„å¯åŠ¨è¿‡ç¨‹åˆç§°ä¸ºå¼•å¯¼ï¼ˆbootï¼‰ï¼Œæ˜¯æŒ‡å°†è®¡ç®—æœºä»å…³æœºçŠ¶æ€è½¬åŒ–ä¸ºè¿è¡ŒçŠ¶æ€æ‰€å¿…é¡»çš„è¿‡ç¨‹ã€‚è®¡ç®—æœºå¯åŠ¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬åˆ†ä¸ºç¡¬ä»¶è‡ªæ£€ï¼ˆPOSTï¼‰ã€ä¸»å¼•å¯¼è®°å½•ï¼ˆMBRï¼‰è½½å…¥ã€æ“ä½œç³»ç»Ÿå†…æ ¸è½½å…¥ã€ç³»ç»Ÿåˆå§‹åŒ–ã€ç³»ç»Ÿè‡ªä¸¾ç­‰å¤šä¸ªæ­¥éª¤ï¼Œä»¥ä¸‹æ˜¯è®¡ç®—æœºçš„åŸºæœ¬å¯åŠ¨è¿‡ç¨‹ï¼š</p><ol><li><p>ç”µæºä¾›ç”µï¼šè®¡ç®—æœºçš„å¯åŠ¨é¦–å…ˆéœ€è¦ç”µæºä¾›ç”µï¼Œç”¨æˆ·é€šè¿‡æŒ‰ä¸‹ç”µæºæŒ‰é’®ä½¿ç”µæºå¯åŠ¨å¹¶è¿›å…¥å¾…æœºçŠ¶æ€ã€‚</p></li><li><p>ç¡¬ä»¶è‡ªæ£€ï¼ˆPOSTï¼‰ï¼šè®¡ç®—æœºå¯åŠ¨åï¼ŒCPU é¦–å…ˆæ‰§è¡Œè‡ªæ£€ç¨‹åºï¼ˆPOSTï¼‰ï¼Œå¯¹è®¡ç®—æœºå†…éƒ¨ç¡¬ä»¶è®¾å¤‡è¿›è¡Œè¯Šæ–­å’Œæµ‹è¯•ï¼Œç¡®è®¤æ‰€æœ‰ç¡¬ä»¶è®¾å¤‡éƒ½æ­£å¸¸å·¥ä½œï¼Œä»¥ç¡®ä¿è®¡ç®—æœºèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ã€‚</p></li><li><p>ä¸»å¼•å¯¼è®°å½•åŠ è½½ï¼ˆMBRï¼‰ï¼šç¡¬ä»¶è‡ªæ£€ç»“æŸåï¼Œè®¡ç®—æœºå¼€å§‹è¯»å–ä¸»å¼•å¯¼è®°å½•ï¼ˆMBRï¼‰ï¼Œå¹¶åŠ è½½å¯åŠ¨ç®¡ç†ç¨‹åºï¼ˆboot loaderï¼‰ï¼Œè¯¥ç¨‹åºå…·æœ‰å¯åŠ¨æ“ä½œç³»ç»Ÿçš„æŒ‡ä»¤ã€‚</p></li><li><p>æ“ä½œç³»ç»Ÿå†…æ ¸è½½å…¥ï¼šå¯åŠ¨ç®¡ç†ç¨‹åºå¼€å§‹æ‰§è¡Œï¼ŒåŠ è½½æ“ä½œç³»ç»Ÿçš„å†…æ ¸æ–‡ä»¶ï¼ˆkernelï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°ä¸»æ¿èŠ¯ç‰‡ç»„ï¼ˆchip setï¼‰ï¼Œç”¨äºä¸å…¶å®ƒç³»ç»Ÿç»„ä»¶é€šä¿¡çš„è®¾é…å™¨ï¼ˆä¾‹å¦‚ç£ç›˜æ§åˆ¶å™¨ï¼‰ï¼Œä»¥åŠæ“ä½œç³»ç»Ÿé©±åŠ¨ç¨‹åºçš„åŠ è½½ã€‚</p></li><li><p>ç³»ç»Ÿåˆå§‹åŒ–ï¼šä¸€æ—¦æ“ä½œç³»ç»Ÿå†…æ ¸åŠ è½½å®Œæˆï¼Œå®ƒå°±å¼€å§‹åˆå§‹åŒ–ç³»ç»Ÿå¹¶å°†æ§åˆ¶æƒäº¤ç»™æ“ä½œç³»ç»Ÿã€‚åˆå§‹åŒ–è¿‡ç¨‹æ¶‰åŠå„ç§è®¾å¤‡é©±åŠ¨ç¨‹åºã€ç½‘ç»œåè®®å’Œæ–‡ä»¶ç³»ç»Ÿç­‰æ–¹é¢ã€‚</p></li><li><p>ç”¨æˆ·ç™»å½•ï¼šæ“ä½œç³»ç»Ÿå¯åŠ¨åï¼Œä¼šå¯åŠ¨ç™»å½•ç•Œé¢ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ä»¥ç™»å½•ç³»ç»Ÿï¼Œç„¶åå¯å¼€å§‹è¿›è¡Œå„ç§æ“ä½œã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œè®¡ç®—æœºå¯åŠ¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªç”±ç¡¬ä»¶è‡ªæ£€ã€ä¸»å¼•å¯¼è®°å½•åŠ è½½ã€æ“ä½œç³»ç»Ÿå†…æ ¸è½½å…¥ã€ç³»ç»Ÿåˆå§‹åŒ–ã€ç”¨æˆ·ç™»å½•ç­‰å¤šä¸ªæ­¥éª¤ç»„æˆçš„åºåˆ—ï¼Œéœ€è¦å‚ä¸å¤šä¸ªç»„ä»¶çš„å¯†åˆ‡åä½œï¼Œä»è€Œä½¿è®¡ç®—æœºä»å…³æœºçŠ¶æ€è½¬åŒ–ä¸ºè¿è¡ŒçŠ¶æ€ï¼Œå¹¶å‡†å¤‡å°±ç»ªç­‰å¾…ç”¨æˆ·è¿›è¡Œå„ç§æ“ä½œã€‚</p><hr><h2 id="äºŒ-æ“ä½œç³»ç»Ÿé€»è¾‘ç»“æ„å’Œç¡¬ä»¶çŸ¥è¯†"><a href="#äºŒ-æ“ä½œç³»ç»Ÿé€»è¾‘ç»“æ„å’Œç¡¬ä»¶çŸ¥è¯†" class="headerlink" title="äºŒ.æ“ä½œç³»ç»Ÿé€»è¾‘ç»“æ„å’Œç¡¬ä»¶çŸ¥è¯†"></a>äºŒ.æ“ä½œç³»ç»Ÿé€»è¾‘ç»“æ„å’Œç¡¬ä»¶çŸ¥è¯†</h2><h3 id="1-æ“ä½œç³»ç»Ÿå‡ ç§æ¨¡å¼çš„ç‰¹ç‚¹ï¼ˆä¼˜ç¼ºç‚¹ï¼‰ï¼Œç»™å‡ºä¸€äº›è€ƒé¢˜"><a href="#1-æ“ä½œç³»ç»Ÿå‡ ç§æ¨¡å¼çš„ç‰¹ç‚¹ï¼ˆä¼˜ç¼ºç‚¹ï¼‰ï¼Œç»™å‡ºä¸€äº›è€ƒé¢˜" class="headerlink" title="1.æ“ä½œç³»ç»Ÿå‡ ç§æ¨¡å¼çš„ç‰¹ç‚¹ï¼ˆä¼˜ç¼ºç‚¹ï¼‰ï¼Œç»™å‡ºä¸€äº›è€ƒé¢˜"></a>1.æ“ä½œç³»ç»Ÿå‡ ç§æ¨¡å¼çš„ç‰¹ç‚¹ï¼ˆä¼˜ç¼ºç‚¹ï¼‰ï¼Œç»™å‡ºä¸€äº›è€ƒé¢˜</h3><p>ç­”ï¼šæ“ä½œç³»ç»Ÿå¸¸è§çš„æ¨¡å¼æœ‰ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»å…¶ç‰¹ç‚¹å’Œè€ƒé¢˜ï¼š</p><ol><li>ç”¨æˆ·æ¨¡å¼</li></ol><p>ç”¨æˆ·æ¨¡å¼æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå…è®¸ç”¨æˆ·ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºã€è¿è¡Œè‡ªå·±çš„åº”ç”¨ç¨‹åºã€è¿›è¡Œå„ç§æ“ä½œçš„ä¸€ç§æ¨¡å¼ã€‚ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œåº”ç”¨ç¨‹åºæ²¡æœ‰æƒé™ç›´æ¥æ“ä½œç¡¬ä»¶èµ„æºï¼Œè€Œæ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼ˆsystem callï¼‰å‘æ“ä½œç³»ç»Ÿç”³è¯·æ‰§è¡ŒæŸäº›æ“ä½œï¼Œæ“ä½œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼ï¼Œæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œå¹¶è¿”å›ç»“æœç»™åº”ç”¨ç¨‹åºã€‚</p><p>ä¼˜ç‚¹ï¼š<br>- æ”¯æŒå¤šä»»åŠ¡ï¼Œå¤šç”¨æˆ·çš„å¹¶å‘æ‰§è¡Œ<br>- è¿è¡Œé€Ÿåº¦å¿«ï¼Œé€‚åˆäºç”¨æˆ·åº”ç”¨ç¨‹åº</p><p>ç¼ºç‚¹ï¼š<br>- ç¼ºä¹å¯¹ç¡¬ä»¶èµ„æºçš„ç›´æ¥è®¿é—®æƒé™<br>- æ— æ³•ç›´æ¥è®¿é—®å†…æ ¸æ•°æ®ç»“æ„ï¼Œå¯¹ç³»ç»Ÿè°ƒç”¨çš„è¿‡åº¦ä½¿ç”¨ä¼šå½±å“ç³»ç»Ÿæ€§èƒ½</p><p>è€ƒé¢˜ï¼š<br>- è¯·ç®€è¿°ç”¨æˆ·æ¨¡å¼çš„ç‰¹ç‚¹å’Œä¼˜ç¼ºç‚¹ã€‚<br>- ç»™å‡ºä¸€ç§å¸¸è§çš„æ“ä½œç³»ç»ŸAPIï¼ˆApplication Programming Interfaceï¼‰ï¼Œè¯´æ˜è¯¥APIå’Œç”¨æˆ·æ¨¡å¼çš„å…³ç³»ã€‚<br>- æ“ä½œç³»ç»Ÿå¦‚ä½•ä¿è¯ç”¨æˆ·æ¨¡å¼ä¸‹åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ï¼Ÿ</p><ol start="2"><li>å†…æ ¸æ¨¡å¼</li></ol><p>å†…æ ¸æ¨¡å¼æ˜¯æŒ‡æ“ä½œç³»ç»Ÿæ‹¥æœ‰å¯¹æ‰€æœ‰ç¡¬ä»¶èµ„æºçš„ç›´æ¥ã€å®Œå…¨æ§åˆ¶æƒï¼Œå¹¶èƒ½æ‰§è¡Œæ‰€æœ‰æŒ‡ä»¤çš„ä¸€ç§æ¨¡å¼ã€‚åœ¨å†…æ ¸æ¨¡å¼ä¸‹ï¼Œæ“ä½œç³»ç»Ÿèƒ½å¤Ÿç›´æ¥æ“ä½œç¡¬ä»¶èµ„æºã€æ‰§è¡Œå„ç§å†…æ ¸åŠŸèƒ½ã€‚å½“åº”ç”¨ç¨‹åºè¿›è¡Œç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ£€æŸ¥è¯·æ±‚çš„åˆæ³•æ€§ï¼Œç„¶åè¿›å…¥å†…æ ¸æ¨¡å¼æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><p>ä¼˜ç‚¹ï¼š<br>- å¯¹ç¡¬ä»¶èµ„æºæœ‰ç›´æ¥çš„è®¿é—®æƒé™<br>- å¯ä»¥è®¿é—®å†…æ ¸æ•°æ®ç»“æ„ï¼Œæ”¯æŒæ›´é«˜çº§åˆ«çš„ç³»ç»Ÿè°ƒç”¨</p><p>ç¼ºç‚¹ï¼š<br>- åœ¨å†…æ ¸æ¨¡å¼ä¸‹ï¼Œæ“ä½œç³»ç»Ÿè¿è¡Œé€Ÿåº¦æ¯”ç”¨æˆ·æ¨¡å¼æ…¢<br>- å†…æ ¸æ¨¡å¼ä¸‹çš„ä»£ç å®¹æ˜“å—åˆ°æ¶æ„æ”»å‡»</p><p>è€ƒé¢˜ï¼š<br>- è¯·ç®€è¿°å†…æ ¸æ¨¡å¼çš„ç‰¹ç‚¹å’Œä¼˜ç¼ºç‚¹ã€‚<br>- åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼ä¹‹é—´çš„åˆ‡æ¢ï¼Ÿ<br>- è¯·ç®€è¦è¯´æ˜å†…æ ¸æ¨¡å¼å’Œç”¨æˆ·æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šæ¨¡å¼ï¼Œä¾‹å¦‚å®æ—¶æ¨¡å¼ã€è™šæ‹Ÿæ¨¡å¼ç­‰ï¼Œéƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨æ¡ä»¶ã€‚</p><h3 id="2-ç”¨è‡ªå·±çš„è¯­è¨€æè¿°ä¸€ä¸‹å†…æ ¸åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ç†è§£ç”¨æˆ·æ¨¡å¼-ç”¨æˆ·æ€-ï¼Œå†…æ ¸æ¨¡å¼-å†…æ ¸æ€-ï¼Œå†…æ ¸å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·ç¨‹åºå’Œç”¨æˆ·æ€æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ"><a href="#2-ç”¨è‡ªå·±çš„è¯­è¨€æè¿°ä¸€ä¸‹å†…æ ¸åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ç†è§£ç”¨æˆ·æ¨¡å¼-ç”¨æˆ·æ€-ï¼Œå†…æ ¸æ¨¡å¼-å†…æ ¸æ€-ï¼Œå†…æ ¸å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·ç¨‹åºå’Œç”¨æˆ·æ€æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ" class="headerlink" title="2.ç”¨è‡ªå·±çš„è¯­è¨€æè¿°ä¸€ä¸‹å†…æ ¸åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ç†è§£ç”¨æˆ·æ¨¡å¼(ç”¨æˆ·æ€)ï¼Œå†…æ ¸æ¨¡å¼(å†…æ ¸æ€)ï¼Œå†…æ ¸å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·ç¨‹åºå’Œç”¨æˆ·æ€æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ"></a>2.ç”¨è‡ªå·±çš„è¯­è¨€æè¿°ä¸€ä¸‹å†…æ ¸åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ç†è§£ç”¨æˆ·æ¨¡å¼(ç”¨æˆ·æ€)ï¼Œå†…æ ¸æ¨¡å¼(å†…æ ¸æ€)ï¼Œå†…æ ¸å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·ç¨‹åºå’Œç”¨æˆ·æ€æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ</h3><p>ç­”ï¼šæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼ˆkernelï¼‰æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒè´Ÿè´£ç®¡ç†ç³»ç»Ÿçš„å„ç§èµ„æºå’ŒåŠŸèƒ½ï¼Œå¦‚è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿã€è®¾å¤‡ç®¡ç†ç­‰ã€‚å†…æ ¸æŒæ¡ç³»ç»Ÿå¯¹ç¡¬ä»¶çš„è®¿é—®æƒé™ï¼Œæä¾›åº”ç”¨ç¨‹åºè®¿é—®ç³»ç»Ÿèµ„æºçš„æ¥å£ï¼ŒåŒæ—¶ä¿è¯ç³»ç»Ÿçš„å¯é ç¨³å®šè¿è¡Œã€‚</p><p>ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼æ˜¯CPUçš„æ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿç§°ä¸ºç”¨æˆ·æ€å’Œå†…æ ¸æ€ã€‚åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œåº”ç”¨ç¨‹åºåªèƒ½è®¿é—®è‡ªå·±çš„åœ°å€ç©ºé—´å’Œç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œä¸èƒ½ç›´æ¥æ“ä½œç¡¬ä»¶èµ„æºã€‚åœ¨å†…æ ¸æ¨¡å¼ä¸‹ï¼Œæ“ä½œç³»ç»Ÿæ‹¥æœ‰å¯¹æ‰€æœ‰ç¡¬ä»¶èµ„æºçš„ç›´æ¥æ§åˆ¶æƒï¼Œå¯ä»¥æ‰§è¡Œä»»ä½•è¿ç®—å’Œæ“ä½œï¼Œä½†åº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥è®¿é—®å†…æ ¸ä»£ç ã€‚</p><p>ç”¨æˆ·ç¨‹åºå’Œç”¨æˆ·æ€æŒ‡çš„æ˜¯ä¸€ç§è¿è¡ŒçŠ¶æ€ï¼Œå³åº”ç”¨ç¨‹åºçš„è¿è¡Œç¯å¢ƒã€‚åœ¨ç”¨æˆ·æ€ä¸‹ï¼Œåº”ç”¨ç¨‹åºåªèƒ½è®¿é—®è‡ªå·±çš„åœ°å€ç©ºé—´å’Œç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œæ— æƒç›´æ¥æ“ä½œç¡¬ä»¶èµ„æºã€‚åœ¨å†…æ ¸æ€ä¸‹ï¼Œæ“ä½œç³»ç»ŸæŒæ¡å¯¹æ‰€æœ‰ç¡¬ä»¶èµ„æºçš„ç›´æ¥è®¿é—®æƒé™ï¼Œåº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥è®¿é—®å†…æ ¸ä»£ç ã€‚</p><p>å†…æ ¸ï¼ŒæŒ‡çš„æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå³è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­æ§åˆ¶è®¡ç®—æœºç¡¬ä»¶å’Œè½¯ä»¶èµ„æºçš„æ ¸å¿ƒç¨‹åºã€‚æ“ä½œç³»ç»Ÿçš„å†…æ ¸æä¾›ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨APIï¼ˆApplication Programming Interfaceï¼‰ï¼Œå…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨æ“ä½œç³»ç»Ÿçš„æœåŠ¡å’Œèµ„æºã€‚</p><p>ç”¨æˆ·ç¨‹åºå’Œå†…æ ¸ç¨‹åºä¹‹é—´çš„åŒºåˆ«å’Œè”ç³»ï¼šç”¨æˆ·ç¨‹åºåªèƒ½åœ¨ç”¨æˆ·æ€ä¸­è¿è¡Œï¼Œä¸èƒ½ç›´æ¥è®¿é—®å†…æ ¸çš„èµ„æºï¼Œå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚å†…æ ¸æ¥å®Œæˆç‰¹å®šçš„æ“ä½œã€‚å†…æ ¸ç¨‹åºåœ¨å†…æ ¸æ€ä¸­è¿è¡Œï¼Œèƒ½å¤Ÿè®¿é—®æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨è®¿é—®å†…æ ¸ä¸­çš„ç¨‹åºä»£ç ï¼Œè€Œç³»ç»Ÿè°ƒç”¨åˆ™æ˜¯ä¸€ä¸ªä¸­æ–­æœºåˆ¶ï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿèƒ½å¤Ÿä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œå®Œæˆæ‰€éœ€çš„æ“ä½œï¼Œç„¶åå†è¿”å›åˆ°ç”¨æˆ·æ€ã€‚</p><h3 id="3-è§£é‡Šâ€œç³»ç»Ÿè°ƒç”¨â€ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ä½•è°ƒç”¨"><a href="#3-è§£é‡Šâ€œç³»ç»Ÿè°ƒç”¨â€ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ä½•è°ƒç”¨" class="headerlink" title="3.è§£é‡Šâ€œç³»ç»Ÿè°ƒç”¨â€ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ä½•è°ƒç”¨"></a>3.è§£é‡Šâ€œç³»ç»Ÿè°ƒç”¨â€ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ä½•è°ƒç”¨</h3><p>ç­”ï¼šç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ç»„APIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰ï¼Œå®ƒæ˜¯è®©åº”ç”¨ç¨‹åºå¯ä»¥è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡å’Œèµ„æºçš„ä¸€ç§æ–¹å¼ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸è´Ÿè´£ç®¡ç†ç³»ç»Ÿçš„å„ç§èµ„æºå’ŒåŠŸèƒ½ï¼Œå¦‚è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿã€è®¾å¤‡ç®¡ç†ç­‰ï¼Œè€Œåº”ç”¨ç¨‹åºéœ€è¦è¿™äº›æœåŠ¡å’Œèµ„æºæ‰èƒ½å®Œæˆè‡ªå·±çš„ä»»åŠ¡ã€‚</p><p>ä¸ºä»€ä¹ˆè¦æœ‰ç³»ç»Ÿè°ƒç”¨å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæ“ä½œç³»ç»Ÿå†…æ ¸ä¸€èˆ¬è¿è¡Œåœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œå¯ä»¥è®¿é—®ç³»ç»Ÿç¡¬ä»¶èµ„æºï¼Œè€Œç”¨æˆ·ç¨‹åºä¸€èˆ¬è¿è¡Œåœ¨éç‰¹æƒæ¨¡å¼ä¸‹ï¼Œä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºï¼Œå¿…é¡»é€šè¿‡æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›çš„APIæ¥å£æ¥å®ç°å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®å’Œæ“ä½œã€‚ä¸ºäº†ä¿è¯æ“ä½œç³»ç»Ÿçš„å®‰å…¨å’Œç¨³å®šï¼Œç³»ç»Ÿè°ƒç”¨æä¾›äº†ä¸€ç§å®‰å…¨è€Œå¯æ§åˆ¶çš„æ–¹å¼ï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥è®¿é—®ç³»ç»Ÿèµ„æºï¼ŒåŒæ—¶åˆä¸ä¼šä¸­æ–­æ“ä½œç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚</p><p>æ“ä½œç³»ç»Ÿæä¾›çš„ç³»ç»Ÿè°ƒç”¨åŒ…æ‹¬è¯»å†™æ–‡ä»¶ã€åˆ›å»ºå’Œé”€æ¯è¿›ç¨‹ã€è®¾ç½®å®šæ—¶å™¨ã€ç½‘ç»œé€šä¿¡ç­‰åŠŸèƒ½ã€‚è°ƒç”¨ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œåº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨å·ç æ¥å”¤é†’æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œè®©å†…æ ¸æ¥æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ã€‚</p><p>åœ¨å„ä¸ªæ“ä½œç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿè°ƒç”¨çš„å…·ä½“å®ç°æ–¹æ³•æœ‰æ‰€ä¸åŒã€‚ä»¥Linuxä¸ºä¾‹ï¼Œå¸¸ç”¨çš„ç³»ç»Ÿè°ƒç”¨æœ‰openã€readã€writeã€closeç­‰ï¼Œè¿™äº›ç³»ç»Ÿè°ƒç”¨å®é™…æ˜¯é€šè¿‡ä¸­æ–­æœºåˆ¶æ¥è°ƒç”¨ã€‚å½“åº”ç”¨ç¨‹åºæ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¼šé€šè¿‡è½¯ä»¶ä¸­æ–­INT 80Hçš„æ–¹å¼è¿›å…¥å†…æ ¸æ€ï¼Œä»è€Œå‘æ“ä½œç³»ç»Ÿç”³è¯·ç›¸åº”çš„æœåŠ¡ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸å¤„ç†å®Œè¯·æ±‚åï¼Œå†è¿”å›åº”ç”¨ç¨‹åºï¼Œå¹¶æŠŠè¯·æ±‚ç»“æœä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æ—¶è¦å°å¿ƒä¸è¦æ»¥ç”¨ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿçš„å†…æ ¸æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç‰¹æƒæ¨¡å¼ä¸‹çš„æ ¸å¿ƒç¨‹åºï¼Œè®¿é—®å®ƒçš„ä»£ä»·æ¯”è¾ƒé«˜æ˜‚ã€‚å¦‚æœåº”ç”¨ç¨‹åºè¿‡äºé¢‘ç¹åœ°ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œèµ„æºæµªè´¹ï¼Œä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½ã€‚</p><h3 id="4-è§£é‡Šâ€œä¸­æ–­æœºåˆ¶â€ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸­æ–­ï¼Ÿä¸­æ–­ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿå‘ç”Ÿçš„åŸå› ï¼Ÿä¸­æ–­å‘ç”Ÿåæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ"><a href="#4-è§£é‡Šâ€œä¸­æ–­æœºåˆ¶â€ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸­æ–­ï¼Ÿä¸­æ–­ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿå‘ç”Ÿçš„åŸå› ï¼Ÿä¸­æ–­å‘ç”Ÿåæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ" class="headerlink" title="4.è§£é‡Šâ€œä¸­æ–­æœºåˆ¶â€ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸­æ–­ï¼Ÿä¸­æ–­ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿå‘ç”Ÿçš„åŸå› ï¼Ÿä¸­æ–­å‘ç”Ÿåæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ"></a>4.è§£é‡Šâ€œä¸­æ–­æœºåˆ¶â€ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸­æ–­ï¼Ÿä¸­æ–­ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿå‘ç”Ÿçš„åŸå› ï¼Ÿä¸­æ–­å‘ç”Ÿåæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ</h3><p>ç­”ï¼šä¸­æ–­æœºåˆ¶æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæœºåˆ¶ä¹‹ä¸€ï¼Œå®ƒæ˜¯å®ç°æ“ä½œç³»ç»Ÿä¸å¤–éƒ¨è®¾å¤‡äº¤äº’çš„é‡è¦æ–¹å¼ã€‚ä¸­æ–­æ˜¯æŒ‡å¤–éƒ¨è®¾å¤‡å‘CPUå‘å‡ºçš„ä¸€ç§ä¿¡å·ï¼Œé€šçŸ¥å…¶éœ€è¦è¿›è¡Œå“åº”å¤„ç†ã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œä¸­æ–­å¯ä»¥åˆ†ä¸ºç¡¬ä»¶ä¸­æ–­å’Œè½¯ä»¶ä¸­æ–­ä¸¤ç§ç±»å‹ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸­æ–­ï¼Ÿä¸­æ–­æœºåˆ¶æ˜¯ä¸€ç§å¼‚æ­¥æœºåˆ¶ï¼Œå¯ä»¥è®©CPUåœ¨æ­£å¸¸è¿è¡Œä»£ç çš„åŒæ—¶ï¼Œå¯¹å¤–éƒ¨äº‹ä»¶åšå‡ºåŠæ—¶çš„å“åº”ã€‚ä½¿ç”¨ä¸­æ–­å¯ä»¥æé«˜è®¾å¤‡çš„åˆ©ç”¨ç‡ï¼Œé™ä½CPUçš„è´Ÿè½½ï¼Œä½¿è®¡ç®—æœºç³»ç»Ÿèƒ½å¤Ÿæ›´åŠ é«˜æ•ˆåœ°è¿è¡Œã€‚</p><p>ä¸­æ–­ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿå‘ç”Ÿçš„åŸå› ï¼Ÿä¸­æ–­ä¸€èˆ¬ç”±ç¡¬ä»¶è®¾å¤‡å‘å‡ºï¼Œé€šçŸ¥CPUéœ€è¦æ‰§è¡Œç›¸åº”çš„æœåŠ¡ç¨‹åºã€‚æ¯”å¦‚å½“ä¸€ä¸ªæŒ‰é”®æŒ‰ä¸‹æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªä¸­æ–­ä¿¡å·ï¼Œé€šçŸ¥CPUéœ€è¦æ‰§è¡Œé”®ç›˜ä¸­æ–­å¤„ç†ç¨‹åºæ¥å“åº”è¯¥äº‹ä»¶ã€‚</p><p>ä¸­æ–­å‘ç”Ÿåï¼ŒCPUä¼šæŠŠå½“å‰çš„æ‰§è¡ŒçŠ¶æ€ä¿å­˜ï¼ˆå³ä¿å­˜ç›¸å…³çš„å¯„å­˜å™¨å†…å®¹å’Œä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ç­‰ä¿¡æ¯ï¼‰ï¼Œå¹¶åˆ‡æ¢åˆ°ä¸­æ–­å¤„ç†ç¨‹åºè¿›è¡Œå¤„ç†ã€‚å¤„ç†ç¨‹åºå¾€å¾€æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œç”¨äºæ‰§è¡Œè®¾å¤‡é©±åŠ¨ç¨‹åºã€å¤„ç†è®¾å¤‡æ•°æ®ã€æ›´æ–°å†…æ ¸æ•°æ®ç»“æ„ç­‰ä»»åŠ¡ã€‚åœ¨å¤„ç†ç¨‹åºæ‰§è¡Œå®Œæˆåï¼ŒCPUä¼šæ¢å¤ä¸­æ–­ä¹‹å‰çš„æ‰§è¡ŒçŠ¶æ€ï¼Œç»§ç»­æ‰§è¡Œè¢«ä¸­æ–­çš„ç¨‹åºã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸­æ–­æœºåˆ¶æ˜¯æ“ä½œç³»ç»Ÿå¯¹å¤–éƒ¨äº‹ä»¶çš„å“åº”æ–¹å¼ï¼Œå¿…é¡»å¯¹ä¸­æ–­è¿›è¡Œé€‚å½“çš„ç®¡ç†å’Œè°ƒåº¦ï¼Œé¿å…å› è¿‡å¤šçš„ä¸­æ–­è¯·æ±‚å¯¼è‡´ç³»ç»Ÿèµ„æºçš„æµªè´¹å’Œä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ä¸ºäº†å®ç°åˆç†çš„ä¸­æ–­ç®¡ç†ï¼Œæ“ä½œç³»ç»Ÿä¼šé’ˆå¯¹ä¸åŒçš„ä¸­æ–­æºï¼Œè®¾ç½®ä¸åŒçš„ä¼˜å…ˆçº§å’Œå“åº”ç­–ç•¥ï¼Œä»¥ä¿è¯ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚</p><h3 id="5-è®²è§£â€œæ€»çº¿â€"><a href="#5-è®²è§£â€œæ€»çº¿â€" class="headerlink" title="5.è®²è§£â€œæ€»çº¿â€"></a>5.è®²è§£â€œæ€»çº¿â€</h3><p>ç­”ï¼šæ€»çº¿ï¼ˆBusï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨è®¡ç®—æœºå†…éƒ¨å„ä¸ªç»„ä»¶ä¹‹é—´ä¼ è¾“æ•°æ®çš„é€šä¿¡çº¿è·¯ã€‚å®ƒæ˜¯è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­çš„åŸºç¡€ï¼Œç”¨äºå°†å„ç§è®¾å¤‡ã€ç»„ä»¶å’Œå­ç³»ç»Ÿè¿æ¥èµ·æ¥ï¼Œå®ç°å®ƒä»¬ä¹‹é—´çš„å¯é é€šä¿¡å’ŒååŒå·¥ä½œã€‚</p><p>æ€»çº¿é€šå¸¸åˆ†ä¸ºåœ°å€æ€»çº¿ã€æ•°æ®æ€»çº¿å’Œæ§åˆ¶æ€»çº¿ä¸‰éƒ¨åˆ†ã€‚å…¶ä¸­ï¼Œåœ°å€æ€»çº¿ç”¨äºä¼ è¾“è®¾å¤‡æˆ–è€…å­˜å‚¨å™¨çš„åœ°å€ä¿¡æ¯ï¼Œæ§åˆ¶æ€»çº¿ç”¨äºä¼ è¾“æ§åˆ¶ä¿¡å·ï¼Œä¾‹å¦‚è¯»å†™æ§åˆ¶ä¿¡å·ã€ä¸­æ–­è¯·æ±‚ä¿¡å·ç­‰ã€‚è€Œæ•°æ®æ€»çº¿åˆ™ç”¨äºä¼ è¾“æ•°æ®å’ŒæŒ‡ä»¤ä¿¡æ¯ï¼Œä»è€Œå®ç°å¯¹å†…å­˜ã€å¤–è®¾çš„è¯»å†™ç­‰æ“ä½œã€‚</p><p>è®¡ç®—æœºä¸­çš„æ€»çº¿ä¸»è¦åŒ…æ‹¬ç³»ç»Ÿæ€»çº¿ã€å†…å­˜æ€»çº¿å’ŒI&#x2F;Oæ€»çº¿ç­‰ã€‚ç³»ç»Ÿæ€»çº¿è¿æ¥CPUã€å†…å­˜å’ŒI&#x2F;Oæ€»çº¿ï¼Œèµ·æ§åˆ¶ä½œç”¨ã€‚å†…å­˜æ€»çº¿è¿æ¥CPUå’Œå†…å­˜å­˜å‚¨å™¨ï¼Œç”¨äºä¼ è¾“æ•°æ®å’Œåœ°å€ä¿¡æ¯ã€‚I&#x2F;Oæ€»çº¿è¿æ¥CPUå’Œè¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œå®ç°CPUä¸å¤–éƒ¨è®¾å¤‡çš„äº¤æ¢ã€‚</p><p>æ€»çº¿çš„æ€§èƒ½ä¼˜åŒ–ä¹Ÿæ˜¯è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­çš„é‡è¦é—®é¢˜ä¹‹ä¸€ã€‚é€šè¿‡æé«˜æ€»çº¿çš„å¸¦å®½ã€ä¿¡å·é€Ÿåº¦ã€æ•°æ®ä¼ è¾“æ•ˆç‡ç­‰æ–¹é¢çš„ä¼˜åŒ–ï¼Œå¯ä»¥å‡å°‘æ€»çº¿çš„é€šä¿¡æ—¶é—´ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚æ­¤å¤–ï¼Œç°ä»£è®¡ç®—æœºä¸­ä¹Ÿå­˜åœ¨è®¸å¤šé«˜é€Ÿç¼“å­˜å’ŒçŸ©é˜µè¿ç®—å•å…ƒè¿™æ ·çš„åŠ é€Ÿå™¨ï¼Œå®ƒä»¬å’Œä¼ ç»Ÿçš„CPUã€å†…å­˜ä¹‹é—´çš„æ•°æ®é€šä¿¡é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡æ€»çº¿çš„è®¾è®¡å’Œä¼˜åŒ–æ¥è§£å†³ã€‚</p><h3 id="6-é˜…è¯»æ‰©å±•èµ„æ–™ï¼ˆè‘—åçš„äº‰è®ºï¼‰ï¼Œè¯´ä¸€ä¸‹ä½ ç†è§£çš„å¾®å†…æ ¸ï¼ˆæ¯”å¦‚é¸¿è’™ç³»ç»Ÿï¼‰"><a href="#6-é˜…è¯»æ‰©å±•èµ„æ–™ï¼ˆè‘—åçš„äº‰è®ºï¼‰ï¼Œè¯´ä¸€ä¸‹ä½ ç†è§£çš„å¾®å†…æ ¸ï¼ˆæ¯”å¦‚é¸¿è’™ç³»ç»Ÿï¼‰" class="headerlink" title="6.é˜…è¯»æ‰©å±•èµ„æ–™ï¼ˆè‘—åçš„äº‰è®ºï¼‰ï¼Œè¯´ä¸€ä¸‹ä½ ç†è§£çš„å¾®å†…æ ¸ï¼ˆæ¯”å¦‚é¸¿è’™ç³»ç»Ÿï¼‰"></a>6.é˜…è¯»æ‰©å±•èµ„æ–™ï¼ˆè‘—åçš„äº‰è®ºï¼‰ï¼Œè¯´ä¸€ä¸‹ä½ ç†è§£çš„å¾®å†…æ ¸ï¼ˆæ¯”å¦‚é¸¿è’™ç³»ç»Ÿï¼‰</h3><p>ç­”ï¼šå¾®å†…æ ¸æ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿå†…æ ¸çš„è®¾è®¡æ–¹å¼ï¼Œå®ƒå°†å†…æ ¸çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†å’ŒIPCç­‰ï¼‰ä¸è®¾å¤‡é©±åŠ¨å’Œå…¶ä»–æ“ä½œç³»ç»ŸæœåŠ¡åˆ†ç¦»å¼€æ¥ï¼Œä»¥å½¢æˆä¸€ä¸ªæ›´åŠ çµæ´»å’Œå¯æ‰©å±•çš„ç³»ç»Ÿæ¶æ„ã€‚ä¸ä¼ ç»Ÿçš„å†…æ ¸è®¾è®¡æ–¹å¼ç›¸æ¯”ï¼Œå¾®å†…æ ¸é€šå¸¸æ›´æ˜“äºç»´æŠ¤ã€å‡çº§å’Œæ‰©å±•ï¼Œå› ä¸ºå†…æ ¸çš„å¤§å°æ›´åŠ ç´§å‡‘ï¼Œå†…æ ¸æ ¸å¿ƒåŠŸèƒ½çš„ä¿®æ”¹ä¹Ÿæ›´åŠ å®¹æ˜“ã€‚</p><p>é¸¿è’™OSæ˜¯ä¸€æ¬¾åŸºäºå¾®å†…æ ¸è®¾è®¡çš„æ“ä½œç³»ç»Ÿï¼Œå®ƒé‡‡ç”¨äº†åä¸ºâ€Hongmengâ€çš„å¾®å†…æ ¸ï¼Œè¿™ä¸ªå†…æ ¸å ç”¨å†…å­˜æ›´å°‘ï¼Œå¯åŠ¨é€Ÿåº¦æ›´å¿«ï¼Œèƒ½å¤Ÿæ”¯æŒæ›´åŠ å¹¿æ³›çš„è®¾å¤‡å’Œåœºæ™¯ã€‚é¸¿è’™çš„å¾®å†…æ ¸åªæä¾›äº†æœ€åŸºæœ¬çš„ç³»ç»ŸåŠŸèƒ½ï¼Œè€Œå…¶ä»–æœåŠ¡éƒ½æ˜¯åœ¨ç”¨æˆ·ç©ºé—´æˆ–è€…è™šæ‹Ÿç©ºé—´ä¸­è¿è¡Œçš„ï¼Œé€šè¿‡è¿›ç¨‹é—´é€šä¿¡å®ç°æœåŠ¡çš„äº¤äº’ã€‚</p><p>å¾®å†…æ ¸è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºå…¶å†…æ ¸ç´§å‡‘ï¼Œæ‰©å±•æ€§å’Œçµæ´»æ€§æ›´å¥½ï¼Œè€Œä¸”ç”±äºä»£ç çš„æ¨¡å—åŒ–ï¼Œå¯¹ä¸­é—´ä»¶å’Œåº”ç”¨å¼€å‘çš„æ”¯æŒæ›´å¥½ï¼Œå¯ä»¥æé«˜ç”Ÿæ€å’Œç”¨æˆ·ä½“éªŒã€‚ä½†æ˜¯ï¼Œå¾®å†…æ ¸çš„ç¼ºç‚¹ä¹Ÿæ˜¯æ˜æ˜¾çš„ï¼Œå› ä¸ºå…¶è¿›ç¨‹é—´é€šä¿¡ä¼šä½¿å¾—ç³»ç»Ÿè°ƒç”¨ç›¸å¯¹å¤æ‚ï¼Œå¢åŠ å¼€å‘äººå‘˜çš„éš¾åº¦ã€‚åŒæ—¶ï¼Œæ›´å¤šçš„æœåŠ¡éœ€è¦åœ¨ç”¨æˆ·æ€è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œå¾®å†…æ ¸æ¶æ„çš„æ“ä½œç³»ç»Ÿç›¸å¯¹äºä¼ ç»Ÿå†…æ ¸è®¾è®¡æ–¹å¼æ›´åŠ çµæ´»ï¼Œæ›´æ˜“äºæ‰©å±•å’Œç»´æŠ¤ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œéœ€è¦æƒè¡¡è€ƒè™‘å…·ä½“åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚</p><h3 id="7-ç”¨æˆ·æ€å‘å†…æ ¸æ€è½¬æœ‰å¤šç§æƒ…å½¢ï¼ˆç”¨æˆ·è¯·æ±‚OSæä¾›æœåŠ¡ã€å‘ç”Ÿä¸­æ–­ã€ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿé”™è¯¯ã€ç”¨æˆ·æ€ä¼å›¾æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼‰ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æƒ…å½¢ï¼Œå³é€šè¿‡ä¸­æ–­çš„å½¢å¼è¿›å…¥ã€‚å¦‚ä½•ç†è§£è¿™å¥è¯ï¼Ÿ"><a href="#7-ç”¨æˆ·æ€å‘å†…æ ¸æ€è½¬æœ‰å¤šç§æƒ…å½¢ï¼ˆç”¨æˆ·è¯·æ±‚OSæä¾›æœåŠ¡ã€å‘ç”Ÿä¸­æ–­ã€ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿé”™è¯¯ã€ç”¨æˆ·æ€ä¼å›¾æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼‰ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æƒ…å½¢ï¼Œå³é€šè¿‡ä¸­æ–­çš„å½¢å¼è¿›å…¥ã€‚å¦‚ä½•ç†è§£è¿™å¥è¯ï¼Ÿ" class="headerlink" title="7.ç”¨æˆ·æ€å‘å†…æ ¸æ€è½¬æœ‰å¤šç§æƒ…å½¢ï¼ˆç”¨æˆ·è¯·æ±‚OSæä¾›æœåŠ¡ã€å‘ç”Ÿä¸­æ–­ã€ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿé”™è¯¯ã€ç”¨æˆ·æ€ä¼å›¾æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼‰ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æƒ…å½¢ï¼Œå³é€šè¿‡ä¸­æ–­çš„å½¢å¼è¿›å…¥ã€‚å¦‚ä½•ç†è§£è¿™å¥è¯ï¼Ÿ"></a>7.ç”¨æˆ·æ€å‘å†…æ ¸æ€è½¬æœ‰å¤šç§æƒ…å½¢ï¼ˆç”¨æˆ·è¯·æ±‚OSæä¾›æœåŠ¡ã€å‘ç”Ÿä¸­æ–­ã€ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿé”™è¯¯ã€ç”¨æˆ·æ€ä¼å›¾æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼‰ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æƒ…å½¢ï¼Œå³é€šè¿‡ä¸­æ–­çš„å½¢å¼è¿›å…¥ã€‚å¦‚ä½•ç†è§£è¿™å¥è¯ï¼Ÿ</h3><p>ç­”ï¼šè¿™å¥è¯è¡¨è¾¾çš„æ˜¯åœ¨è®¡ç®—æœºä¸­ï¼Œæ— è®ºæ˜¯ç”¨æˆ·è¯·æ±‚æ“ä½œç³»ç»Ÿæä¾›æœåŠ¡ã€å‘ç”Ÿä¸­æ–­ã€ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿé”™è¯¯ã€è¿˜æ˜¯ç”¨æˆ·æ€å°è¯•æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼Œä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„è½¬å˜æœ¬è´¨ä¸Šéƒ½æ˜¯é€šè¿‡ä¸­æ–­çš„å½¢å¼å®ç°çš„ã€‚</p><p>å½“ç”¨æˆ·æ€éœ€è¦å‘å†…æ ¸æ€å‘å‡ºè¯·æ±‚æ—¶ï¼Œå¦‚è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ã€è¯·æ±‚èµ„æºç­‰ï¼Œç”¨æˆ·ç¨‹åºéœ€è¦å°†è¯·æ±‚å‚æ•°ä¼ é€’ç»™æ“ä½œç³»ç»Ÿï¼Œç„¶åé€šè¿‡è½¯ä¸­æ–­çš„æ–¹å¼å‘èµ·ä¸­æ–­è¯·æ±‚ï¼Œä»è€Œé™·å…¥å†…æ ¸æ€ã€‚åœ¨å‘ç”Ÿç¡¬ä»¶ä¸­æ–­æ—¶ï¼Œä¸­æ–­æ§åˆ¶å™¨ä¼šå°†ä¸­æ–­è¯·æ±‚å‘é€ç»™CPUï¼Œåœ¨CPUå®Œæˆå½“å‰æŒ‡ä»¤ä¹‹åç«‹å³åœæ­¢æ‰§è¡Œï¼Œè½¬è€Œå»æ‰§è¡Œä¸ä¸­æ–­ç›¸å…³çš„ä¸­æ–­å¤„ç†ç¨‹åºï¼Œå¤„ç†å®Œä¹‹åå†ç»§ç»­æ‰§è¡Œä¹‹å‰è¢«æ‰“æ–­çš„æŒ‡ä»¤ã€‚</p><p>åœ¨ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿé”™è¯¯æˆ–ä¼å›¾æ‰§è¡Œç‰¹æƒæŒ‡ä»¤æ—¶ï¼ŒCPUä¼šæ£€æµ‹åˆ°é”™è¯¯å¹¶è§¦å‘ä¸­æ–­ã€‚æ“ä½œç³»ç»Ÿå°†ä¼šé’ˆå¯¹ä¸åŒç±»å‹çš„ä¸­æ–­è¯·æ±‚æ‰§è¡Œä¸åŒçš„å¤„ç†ç¨‹åºï¼Œå¦‚è°ƒç”¨ç›¸åº”çš„è®¾å¤‡é©±åŠ¨ç¨‹åºã€åˆ†é…èµ„æºç­‰ã€‚</p><p>æ— è®ºä¸­æ–­è¯·æ±‚çš„æºå¤´æ˜¯ä»€ä¹ˆï¼Œç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„è½¬å˜éƒ½æ˜¯é€šè¿‡ä¸­æ–­çš„æ–¹å¼å®ç°çš„ã€‚æ“ä½œç³»ç»Ÿéœ€è¦å¯¹ä¸­æ–­è¯·æ±‚åšå‡ºåŠæ—¶ã€æ­£ç¡®çš„å“åº”ä»¥ä¿è¯ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚</p><h3 id="8-å¯¹Intel-CPUçš„è¿è¡Œçº§åˆ«å’Œä¿æŠ¤æ¨¡å¼ï¼Œç‰¹æƒæ¨¡å¼çš„ç†è§£"><a href="#8-å¯¹Intel-CPUçš„è¿è¡Œçº§åˆ«å’Œä¿æŠ¤æ¨¡å¼ï¼Œç‰¹æƒæ¨¡å¼çš„ç†è§£" class="headerlink" title="8.å¯¹Intel CPUçš„è¿è¡Œçº§åˆ«å’Œä¿æŠ¤æ¨¡å¼ï¼Œç‰¹æƒæ¨¡å¼çš„ç†è§£"></a>8.å¯¹Intel CPUçš„è¿è¡Œçº§åˆ«å’Œä¿æŠ¤æ¨¡å¼ï¼Œç‰¹æƒæ¨¡å¼çš„ç†è§£</h3><p>ç­”ï¼šIntel CPUçš„è¿è¡Œçº§åˆ«ä¸€èˆ¬åˆ†ä¸ºå››ç§ï¼Œåˆ†åˆ«æ˜¯Ring 0ã€Ring 1ã€Ring 2å’ŒRing 3ã€‚Ring 0ä¸ºå†…æ ¸æ€ï¼Œä»£è¡¨CPUæœ€é«˜çš„æƒé™çº§åˆ«ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿå†…æ ¸å¯ä»¥è¿è¡Œåœ¨è¿™ä¸ªçº§åˆ«ã€‚Ring 1-3ä»£è¡¨ç”¨æˆ·æ€ï¼Œæƒé™é€æ¸é™ä½ï¼ŒRing 3ä¸ºæœ€ä½æƒé™ï¼Œåªæœ‰ç”¨æˆ·ç¨‹åºèƒ½å¤Ÿè¿è¡Œåœ¨è¿™ä¸ªçº§åˆ«ã€‚</p><p>åœ¨Intel CPUä¸­ï¼Œä¿æŠ¤æ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿è¡Œæ¨¡å¼ï¼Œç”¨äºä¿æŠ¤æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºçš„å®‰å…¨å’Œç¨³å®šã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼ŒCPUä½¿ç”¨åˆ†æ®µæœºåˆ¶å¯¹å†…å­˜è¿›è¡Œäº†ä¿æŠ¤ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹åªèƒ½è®¿é—®è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä»è€Œé¿å…äº†è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„ç›¸äº’å¹²æ‰°ã€‚æ­¤å¤–ï¼Œä¿æŠ¤æ¨¡å¼ä¸‹è¿˜æ”¯æŒè™šæ‹Ÿå†…å­˜ã€åˆ†é¡µæœºåˆ¶ã€ç³»ç»Ÿè°ƒç”¨ç­‰å¤šç§ç‰¹æ€§ï¼Œä½¿å¾—ç³»ç»Ÿåœ¨å®‰å…¨æ€§å’Œæ€§èƒ½ä¸Šéƒ½èƒ½å¾—åˆ°æ›´å¥½çš„ä¿éšœã€‚</p><p>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹çš„CPUè¿è¡Œçº§åˆ«è¢«ç§°ä¸ºç‰¹æƒçº§åˆ«ï¼Œå¯åˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼Œåˆ†åˆ«æ˜¯Ring 0-3ï¼Œçº§åˆ«è¶Šä½çš„ç¨‹åºæ‹¥æœ‰è¶Šå°‘çš„æƒé™ï¼Œä¸èƒ½ç›´æ¥è®¿é—®CPUã€å†…å­˜ç­‰ç³»ç»Ÿèµ„æºï¼Œåªèƒ½é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„APIè°ƒç”¨æ¥è®¿é—®ã€‚Ring 0çº§åˆ«æ˜¯æœ€é«˜ç‰¹æƒçº§åˆ«ï¼Œä»£è¡¨å†…æ ¸æ€ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿå†…æ ¸æ‰èƒ½è¿è¡Œåœ¨è¿™ä¸ªçº§åˆ«ã€‚Ring 3çº§åˆ«ä¸ºæœ€ä½ç‰¹æƒçº§åˆ«ï¼Œä»£è¡¨ç”¨æˆ·æ€ã€‚æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºéƒ½è¿è¡Œåœ¨Ring 3ä»¥åŠä»¥ä¸Šçš„ç‰¹æƒçº§åˆ«ï¼Œè€Œç”¨æˆ·ç¨‹åºä¸èƒ½è¿›å…¥åˆ°Ring 0çš„ç‰¹æƒçº§åˆ«ä¸­ã€‚</p><p>æ€»ä¹‹ï¼ŒIntel CPUçš„è¿è¡Œçº§åˆ«å’Œä¿æŠ¤æ¨¡å¼å®ç°äº†åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­çš„å¤šå±‚æ¬¡å®‰å…¨ä¿æŠ¤ï¼Œä¿æŠ¤è®¡ç®—æœºçš„å¨èƒå’Œæœºå¯†ä¿¡æ¯ä¸è¢«éæˆæƒç”¨æˆ·è®¿é—®å’Œä¿®æ”¹ã€‚</p><hr><h2 id="ä¸‰-è¿›ç¨‹æ¦‚å¿µå’Œè¿›ç¨‹åŸºæœ¬çŠ¶æ€ï¼ŒPCB"><a href="#ä¸‰-è¿›ç¨‹æ¦‚å¿µå’Œè¿›ç¨‹åŸºæœ¬çŠ¶æ€ï¼ŒPCB" class="headerlink" title="ä¸‰.è¿›ç¨‹æ¦‚å¿µå’Œè¿›ç¨‹åŸºæœ¬çŠ¶æ€ï¼ŒPCB"></a>ä¸‰.è¿›ç¨‹æ¦‚å¿µå’Œè¿›ç¨‹åŸºæœ¬çŠ¶æ€ï¼ŒPCB</h2><h3 id="1-ç¨‹åºçš„é¡ºåºæ‰§è¡Œæœ‰ä½•ç‰¹å¾ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™äº›ç‰¹å¾ï¼Ÿ"><a href="#1-ç¨‹åºçš„é¡ºåºæ‰§è¡Œæœ‰ä½•ç‰¹å¾ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™äº›ç‰¹å¾ï¼Ÿ" class="headerlink" title="1.ç¨‹åºçš„é¡ºåºæ‰§è¡Œæœ‰ä½•ç‰¹å¾ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™äº›ç‰¹å¾ï¼Ÿ"></a>1.ç¨‹åºçš„é¡ºåºæ‰§è¡Œæœ‰ä½•ç‰¹å¾ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™äº›ç‰¹å¾ï¼Ÿ</h3><p>ç­”ï¼šç¨‹åºçš„é¡ºåºæ‰§è¡Œä¸»è¦è¡¨ç°ä¸ºç¨‹åºæŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§ç¨‹åºä»£ç ç»™å‡ºçš„é¡ºåºæ‰§è¡Œï¼Œä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚è¿™ç§æ‰§è¡Œæ–¹å¼æ˜¯è®¡ç®—æœºç¡¬ä»¶æ ¹æ®æŒ‡ä»¤çš„æŒ‡é’ˆã€è®¡æ•°å™¨ç­‰æ§åˆ¶ä¿¡æ¯ä¾æ¬¡è¯»å–å¹¶æ‰§è¡ŒæŒ‡ä»¤çš„ç»“æœã€‚</p><p>ç¨‹åºçš„é¡ºåºæ‰§è¡Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹å¾ï¼š</p><ol><li><p>ç¨‹åºæŒ‡ä»¤æ˜¯åœ¨ä¸€æ¡æ¥ä¸€æ¡åœ°æ‰§è¡Œã€‚è¿™ç§æ‰§è¡Œæ–¹å¼ä½¿å¾—è®¡ç®—æœºèƒ½å¤ŸæŒ‰ç…§ç¨‹åºä»£ç çš„è§„å®šé¡ºåºæ¥æ‰§è¡Œæ¯ä¸€æ¡æŒ‡ä»¤ï¼Œç¡®ä¿äº†ç¨‹åºçš„æ­£ç¡®æ€§ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†ç¨‹åºçš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p></li><li><p>ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚è¿™ç§é¡ºåºæ‰§è¡Œæ–¹å¼ä½¿å¾—è®¡ç®—æœºèƒ½å¤Ÿæœ‰åºåœ°æ‰§è¡Œç¨‹åºä¸­çš„æŒ‡ä»¤ï¼Œä»è€Œç¡®ä¿æ¯ä¸ªæŒ‡ä»¤çš„æ­£ç¡®æ‰§è¡Œå’Œæ­£ç¡®å¤„ç†æ•°æ®ã€‚</p></li></ol><p>è¿™äº›ç‰¹å¾çš„å­˜åœ¨æ˜¯å› ä¸ºè®¡ç®—æœºçš„ç¡¬ä»¶ç»“æ„å’ŒæŒ‡ä»¤çš„æ‰§è¡ŒåŸç†ã€‚åœ¨è®¡ç®—æœºçš„ç¡¬ä»¶ç»“æ„ä¸­ï¼ŒCPUè´Ÿè´£æ‰§è¡ŒæŒ‡ä»¤çš„è¿‡ç¨‹ï¼Œæ¯ä¸ªæŒ‡ä»¤ä¸€èˆ¬éƒ½éœ€è¦å®Œæˆä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¿ç®—ã€ä¼ è¾“ã€è·³è½¬ç­‰æ“ä½œã€‚CPUé€šè¿‡è¯†åˆ«æŒ‡ä»¤ä¸­çš„æ“ä½œç å’Œæ“ä½œæ•°ï¼Œä¾æ¬¡æ‰§è¡Œæ¯ä¸€æ¡æŒ‡ä»¤ä¸­çš„æ“ä½œã€‚</p><p>åŒæ—¶ï¼ŒæŒ‡ä»¤çš„æ‰§è¡Œéœ€è¦æŒ‰ç…§ä¸€å®šçš„é¡ºåºè¿›è¡Œï¼Œä¾‹å¦‚æ§åˆ¶æŒ‡ä»¤éœ€è¦ä¼˜å…ˆæ‰§è¡Œï¼Œæ•°æ®æ“ä½œæŒ‡ä»¤éœ€è¦ç­‰åˆ°æ•°æ®å‡†å¤‡å¥½åæ‰èƒ½æ‰§è¡Œã€‚å› æ­¤ï¼Œç¨‹åºçš„é¡ºåºæ‰§è¡Œæ˜¯åŸºäºè®¡ç®—æœºç¡¬ä»¶å’ŒæŒ‡ä»¤ç³»ç»Ÿçš„è¿è¡ŒåŸç†ï¼Œä»¥ç¡®ä¿æŒ‡ä»¤èƒ½å¤Ÿæ­£ç¡®åœ°æ‰§è¡Œã€æ•°æ®èƒ½å¤Ÿè¢«æ­£ç¡®å¤„ç†ã€‚</p><h3 id="2-è¿›ç¨‹æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿè¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¼•å…¥è¿›ç¨‹ï¼Ÿ"><a href="#2-è¿›ç¨‹æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿè¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¼•å…¥è¿›ç¨‹ï¼Ÿ" class="headerlink" title="2.è¿›ç¨‹æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿè¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¼•å…¥è¿›ç¨‹ï¼Ÿ"></a>2.è¿›ç¨‹æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿè¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¼•å…¥è¿›ç¨‹ï¼Ÿ</h3><p>ç­”ï¼šè¿›ç¨‹(Process)æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡åœ¨ç”µè„‘ä¸Šæ‰§è¡Œçš„ä¸€æ®µç¨‹åºã€‚è¿›ç¨‹å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š</p><ol><li><p>åŠ¨æ€æ€§ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€çš„æ¦‚å¿µï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬åˆ›å»ºã€è¿è¡Œã€ç­‰å¾…ã€æŒ‚èµ·ã€ç»ˆæ­¢ç­‰å¤šä¸ªçŠ¶æ€ã€‚</p></li><li><p>å¹¶å‘æ€§ï¼šç³»ç»Ÿä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªè¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€å †æ ˆç­‰å†…å­˜ç©ºé—´ï¼Œäº’ç›¸ç‹¬ç«‹ã€‚</p></li><li><p>ç‹¬ç«‹æ€§ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œå±äºä¸åŒçš„è¿›ç¨‹ä¹‹é—´çš„å˜é‡å’Œç¨‹åºä»£ç æ˜¯äº’ä¸å½±å“çš„ã€‚è¿›ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶æ¥å®ç°æ•°æ®å…±äº«å’Œäº¤äº’ã€‚</p></li><li><p>éšæœºæ€§ï¼šç”±äºç³»ç»Ÿä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹çš„æ‰§è¡Œéƒ½å—åˆ°è®¸å¤šå› ç´ çš„å½±å“ï¼Œå› æ­¤è¿›ç¨‹çš„æ‰§è¡Œé¡ºåºå’Œæ—¶é—´éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚</p></li></ol><p>è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«æ˜¯ï¼Œç¨‹åºæ˜¯ä¸€ä¸ªé™æ€çš„æ¦‚å¿µï¼Œæ˜¯æŒ‡ä¸€ç»„æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆï¼Œä¸å…·æœ‰è¿è¡Œå’Œç®¡ç†åŠŸèƒ½ã€‚è€Œè¿›ç¨‹åˆ™æ˜¯å¯¹ç¨‹åºçš„ä¸€ç§è¿è¡ŒçŠ¶æ€æè¿°ï¼Œæ˜¯æŒ‡åœ¨æŸä¸ªç‰¹å®šæ—¶é—´æ®µå†…ï¼Œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºï¼Œå¹¶ä¸”å…·æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€CPUæ—¶é—´ç‰‡ã€ç³»ç»Ÿåˆ†é…çš„CPUèµ„æºç­‰ï¼Œèƒ½å¤Ÿç‹¬ç«‹è¿è¡Œäºç³»ç»Ÿä¸­ã€‚</p><p>å¼•å…¥è¿›ç¨‹ä¸»è¦æ˜¯ä¸ºäº†æ›´åŠ æœ‰æ•ˆçš„åˆ©ç”¨è®¡ç®—æœºèµ„æºï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿è¿›ç¨‹é—´çš„äº’ç›¸é€šä¿¡ä¸äº¤äº’ã€‚é€šè¿‡æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹ç®¡ç†æœºåˆ¶ï¼Œèƒ½å¤Ÿä¿è¯æ¯ä¸ªè¿›ç¨‹å¯ä»¥æœ‰é€‚å½“çš„æ—¶é—´ç‰‡å¹¶å‘åœ°æ‰§è¡Œï¼Œå¹¶å¯ä»¥å¾—åˆ°èµ„æºçš„åˆç†åˆ†é…å’Œè°ƒåº¦ï¼Œä»è€Œå……åˆ†åˆ©ç”¨è®¡ç®—æœºçš„ CPU å’Œå†…å­˜ç­‰èµ„æºï¼Œæé«˜è®¡ç®—æœºçš„å·¥ä½œæ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚</p><h3 id="3-ç¨‹åºä»£ç é•¿åº¦å’Œè¿›ç¨‹å¤§å°æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿè¿›ç¨‹å¤§å°å¦‚ä½•ç¡®å®šï¼Ÿæ˜¯å¦å¯å˜ï¼Ÿ"><a href="#3-ç¨‹åºä»£ç é•¿åº¦å’Œè¿›ç¨‹å¤§å°æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿè¿›ç¨‹å¤§å°å¦‚ä½•ç¡®å®šï¼Ÿæ˜¯å¦å¯å˜ï¼Ÿ" class="headerlink" title="3.ç¨‹åºä»£ç é•¿åº¦å’Œè¿›ç¨‹å¤§å°æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿè¿›ç¨‹å¤§å°å¦‚ä½•ç¡®å®šï¼Ÿæ˜¯å¦å¯å˜ï¼Ÿ"></a>3.ç¨‹åºä»£ç é•¿åº¦å’Œè¿›ç¨‹å¤§å°æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿè¿›ç¨‹å¤§å°å¦‚ä½•ç¡®å®šï¼Ÿæ˜¯å¦å¯å˜ï¼Ÿ</h3><p>ç­”ï¼šç¨‹åºä»£ç é•¿åº¦å’Œè¿›ç¨‹å¤§å°å¹¶ä¸æ˜¯å®Œå…¨ç›¸å…³çš„ï¼Œä¸¤è€…çš„å¤§å°å¹¶ä¸å®Œå…¨ç›¸ç­‰ã€‚è¿›ç¨‹çš„å¤§å°ä¸€èˆ¬åŒ…æ‹¬ç¨‹åºä»£ç ã€æ•°æ®å’Œå†…å­˜å ç”¨ç­‰å¤šæ–¹é¢çš„å› ç´ ï¼Œå¤§å°å¯ä»¥æ ¹æ®éœ€è¦æ¥ç¡®å®šå’Œè°ƒæ•´ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œè¿›ç¨‹çš„å¤§å°ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„å› ç´ å…±åŒå†³å®šï¼š</p><ol><li><p>ç¨‹åºä»£ç çš„é•¿åº¦ï¼šç¨‹åºåŒ…å«æŒ‡ä»¤ã€å‡½æ•°ã€åº“ç­‰ç›¸å…³ä»£ç ï¼Œä»¥åŠæ•°æ®åŒºã€BSSã€å †æ ˆç­‰å ç”¨å†…å­˜çš„ç›¸å…³ä¿¡æ¯ï¼Œç¨‹åºä»£ç çš„é•¿åº¦å¤§å°æ˜¯å½±å“è¿›ç¨‹å¤§å°çš„ä¸€ä¸ªå› ç´ ã€‚</p></li><li><p>æ•°æ®å ç”¨çš„å†…å­˜å¤§å°ï¼šè¿›ç¨‹ä¸­åŒ…å«çš„æ•°æ®ç»“æ„ã€å˜é‡ç­‰éƒ½éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼Œè¯¥å†…å­˜å¤§å°ä¹Ÿæ˜¯å½±å“è¿›ç¨‹å¤§å°çš„ä¸€ä¸ªå› ç´ ã€‚</p></li><li><p>åº“å’ŒåŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼šåœ¨è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå¯èƒ½ä¼šä½¿ç”¨ä¸€äº›ç³»ç»Ÿåº“æˆ–è€…åŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å ç”¨çš„å†…å­˜ç©ºé—´ä¹Ÿä¼šè®¡å…¥è¿›ç¨‹çš„å¤§å°ã€‚</p></li><li><p>è¿è¡Œæ—¶éœ€è¦å ç”¨çš„å †æ ˆå’Œå †å†…å­˜ï¼šè¿›ç¨‹åœ¨è¿è¡Œæ—¶éœ€è¦å ç”¨ä¸€å®šçš„å †æ ˆå’Œå †å†…å­˜ç©ºé—´ï¼Œè¿™äº›ç©ºé—´ä¹Ÿæ˜¯è¿›ç¨‹å¤§å°çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p></li></ol><p>è¿›ç¨‹çš„å¤§å°æ˜¯åŠ¨æ€å¯å˜çš„ï¼Œå› ä¸ºè¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åŠ¨æ€åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ¥è°ƒæ•´è¿›ç¨‹å¤§å°ã€‚è¿›ç¨‹å¯èƒ½ä¼šé‡Šæ”¾å ç”¨çš„å†…å­˜ï¼Œä¹Ÿå¯èƒ½ä¼šç”³è¯·æ–°çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹å¤§å°éšä¹‹ç›¸åº”åœ°å˜åŒ–ã€‚</p><p>æ€»ä¹‹ï¼Œè¿›ç¨‹å¤§å°çš„è®¡ç®—æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå¹¶ä¸”ä¸å…·ä½“çš„åº”ç”¨ç¨‹åºæœ‰å…³ã€‚åœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å®é™…åº”ç”¨æƒ…å†µæ¥ç¡®å®šè¿›ç¨‹å¤§å°ï¼Œå¹¶æ ¹æ®éœ€è¦æ¥åŠ¨æ€è°ƒæ•´è¿›ç¨‹çš„å†…å­˜å¤§å°ï¼Œä»¥å……åˆ†åˆ©ç”¨è®¡ç®—æœºèµ„æºï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</p><h3 id="4-PCBçš„ä½œç”¨ï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»£ç ä¸­ä»€ä¹ˆåœ°æ–¹ä¼šç”¨åˆ°PCBï¼Ÿæ“ä½œç³»ç»Ÿçš„PCBæ˜¯å¦ç›¸åŒï¼ŸPCBçš„å†…å®¹ç”±ä»€ä¹ˆæ¥å†³å®šï¼Ÿ"><a href="#4-PCBçš„ä½œç”¨ï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»£ç ä¸­ä»€ä¹ˆåœ°æ–¹ä¼šç”¨åˆ°PCBï¼Ÿæ“ä½œç³»ç»Ÿçš„PCBæ˜¯å¦ç›¸åŒï¼ŸPCBçš„å†…å®¹ç”±ä»€ä¹ˆæ¥å†³å®šï¼Ÿ" class="headerlink" title="4.PCBçš„ä½œç”¨ï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»£ç ä¸­ä»€ä¹ˆåœ°æ–¹ä¼šç”¨åˆ°PCBï¼Ÿæ“ä½œç³»ç»Ÿçš„PCBæ˜¯å¦ç›¸åŒï¼ŸPCBçš„å†…å®¹ç”±ä»€ä¹ˆæ¥å†³å®šï¼Ÿ"></a>4.PCBçš„ä½œç”¨ï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»£ç ä¸­ä»€ä¹ˆåœ°æ–¹ä¼šç”¨åˆ°PCBï¼Ÿæ“ä½œç³»ç»Ÿçš„PCBæ˜¯å¦ç›¸åŒï¼ŸPCBçš„å†…å®¹ç”±ä»€ä¹ˆæ¥å†³å®šï¼Ÿ</h3><p>ç­”ï¼šPCBï¼ˆProcess Control Blockï¼‰åˆå«è¿›ç¨‹æ§åˆ¶å—ï¼Œæ˜¯æ“ä½œç³»ç»Ÿä¸­ç”¨äºæè¿°å’Œç®¡ç†è¿›ç¨‹çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦ç”¨äºè®°å½•å’Œç»´æŠ¤è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ã€ç¯å¢ƒå’Œèµ„æºç­‰ä¿¡æ¯ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä»£ç ç®¡ç†è¿›ç¨‹çš„åŸºç¡€ç»“æ„ã€‚</p><p>PCBçš„ä¸»è¦ä½œç”¨æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><p>è®°å½•å’Œç®¡ç†è¿›ç¨‹çš„å„ç§çŠ¶æ€ï¼šPCBä¸­è®°å½•äº†è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å°±ç»ªã€è¿è¡Œã€é˜»å¡ç­‰çŠ¶æ€ï¼Œä»¥åŠè¿›ç¨‹çš„è¿è¡Œä¼˜å…ˆçº§ã€èµ„æºå ç”¨ç­‰ä¿¡æ¯ã€‚</p></li><li><p>ç»´æŠ¤è¿›ç¨‹çš„èµ„æºä¿¡æ¯ï¼šåœ¨PCBä¸­è®°å½•äº†è¿›ç¨‹æ‰€å ç”¨çš„ç³»ç»Ÿèµ„æºä¿¡æ¯ï¼ŒåŒ…æ‹¬å†…å­˜ã€æ–‡ä»¶ã€è®¾å¤‡ã€é”ç­‰ç­‰ï¼Œè¿™äº›èµ„æºç”±æ“ä½œç³»ç»Ÿå†…æ ¸åœ¨ç³»ç»Ÿä¸­è¿›è¡Œç®¡ç†ã€‚</p></li><li><p>å®ç°è¿›ç¨‹çš„è°ƒåº¦å’Œåˆ‡æ¢ï¼šç³»ç»Ÿå†…æ ¸å¯æ ¹æ®PCBä¸­è®°å½•çš„è¿›ç¨‹çŠ¶æ€ä¿¡æ¯ï¼Œè¿›è¡Œè¿›ç¨‹çš„åˆ‡æ¢å’Œåˆ†é…ï¼Œä»¥ä¿è¯è¿›ç¨‹é—´çš„è°ƒåº¦å’Œèµ„æºçš„å……åˆ†åˆ©ç”¨ã€‚</p></li><li><p>ä¿æŠ¤å’Œå®‰å…¨æ§åˆ¶ï¼šPCBä¸­è¿˜åŒ…æ‹¬äº†è¿›ç¨‹çš„å®‰å…¨å’Œä¿æŠ¤ç›¸å…³ä¿¡æ¯ï¼Œç¡®ä¿è¿›ç¨‹å¯¹ç³»ç»Ÿèµ„æºå’Œå…¶ä»–è¿›ç¨‹çš„è®¿é—®ä¸ä¼šå‡ºç°å†²çªå’Œä¸å½“çš„æ“ä½œã€‚</p></li></ol><p>æ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»£ç ä¸­ä½¿ç”¨PCBä¸»è¦ç”¨äºè¿›ç¨‹çš„ç®¡ç†å’Œè°ƒåº¦ã€‚åœ¨å†…æ ¸ä»£ç ä¸­ï¼Œä¼šé€šè¿‡è®°å½•å’Œæ“ä½œPCBä¿¡æ¯æ¥æ§åˆ¶è¿›ç¨‹çš„è¿è¡Œï¼ŒåŒ…æ‹¬åˆ›å»ºæ–°çš„è¿›ç¨‹ã€å¯åŠ¨ã€æŒ‚èµ·ã€ç»ˆæ­¢ç­‰æ“ä½œã€‚å½“è¿›ç¨‹åœ¨è¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ ¹æ®PCBä¸­çš„ä¿¡æ¯è¿›è¡Œè°ƒåº¦ï¼ŒæŠŠCPUã€å†…å­˜ç­‰èµ„æºè¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œä»¥ä¿è¯è¿›ç¨‹çš„æ­£å¸¸è¿è¡Œã€‚</p><p>ä¸åŒè¿›ç¨‹çš„PCBæ˜¯ä¸ç›¸åŒçš„ï¼Œæ¯ä¸ªPCBéƒ½è®°å½•äº†è¿›ç¨‹çš„ç‹¬ç«‹ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨æ“ä½œç³»ç»Ÿä¸­ä¸å¯èƒ½å­˜åœ¨ä¸¤ä¸ªPCBå†…å®¹å®Œå…¨ç›¸åŒçš„è¿›ç¨‹ã€‚PCBçš„å†…å®¹ç”±å…·ä½“çš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¿¡æ¯æ¥å†³å®šï¼Œé€šå¸¸PCBåŒ…å«äº†è¿›ç¨‹æ ‡è¯†ã€è¿è¡ŒçŠ¶æ€ã€ä¼˜å…ˆçº§ã€å†…å­˜åˆ†é…ä¿¡æ¯ã€èµ„æºä½¿ç”¨ä¿¡æ¯ç­‰å¤šæ–¹é¢çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯ç”±æ“ä½œç³»ç»ŸåŠå…±ç”¨åº“æ¥å†³å®šå’Œåè°ƒçš„ã€‚å…·ä½“æ¥è¯´ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„PCBå†…å®¹å’Œç»“æ„å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†å®ƒä»¬éƒ½å…·æœ‰ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹çš„åŸºç¡€ç»“æ„ç‰¹å¾ã€‚</p><h3 id="5-è§£é‡Šè¿›ç¨‹3ç§åŸºæœ¬çŠ¶æ€ï¼ˆrunï¼Œreadyï¼Œblockï¼‰çš„è½¬æ¢å“ªäº›å¯ä»¥æœ‰ï¼Œå“ªäº›æ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿé˜»å¡èƒ½ä¸èƒ½ç›´æ¥åˆ°è¿è¡Œï¼Ÿå¦‚æœç³»ç»Ÿé‡Œé¢åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Ÿ"><a href="#5-è§£é‡Šè¿›ç¨‹3ç§åŸºæœ¬çŠ¶æ€ï¼ˆrunï¼Œreadyï¼Œblockï¼‰çš„è½¬æ¢å“ªäº›å¯ä»¥æœ‰ï¼Œå“ªäº›æ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿé˜»å¡èƒ½ä¸èƒ½ç›´æ¥åˆ°è¿è¡Œï¼Ÿå¦‚æœç³»ç»Ÿé‡Œé¢åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Ÿ" class="headerlink" title="5.è§£é‡Šè¿›ç¨‹3ç§åŸºæœ¬çŠ¶æ€ï¼ˆrunï¼Œreadyï¼Œblockï¼‰çš„è½¬æ¢å“ªäº›å¯ä»¥æœ‰ï¼Œå“ªäº›æ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿé˜»å¡èƒ½ä¸èƒ½ç›´æ¥åˆ°è¿è¡Œï¼Ÿå¦‚æœç³»ç»Ÿé‡Œé¢åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Ÿ"></a>5.è§£é‡Šè¿›ç¨‹3ç§åŸºæœ¬çŠ¶æ€ï¼ˆrunï¼Œreadyï¼Œblockï¼‰çš„è½¬æ¢å“ªäº›å¯ä»¥æœ‰ï¼Œå“ªäº›æ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿé˜»å¡èƒ½ä¸èƒ½ç›´æ¥åˆ°è¿è¡Œï¼Ÿå¦‚æœç³»ç»Ÿé‡Œé¢åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Ÿ</h3><p>ç­”ï¼šè¿›ç¨‹é€šå¸¸æœ‰ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼šè¿è¡Œæ€ï¼ˆrunï¼‰ã€å°±ç»ªæ€ï¼ˆreadyï¼‰ã€é˜»å¡æ€ï¼ˆblockï¼‰ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯äº’ç›¸è½¬æ¢çš„ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çŠ¶æ€ä¹‹é—´éƒ½å¯ä»¥ç›´æ¥è½¬æ¢çš„ï¼Œä¸‹é¢åˆ†ç±»åˆ†æï¼š</p><ol><li><p>å¯ä»¥ç”± Ready çŠ¶æ€è½¬æ¢åˆ° Run çŠ¶æ€ï¼Œç”±è¿è¡Œæ€è¿›ç¨‹ç»“æŸæˆ–è¢«é˜»å¡è€Œè½¬åŒ–åˆ° Ready çŠ¶æ€ï¼Œç”±é˜»å¡çŠ¶æ€è¿›ç¨‹ä¸Šçš„äº‹ä»¶å®Œæˆè€Œè½¬åŒ–ä¸º Ready çŠ¶æ€ï¼Œå› ä¸º Ready çŠ¶æ€ä»£è¡¨äº†å¯ä»¥è¿è¡Œçš„çŠ¶æ€ã€‚</p></li><li><p>ä¸å¯ä»¥ç”± Run çŠ¶æ€è½¬åŒ–ä¸º Ready çŠ¶æ€ï¼Œå› ä¸ºä»è¿è¡Œæ€è¿›ç¨‹è½¬åŒ–ä¸ºå°±ç»ªæ€è¿›ç¨‹éœ€è¦è®©å‡º CPUï¼Œè€Œåœ¨æ‰§è¡ŒæœŸé—´çš„è¿›ç¨‹ä¸èƒ½è®©å‡º CPUã€‚</p></li><li><p>ä¸å¯ä»¥ç”± Ready çŠ¶æ€ç›´æ¥å˜ä¸ºé˜»å¡æ€ï¼Œè€Œæ˜¯å¿…é¡»ç»è¿‡ Run çŠ¶æ€ã€‚å½“è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›ç­‰å¾…çš„äº‹ä»¶ï¼ˆå¦‚ç­‰å¾…æ–‡ä»¶è¯»å†™å®Œæˆï¼‰ï¼Œæ­¤æ—¶è¿›ç¨‹ä¼šå˜æˆé˜»å¡æ€ï¼Œåªæœ‰ç­‰åˆ°äº‹ä»¶å®Œæˆåï¼Œå†ç”±é˜»å¡æ€è½¬åŒ–ä¸ºå°±ç»ªæ€ã€‚</p></li><li><p>ä¸å¯ä»¥ç›´æ¥ä»é˜»å¡æ€è¿›å…¥è¿è¡Œæ€ï¼Œå› ä¸ºè¦è¿›å…¥è¿è¡Œæ€ï¼Œå¿…é¡»å…ˆä»é˜»å¡æ€è¿›å…¥å°±ç»ªæ€ï¼Œç„¶åç”±å°±ç»ªæ€è¿›å…¥è¿è¡Œæ€ã€‚</p><p>å½“ç³»ç»Ÿåªæœ‰ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œè¯¥è¿›ç¨‹å°†ä¸€ç›´å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä¸ä¼šå‘ç”ŸçŠ¶æ€ä¹‹é—´çš„è½¬æ¢ï¼Œå› ä¸ºéƒ½æ˜¯å…¶è‡ªå·±åœ¨è¿è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœè¯¥è¿›ç¨‹éœ€è¦ç­‰å¾…æŸä¸ªäº‹ä»¶çš„å®Œæˆï¼Œæ¯”å¦‚è¾“å…¥è¾“å‡ºæ“ä½œï¼Œåˆ™ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°äº‹ä»¶å®Œæˆä¸ºæ­¢ã€‚</p></li></ol><h3 id="6-è¿›ç¨‹å¼•å…¥â€œæŒ‚èµ·ï¼ˆsuspendï¼‰â€çŠ¶æ€åï¼ŒåŸæ¥çš„3çŠ¶æ€ä¸­å“ªäº›å˜äº†ï¼Ÿè§£é‡ŠåŠ å…¥æŒ‚èµ·çŠ¶æ€åçš„çŠ¶æ€è½¬æ¢å›¾"><a href="#6-è¿›ç¨‹å¼•å…¥â€œæŒ‚èµ·ï¼ˆsuspendï¼‰â€çŠ¶æ€åï¼ŒåŸæ¥çš„3çŠ¶æ€ä¸­å“ªäº›å˜äº†ï¼Ÿè§£é‡ŠåŠ å…¥æŒ‚èµ·çŠ¶æ€åçš„çŠ¶æ€è½¬æ¢å›¾" class="headerlink" title="6.è¿›ç¨‹å¼•å…¥â€œæŒ‚èµ·ï¼ˆsuspendï¼‰â€çŠ¶æ€åï¼ŒåŸæ¥çš„3çŠ¶æ€ä¸­å“ªäº›å˜äº†ï¼Ÿè§£é‡ŠåŠ å…¥æŒ‚èµ·çŠ¶æ€åçš„çŠ¶æ€è½¬æ¢å›¾"></a>6.è¿›ç¨‹å¼•å…¥â€œæŒ‚èµ·ï¼ˆsuspendï¼‰â€çŠ¶æ€åï¼ŒåŸæ¥çš„3çŠ¶æ€ä¸­å“ªäº›å˜äº†ï¼Ÿè§£é‡ŠåŠ å…¥æŒ‚èµ·çŠ¶æ€åçš„çŠ¶æ€è½¬æ¢å›¾</h3><p>ç­”ï¼šå¼•å…¥æŒ‚èµ·çŠ¶æ€åï¼ŒåŸæ¥çš„ä¸‰ç§çŠ¶æ€ï¼ˆè¿è¡Œæ€ã€å°±ç»ªæ€ã€é˜»å¡æ€ï¼‰å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯æ·»åŠ äº†ä¸€ç§æ–°çš„çŠ¶æ€â€”â€”æŒ‚èµ·æ€ï¼Œä»£è¡¨è¿›ç¨‹å› æŸäº›åŸå› è¢«æš‚åœæ‰§è¡Œã€‚</p><p>è¿›ç¨‹çŠ¶æ€è½¬æ¢å›¾ä¸­ï¼ŒåŠ å…¥äº†æŒ‚èµ·çŠ¶æ€åï¼Œè½¬æ¢å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">\&#96;&#96;&#96;         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ Ready â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â–¼   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Running â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ Suspended â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â–¼      â–²         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚         â”‚ Blocked â”‚â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\&#96;&#96;&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>å…¶ä¸­ï¼Œæ–°å¢çš„æŒ‚èµ·çŠ¶æ€åœ¨ Ready å’Œ Suspended ä¹‹é—´ï¼Œè¿›ç¨‹å¯ä»¥ä» Ready çŠ¶æ€æˆ–è€… Running çŠ¶æ€è½¬åŒ–åˆ°æŒ‚èµ·çŠ¶æ€ï¼Œå†ä»æŒ‚èµ·çŠ¶æ€è½¬åŒ–ä¸º Ready çŠ¶æ€æˆ–è€… Suspended çŠ¶æ€ã€‚å½“ä» Running çŠ¶æ€è½¬ç§»åˆ° Suspended çŠ¶æ€æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†è¯¥è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¿å­˜åœ¨ PCB ä¸­ï¼Œä»¥ä¾¿ä¹‹åå†æ¬¡è¿è¡Œè¯¥è¿›ç¨‹æ—¶ï¼Œå¯ä»¥æ¢å¤ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç»§ç»­ä¹‹å‰çš„å·¥ä½œã€‚</p><p>å½“è¿›ç¨‹å¤„äº Suspended çŠ¶æ€æ—¶ï¼Œå¦‚æœå‘ç”Ÿäº†è¿›ç¨‹ç»ˆæ­¢ã€æ—¶é—´ç‰‡åˆ°æœŸã€è¿›ç¨‹è¢«å”¤é†’ç­‰äº‹ä»¶ï¼Œåˆ™ä¼šä» Suspended çŠ¶æ€è½¬åŒ–ä¸º Ready çŠ¶æ€ï¼Œå³è¿›å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾… CPU è°ƒåº¦ã€‚å¦‚æœå‘ç”Ÿäº†è¿›ç¨‹ç­‰å¾…äº‹ä»¶å®Œæˆçš„æƒ…å†µï¼Œåˆ™ä¼šç”± Suspended çŠ¶æ€è½¬åŒ–ä¸º Blocked çŠ¶æ€ã€‚</p><p>æ€»ä¹‹ï¼Œå¼•å…¥æŒ‚èµ·çŠ¶æ€åï¼Œè¿›ç¨‹çŠ¶æ€çš„è½¬æ¢æ›´åŠ çµæ´»å’Œå¤šæ ·åŒ–ï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿèƒ½å¤Ÿæ›´åŠ æœ‰æ•ˆåœ°ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹ï¼Œæé«˜è®¡ç®—æœºçš„èµ„æºåˆ©ç”¨ç‡å’Œå·¥ä½œæ•ˆç‡ã€‚</p><h3 id="7-æœ‰äººè¯´åœ¨windowsä¸­ï¼šâ€œåå°ç¨‹åºå¯¹åº”é˜»å¡æ€ï¼Œå‰å°æ˜¯è¿è¡Œæ€â€ï¼Œç»™å‡ºæ­£ç¡®çš„è¯´æ³•ï¼Œå¹¶ç»“åˆè¿›ç¨‹çŠ¶æ€è½¬æ¢è¿›è¡Œè¯´æ˜"><a href="#7-æœ‰äººè¯´åœ¨windowsä¸­ï¼šâ€œåå°ç¨‹åºå¯¹åº”é˜»å¡æ€ï¼Œå‰å°æ˜¯è¿è¡Œæ€â€ï¼Œç»™å‡ºæ­£ç¡®çš„è¯´æ³•ï¼Œå¹¶ç»“åˆè¿›ç¨‹çŠ¶æ€è½¬æ¢è¿›è¡Œè¯´æ˜" class="headerlink" title="7.æœ‰äººè¯´åœ¨windowsä¸­ï¼šâ€œåå°ç¨‹åºå¯¹åº”é˜»å¡æ€ï¼Œå‰å°æ˜¯è¿è¡Œæ€â€ï¼Œç»™å‡ºæ­£ç¡®çš„è¯´æ³•ï¼Œå¹¶ç»“åˆè¿›ç¨‹çŠ¶æ€è½¬æ¢è¿›è¡Œè¯´æ˜"></a>7.æœ‰äººè¯´åœ¨windowsä¸­ï¼šâ€œåå°ç¨‹åºå¯¹åº”é˜»å¡æ€ï¼Œå‰å°æ˜¯è¿è¡Œæ€â€ï¼Œç»™å‡ºæ­£ç¡®çš„è¯´æ³•ï¼Œå¹¶ç»“åˆè¿›ç¨‹çŠ¶æ€è½¬æ¢è¿›è¡Œè¯´æ˜</h3><p>ç­”ï¼šè¿™ç§è¯´æ³•æ˜¯ä¸æ­£ç¡®çš„ï¼ŒWindowsæ“ä½œç³»ç»Ÿä¸­çš„ç¨‹åºåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå‰å°ç¨‹åºå’Œåå°ç¨‹åºï¼Œå®ƒä»¬å¯¹åº”çš„çŠ¶æ€å¹¶ä¸æ˜¯æ˜ç¡®çš„é˜»å¡æ€æˆ–è€…è¿è¡Œæ€ã€‚å®é™…ä¸Šï¼Œç¨‹åºçš„çŠ¶æ€æ˜¯ç”±å½“å‰çš„è¿›ç¨‹æ´»åŠ¨ï¼ˆä¾‹å¦‚æ˜¯å¦æ­£åœ¨ä¸ç”¨æˆ·äº¤äº’ï¼‰å†³å®šçš„ï¼Œè€Œä¸ç¨‹åºçš„å‰å°æˆ–åå°ç‰¹æ€§æ— å…³ã€‚</p><p>åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰éƒ½æœ‰è‡ªå·±çš„è¿›ç¨‹çŠ¶æ€ï¼ŒçŠ¶æ€å¯ä»¥æ˜¯è¿è¡Œæ€ã€å°±ç»ªæ€ã€é˜»å¡æ€å’ŒæŒ‚èµ·æ€å››ç§çŠ¶æ€ä¸­çš„ä»»æ„ä¸€ç§ï¼Œå…·ä½“çŠ¶æ€å¦‚ä¸‹ï¼š</p><ol><li><p>è¿è¡Œæ€ï¼šæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå ç”¨ CPU èµ„æºã€‚</p></li><li><p>å°±ç»ªæ€ï¼šå·²ç»å¤„äºå‡†å¤‡è¿è¡ŒçŠ¶æ€ï¼Œç­‰å¾…è¿›å…¥è¿è¡ŒçŠ¶æ€ï¼ˆå³ç­‰å¾… CPU æ—¶é—´ç‰‡ï¼‰ã€‚</p></li><li><p>é˜»å¡æ€ï¼šæ­£åœ¨ç­‰å¾…æŸä¸€äº‹ä»¶å®Œæˆåæ‰èƒ½è¿›è¡Œè¿è¡Œï¼Œå¦‚ç­‰å¾…ç³»ç»Ÿèµ„æºã€ç­‰å¾…ç”¨æˆ·è¾“å…¥ã€ç­‰å¾…å…¶ä»–è¿›ç¨‹çš„æ¶ˆæ¯ç­‰ã€‚</p></li><li><p>æŒ‚èµ·æ€ï¼šå¤„äºæŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹ä¸å¤„äºè¿è¡Œã€å°±ç»ªæˆ–é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è¢«æ“ä½œç³»ç»Ÿæš‚åœï¼Œç›´åˆ°æ¢å¤æ“ä½œç³»ç»Ÿå¯¹å…¶è¿›è¡Œè°ƒåº¦ã€‚</p><p>å› æ­¤ï¼Œä¸€ä¸ªå‰å°ç¨‹åºå¯ä»¥æ˜¯è¿è¡Œæ€ã€å°±ç»ªæ€ã€é˜»å¡æ€æˆ–æŒ‚èµ·æ€ä¸­çš„ä»»æ„ä¸€ç§ï¼Œåå°ç¨‹åºä¹Ÿæ˜¯ä¸€æ ·ã€‚è¿™å–å†³äºå½“å‰è¿›ç¨‹çš„è¿è¡ŒçŠ¶å†µï¼Œè€Œä¸æ˜¯ç¨‹åºæœ¬èº«çš„å‰å°æˆ–è€…åå°ç‰¹æ€§ã€‚</p><p>æ€»ä¹‹ï¼Œç¨‹åºçš„å‰å°å’Œåå°ç‰¹æ€§å¹¶ä¸èƒ½ç›´æ¥å¯¹åº”æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹çŠ¶æ€ï¼Œè¿›ç¨‹çŠ¶æ€æ˜¯ç”±è¯¥è¿›ç¨‹çš„è¿è¡Œæƒ…å†µæ‰€å†³å®šçš„ã€‚</p></li></ol><h3 id="8-è‹¥ç³»ç»Ÿä¸­æ—¢æ²¡æœ‰è¿è¡Œè¿›ç¨‹ï¼Œåˆæ²¡æœ‰å°±ç»ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­æ˜¯å¦å°±æ²¡æœ‰è¿›ç¨‹ï¼Ÿè¯´æ˜ç³»ç»Ÿæœ€å¤šæœ‰å¤šå°‘è¿è¡Œè¿›ç¨‹ï¼Œå°±ç»ªè¿›ç¨‹ï¼Œæœ€å°‘åˆæœ‰å¤šå°‘ã€‚å¦‚æœæ˜¯å¤šæ ¸å‘¢ï¼Ÿ"><a href="#8-è‹¥ç³»ç»Ÿä¸­æ—¢æ²¡æœ‰è¿è¡Œè¿›ç¨‹ï¼Œåˆæ²¡æœ‰å°±ç»ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­æ˜¯å¦å°±æ²¡æœ‰è¿›ç¨‹ï¼Ÿè¯´æ˜ç³»ç»Ÿæœ€å¤šæœ‰å¤šå°‘è¿è¡Œè¿›ç¨‹ï¼Œå°±ç»ªè¿›ç¨‹ï¼Œæœ€å°‘åˆæœ‰å¤šå°‘ã€‚å¦‚æœæ˜¯å¤šæ ¸å‘¢ï¼Ÿ" class="headerlink" title="8.è‹¥ç³»ç»Ÿä¸­æ—¢æ²¡æœ‰è¿è¡Œè¿›ç¨‹ï¼Œåˆæ²¡æœ‰å°±ç»ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­æ˜¯å¦å°±æ²¡æœ‰è¿›ç¨‹ï¼Ÿè¯´æ˜ç³»ç»Ÿæœ€å¤šæœ‰å¤šå°‘è¿è¡Œè¿›ç¨‹ï¼Œå°±ç»ªè¿›ç¨‹ï¼Œæœ€å°‘åˆæœ‰å¤šå°‘ã€‚å¦‚æœæ˜¯å¤šæ ¸å‘¢ï¼Ÿ"></a>8.è‹¥ç³»ç»Ÿä¸­æ—¢æ²¡æœ‰è¿è¡Œè¿›ç¨‹ï¼Œåˆæ²¡æœ‰å°±ç»ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­æ˜¯å¦å°±æ²¡æœ‰è¿›ç¨‹ï¼Ÿè¯´æ˜ç³»ç»Ÿæœ€å¤šæœ‰å¤šå°‘è¿è¡Œè¿›ç¨‹ï¼Œå°±ç»ªè¿›ç¨‹ï¼Œæœ€å°‘åˆæœ‰å¤šå°‘ã€‚å¦‚æœæ˜¯å¤šæ ¸å‘¢ï¼Ÿ</h3><p>ç­”ï¼šå³ä½¿ç³»ç»Ÿä¸­æ²¡æœ‰è¿è¡Œæˆ–å°±ç»ªçš„è¿›ç¨‹ï¼Œä¹Ÿå¯èƒ½å­˜æ´»æœ‰ä¸€äº›æŒ‚èµ·æˆ–é˜»å¡ä¸­çš„è¿›ç¨‹ã€‚æ‰€ä»¥ï¼Œç³»ç»Ÿé‡Œé¢å¹¶ä¸éœ€è¦æœ‰è¿è¡Œæˆ–è€…å°±ç»ªçš„è¿›ç¨‹ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨æŒ‚èµ·æˆ–è€…é˜»å¡çš„è¿›ç¨‹ã€‚</p><p>åœ¨å•æ ¸å¤„ç†å™¨çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæœ€å¤šåªèƒ½åŒæ—¶è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå› ä¸ºåœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹è¿è¡Œåœ¨å¤„ç†å™¨ä¸Šã€‚è€Œå°±ç»ªæ€å’Œé˜»å¡æ€è¿›ç¨‹çš„æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œåªå—ç¡¬ä»¶åŠç³»ç»Ÿèµ„æºçš„é™åˆ¶ã€‚åœ¨ä¸æ–­åˆ‡æ¢è¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æœ‰å¤šä¸ªå°±ç»ªæ€è¿›ç¨‹ç­‰å¾…CPUè¿›è¡Œè°ƒåº¦ã€‚</p><p>åœ¨å¤šæ ¸å¤„ç†å™¨çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªCPUå†…æ ¸éƒ½æœ‰è‡ªå·±çš„è¿›ç¨‹è°ƒåº¦å™¨ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥åœ¨ä¸åŒçš„æ ¸ä¸Šå¹¶è¡Œè¿è¡Œï¼Œç³»ç»Ÿæœ€å¤šå¯ä»¥æœ‰å¤šä¸ªè¿è¡Œæ€è¿›ç¨‹åŒæ—¶è¿è¡Œã€‚ä½†æ˜¯å°±ç»ªæ€å’Œé˜»å¡æ€è¿›ç¨‹çš„æ•°é‡åŒæ ·æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œåªå—ç¡¬ä»¶åŠç³»ç»Ÿèµ„æºçš„é™åˆ¶ã€‚</p><p>å› æ­¤ï¼Œåœ¨å•æ ¸å¤„ç†å™¨æƒ…å†µä¸‹ï¼Œè¿è¡Œæ€æœ€å¤šåªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œå°±ç»ªæ€å’Œé˜»å¡æ€è¿›ç¨‹æ•°é‡ä¸é™ï¼Œå¯ä»¥æ²¡æœ‰å°±ç»ªå’Œè¿è¡Œæ€è¿›ç¨‹ï¼Œä¹Ÿå¯èƒ½æœ‰å¾ˆå¤šè¿›ç¨‹å¤„äºå°±ç»ªå’Œé˜»å¡æ€ç­‰å¾…CPUçš„è°ƒåº¦ã€‚åœ¨å¤šæ ¸å¤„ç†å™¨æƒ…å†µä¸‹ï¼Œè¿è¡Œæ€è¿›ç¨‹æœ€å¤šçš„æ•°é‡å–å†³äºæ ¸å¿ƒæ•°é‡ï¼Œå°±ç»ªæ€å’Œé˜»å¡æ€è¿›ç¨‹æ•°é‡åŒæ ·ä¸é™åˆ¶ã€‚</p><h3 id="9-ä»€ä¹ˆæ˜¯åŸè¯­ï¼Ÿè¿›ç¨‹æ§åˆ¶ä¸ºä»€ä¹ˆéœ€è¦åŸè¯­ï¼Ÿä¸ç”¨åŸè¯­ä¼šæ€ä¹ˆæ ·ï¼Ÿ"><a href="#9-ä»€ä¹ˆæ˜¯åŸè¯­ï¼Ÿè¿›ç¨‹æ§åˆ¶ä¸ºä»€ä¹ˆéœ€è¦åŸè¯­ï¼Ÿä¸ç”¨åŸè¯­ä¼šæ€ä¹ˆæ ·ï¼Ÿ" class="headerlink" title="9.ä»€ä¹ˆæ˜¯åŸè¯­ï¼Ÿè¿›ç¨‹æ§åˆ¶ä¸ºä»€ä¹ˆéœ€è¦åŸè¯­ï¼Ÿä¸ç”¨åŸè¯­ä¼šæ€ä¹ˆæ ·ï¼Ÿ"></a>9.ä»€ä¹ˆæ˜¯åŸè¯­ï¼Ÿè¿›ç¨‹æ§åˆ¶ä¸ºä»€ä¹ˆéœ€è¦åŸè¯­ï¼Ÿä¸ç”¨åŸè¯­ä¼šæ€ä¹ˆæ ·ï¼Ÿ</h3><p>ç­”ï¼šåŸè¯­ï¼ˆPrimitiveï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿè½¯ä»¶çš„ä¸€ç§åŸºæœ¬æ“ä½œï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç³»åˆ—ç›¸å…³æ“ä½œçš„é›†åˆï¼Œæ“ä½œç³»ç»Ÿä¿è¯äº†åŸè¯­çš„åŸå­æ€§å’Œç‹¬å æ€§ï¼Œä¸€ä¸ªåŸè¯­çš„å®Œæˆä¸å…è®¸è¢«å…¶ä»–è¿›ç¨‹æ‰“æ–­ã€‚å…¸å‹çš„åŸè¯­æœ‰è¿›ç¨‹åŒæ­¥åŸè¯­ã€è¿›ç¨‹äº’æ–¥åŸè¯­ç­‰ç­‰ã€‚åœ¨åŸè¯­çš„ä½œç”¨ä¸‹ï¼Œå¤šä¸ªè¿›ç¨‹èƒ½å¤Ÿè¿›è¡Œæœ‰æ•ˆçš„åè°ƒå’ŒåŒæ­¥ã€‚</p><p>è¿›ç¨‹æ§åˆ¶éœ€è¦åŸè¯­çš„åŸå› æ˜¯ï¼Œè¿›ç¨‹æ§åˆ¶æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒæ¶‰åŠåˆ°å¤šä¸ªè¿›ç¨‹ä¹‹é—´çš„åè°ƒï¼Œè€Œå¤šä¸ªè¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œä¼šå¼•èµ·å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚èµ„æºç«äº‰ã€è¿›ç¨‹é—´é€šä¿¡ç­‰ï¼Œè¿™æ—¶å€™éœ€è¦ç”¨åˆ°åŸè¯­æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œè¿›ç¨‹çš„æ­£ç¡®è¿è¡Œã€‚ä¾‹å¦‚ï¼Œåœ¨è¿›ç¨‹å¹¶å‘è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå¦‚æœæ²¡æœ‰äº’æ–¥åŸè¯­çš„ä¿æŠ¤ï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºç«äº‰ã€æ­»é”ç­‰é—®é¢˜ï¼Œå¯¼è‡´ç¨‹åºçš„å¼‚å¸¸ç»ˆæ­¢æˆ–ç¨‹åºæ— æ³•å‘å‰è¿è¡Œã€‚</p><p>å¦‚æœä¸ä½¿ç”¨åŸè¯­è¿›è¡Œè¿›ç¨‹åŒæ­¥å’Œåè°ƒï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿›ç¨‹ä¹‹é—´å‡ºç°å„ç§ä¸ä¸€è‡´å’Œé”™è¯¯çš„æƒ…å†µï¼Œæ¯”å¦‚æ•°æ®æŸåã€æ­»é”é—®é¢˜ç­‰ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚ä½¿ç”¨åŸè¯­ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æä¾›ä¸€ç§å¯é çš„æœºåˆ¶ï¼Œç¡®ä¿å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ­£ç¡®æ€§ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</p><p>å› æ­¤ï¼ŒåŸè¯­åœ¨æ“ä½œç³»ç»Ÿä¸­æ˜¯éå¸¸é‡è¦çš„ï¼Œå®ƒä»¬ä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›å…³é”®çš„æœºåˆ¶ï¼Œæ”¯æŒè¿›ç¨‹æ§åˆ¶åŠŸèƒ½çš„æ­£ç¡®å®ç°ï¼Œç¡®ä¿ç³»ç»Ÿçš„é«˜æ€§èƒ½ã€é«˜ç¨³å®šæ€§å’Œé«˜å®‰å…¨æ€§ã€‚</p><h3 id="10-è¿›ç¨‹æœ‰å°±ç»ªé˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œæœ‰äº›ç³»ç»ŸæŠŠé˜»å¡é˜Ÿåˆ—åˆ†ä¸ºå¾ˆå¤šä¸ªï¼šä¸åŒé˜»å¡åŸå› çš„è¿›ç¨‹æ”¾åœ¨ä¸åŒçš„é˜Ÿåˆ—ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"><a href="#10-è¿›ç¨‹æœ‰å°±ç»ªé˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œæœ‰äº›ç³»ç»ŸæŠŠé˜»å¡é˜Ÿåˆ—åˆ†ä¸ºå¾ˆå¤šä¸ªï¼šä¸åŒé˜»å¡åŸå› çš„è¿›ç¨‹æ”¾åœ¨ä¸åŒçš„é˜Ÿåˆ—ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ" class="headerlink" title="10.è¿›ç¨‹æœ‰å°±ç»ªé˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œæœ‰äº›ç³»ç»ŸæŠŠé˜»å¡é˜Ÿåˆ—åˆ†ä¸ºå¾ˆå¤šä¸ªï¼šä¸åŒé˜»å¡åŸå› çš„è¿›ç¨‹æ”¾åœ¨ä¸åŒçš„é˜Ÿåˆ—ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"></a>10.è¿›ç¨‹æœ‰å°±ç»ªé˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œæœ‰äº›ç³»ç»ŸæŠŠé˜»å¡é˜Ÿåˆ—åˆ†ä¸ºå¾ˆå¤šä¸ªï¼šä¸åŒé˜»å¡åŸå› çš„è¿›ç¨‹æ”¾åœ¨ä¸åŒçš„é˜Ÿåˆ—ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h3><p>ç­”ï¼šå°†é˜»å¡é˜Ÿåˆ—åˆ†ä¸ºå¤šä¸ªä¸åŒçš„é˜Ÿåˆ—ï¼Œæ˜¯ä¸ºäº†æ›´åŠ ç²¾ç»†åœ°ç®¡ç†è¿›ç¨‹ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ç§åšæ³•å¯ä»¥å¸¦æ¥ä»¥ä¸‹å‡ æ–¹é¢çš„å¥½å¤„ï¼š</p><ol><li><p>æ›´ç²¾ç»†çš„è¿›ç¨‹ç®¡ç†ï¼šå„ä¸ªé˜»å¡é˜Ÿåˆ—ä»£è¡¨äº†ä¸åŒç±»å‹çš„é˜»å¡åŸå› ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ ç²¾ç»†åœ°ç®¡ç†è¿›ç¨‹ï¼Œé’ˆå¯¹ä¸åŒçš„é˜»å¡åŸå› ï¼Œé‡‡ç”¨ä¸åŒçš„ç­–ç•¥å’Œä¼˜åŒ–æªæ–½ï¼Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚</p></li><li><p>æé«˜è¿›ç¨‹å“åº”é€Ÿåº¦ï¼šå°†ä¸åŒåŸå› çš„é˜»å¡è¿›ç¨‹åˆ†ç±»ç®¡ç†ï¼Œå¯ä»¥ç¼©çŸ­è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ï¼Œå¿«é€Ÿåœ°æŸ¥æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„è¿›ç¨‹ï¼Œæé«˜è¿›ç¨‹å“åº”é€Ÿåº¦ã€‚</p></li><li><p>é™ä½ç³»ç»Ÿå¼€é”€ï¼šå°†é˜»å¡é˜Ÿåˆ—åˆ†ä¸ºè‹¥å¹²å°é˜Ÿåˆ—ï¼Œå°½å¯èƒ½é¿å…äº†é˜»å¡é˜Ÿåˆ—é‡Œè¿›ç¨‹è¿‡å¤šå¯¼è‡´éå†é€Ÿåº¦å˜æ…¢ï¼Œé¿å…äº†ä¸å¿…è¦çš„ç³»ç»Ÿå¼€é”€ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p></li><li><p>å‡å°‘æ­»é”æƒ…å†µçš„å‘ç”Ÿï¼šä¸åŒçš„é˜»å¡åŸå› æ­£æ˜¯å¯¼è‡´æ­»é”çš„åŸå› ä¹‹ä¸€ï¼Œå°†ä¸åŒåŸå› çš„é˜»å¡è¿›ç¨‹åˆ†åˆ«ç®¡ç†ï¼Œå¯ä»¥é¿å…è¿›ç¨‹ä¹‹é—´äº§ç”Ÿæ­»é”é—®é¢˜ã€‚</p><p> æ€»ä¹‹ï¼Œå°†é˜»å¡é˜Ÿåˆ—åˆ†æˆå¤šä¸ªé˜Ÿåˆ—ï¼Œå¯ä»¥æ›´åŠ ç»†è‡´åœ°ç®¡ç†è¿›ç¨‹ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œé™ä½ç³»ç»Ÿå¼€é”€ï¼Œå‡å°‘æ­»é”æƒ…å†µçš„å‘ç”Ÿï¼Œå¢åŠ ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p></li></ol><h3 id="11-Linuxåˆ›å»ºè¿›ç¨‹ä¸ºä»€ä¹ˆç”¨forkæŠŠçˆ¶è¿›ç¨‹å¤åˆ¶ä¸€ä»½ï¼Ÿå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¸€æ ·æœ‰æ„ä¹‰ä¹ˆï¼ŸWindowsæ˜¯ä¸æ˜¯è¿™æ ·åˆ›å»ºçš„ï¼Ÿè¿™æ ·æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"><a href="#11-Linuxåˆ›å»ºè¿›ç¨‹ä¸ºä»€ä¹ˆç”¨forkæŠŠçˆ¶è¿›ç¨‹å¤åˆ¶ä¸€ä»½ï¼Ÿå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¸€æ ·æœ‰æ„ä¹‰ä¹ˆï¼ŸWindowsæ˜¯ä¸æ˜¯è¿™æ ·åˆ›å»ºçš„ï¼Ÿè¿™æ ·æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ" class="headerlink" title="11.Linuxåˆ›å»ºè¿›ç¨‹ä¸ºä»€ä¹ˆç”¨forkæŠŠçˆ¶è¿›ç¨‹å¤åˆ¶ä¸€ä»½ï¼Ÿå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¸€æ ·æœ‰æ„ä¹‰ä¹ˆï¼ŸWindowsæ˜¯ä¸æ˜¯è¿™æ ·åˆ›å»ºçš„ï¼Ÿè¿™æ ·æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"></a>11.Linuxåˆ›å»ºè¿›ç¨‹ä¸ºä»€ä¹ˆç”¨forkæŠŠçˆ¶è¿›ç¨‹å¤åˆ¶ä¸€ä»½ï¼Ÿå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¸€æ ·æœ‰æ„ä¹‰ä¹ˆï¼ŸWindowsæ˜¯ä¸æ˜¯è¿™æ ·åˆ›å»ºçš„ï¼Ÿè¿™æ ·æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</h3><p>ç­”ï¼šLinuxä¸­ä½¿ç”¨forkç³»ç»Ÿè°ƒç”¨åˆ›å»ºè¿›ç¨‹æ˜¯ç”±äºUnixåŠå…¶è¡ç”Ÿç³»ç»Ÿçš„è®¾è®¡ç†å¿µä¹‹ä¸€å°±æ˜¯â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼Œè¿›ç¨‹ä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨Unixæ“ä½œç³»ç»Ÿä¸‹ï¼Œè¿›ç¨‹æ˜¯é€šè¿‡forkç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºçš„ã€‚</p><p>ä½¿ç”¨forkå°†çˆ¶è¿›ç¨‹å¤åˆ¶ä¸€ä»½å‡ºæ¥åˆ›å»ºå­è¿›ç¨‹ï¼Œæ˜¯ä¸ºäº†è®©å­è¿›ç¨‹æ‹¥æœ‰çˆ¶è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å†…å­˜ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ã€ä¿¡å·å¤„ç†æ–¹å¼ç­‰ã€‚è¿™å°±ä¿è¯äº†å­è¿›ç¨‹å¯ä»¥ä½¿ç”¨å’Œä¿®æ”¹çˆ¶è¿›ç¨‹çš„èµ„æºï¼Œä¹Ÿå¯ä»¥ç‹¬ç«‹åœ°è¿è¡Œè‡ªå·±çš„ä»£ç ã€‚å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹åœ¨å¤§å°å’ŒåŠŸèƒ½ä¸Šè™½ç„¶ç›¸åŒï¼Œä½†å®é™…ä¸Šæ˜¯ä¸¤ä¸ªä¸åŒçš„è¿›ç¨‹ï¼Œå„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´å’Œèµ„æºï¼Œç›¸äº’ç‹¬ç«‹è¿è¡Œã€‚</p><p>Windowsä¸­åˆ›å»ºè¿›ç¨‹çš„æ–¹å¼å’ŒLinuxæœ‰æ‰€ä¸åŒï¼ŒWindowsä½¿ç”¨CreateProcesså‡½æ•°åˆ›å»ºè¿›ç¨‹ï¼Œå®ƒä¼šæ ¹æ®æŒ‡å®šçš„ç¨‹åºæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„èµ„æºç”±æ–°è¿›ç¨‹è‡ªå·±åˆ›å»ºï¼Œä¸åƒforkæ–¹å¼ç›´æ¥å°†çˆ¶è¿›ç¨‹å¤åˆ¶ä¸€ä»½ã€‚</p><p>ä½¿ç”¨forkåˆ›å»ºè¿›ç¨‹çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ol><li><p>èƒ½å¤Ÿé«˜æ•ˆåœ°åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œå› ä¸ºçˆ¶è¿›ç¨‹å·²ç»æœ‰äº†éƒ¨åˆ†èµ„æºï¼Œæ— éœ€é‡æ–°åˆ†é…å’Œåˆå§‹åŒ–ï¼Œä¹Ÿæ— éœ€é‡æ–°è¯»å–ä»£ç æ®µç­‰ä¿¡æ¯ã€‚</p></li><li><p>å­è¿›ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å·²æ‰“å¼€çš„æ–‡ä»¶ã€æ–‡ä»¶é”ã€å†…å­˜åœ°å€ç©ºé—´ä»¥åŠä¿¡å·å¤„ç†æ–¹å¼ç­‰ã€‚</p></li><li><p>å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚</p></li></ol><p>ä½¿ç”¨forkåˆ›å»ºè¿›ç¨‹çš„ç¼ºç‚¹æ˜¯ï¼š</p><ol><li><p>å ç”¨çš„èµ„æºæ›´å¤šï¼ŒåŒ…æ‹¬å†…å­˜å’ŒCPUç­‰èµ„æºã€‚</p></li><li><p>å­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹åœ¨ä¸€å¼€å§‹çš„æ—¶å€™æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœéœ€è¦è®©å®ƒä»¬åŒºåˆ†å¼€æ¥ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„å¤„ç†ã€‚</p><p> æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨forkåˆ›å»ºè¿›ç¨‹çš„æ–¹å¼èƒ½å¤Ÿé«˜æ•ˆåœ°åˆ›å»ºæ–°çš„è¿›ç¨‹ï¼Œä¸”å­è¿›ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶è¿›ç¨‹çš„èµ„æºï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿç›¸å¯¹ç®€å•ï¼Œä½†éœ€è¦æ³¨æ„çˆ¶å­è¿›ç¨‹ä¹‹é—´çš„èµ„æºç«äº‰å’Œé‡å¤è®¡ç®—ç­‰é—®é¢˜ã€‚è€ŒWindowsä¸­åˆ›å»ºè¿›ç¨‹çš„æ–¹å¼åˆ™ä¸ä¼šå‡ºç°è¿™äº›é—®é¢˜ï¼Œä½†åœ¨åˆ›å»ºè¿›ç¨‹æ—¶éœ€è¦æ‰‹åŠ¨è®¾ç½®æ–°è¿›ç¨‹æ‰€éœ€çš„èµ„æºã€‚</p></li></ol><h3 id="12-è§£é‡ŠLinuxä¸­çš„å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹ï¼šæ˜¯è¿›ç¨‹çš„ä»€ä¹ˆçŠ¶æ€ï¼Ÿæ€ä¹ˆäº§ç”Ÿçš„ï¼Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Œå±å®³ï¼Œæ¼”ç¤ºä¸¤ç§è¿›ç¨‹"><a href="#12-è§£é‡ŠLinuxä¸­çš„å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹ï¼šæ˜¯è¿›ç¨‹çš„ä»€ä¹ˆçŠ¶æ€ï¼Ÿæ€ä¹ˆäº§ç”Ÿçš„ï¼Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Œå±å®³ï¼Œæ¼”ç¤ºä¸¤ç§è¿›ç¨‹" class="headerlink" title="12.è§£é‡ŠLinuxä¸­çš„å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹ï¼šæ˜¯è¿›ç¨‹çš„ä»€ä¹ˆçŠ¶æ€ï¼Ÿæ€ä¹ˆäº§ç”Ÿçš„ï¼Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Œå±å®³ï¼Œæ¼”ç¤ºä¸¤ç§è¿›ç¨‹"></a>12.è§£é‡ŠLinuxä¸­çš„å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹ï¼šæ˜¯è¿›ç¨‹çš„ä»€ä¹ˆçŠ¶æ€ï¼Ÿæ€ä¹ˆäº§ç”Ÿçš„ï¼Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Œå±å®³ï¼Œæ¼”ç¤ºä¸¤ç§è¿›ç¨‹</h3><p>ç­”ï¼šåœ¨Linuxä¸­ï¼Œå­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹éƒ½æ˜¯è¿›ç¨‹çš„ä¸€ç§çŠ¶æ€ã€‚</p><p>å­¤å„¿è¿›ç¨‹æ˜¯æŒ‡å…¶çˆ¶è¿›ç¨‹å·²ç»é€€å‡ºï¼ˆæˆ–è¢«æ€æ­»ï¼‰ï¼Œè€Œå­è¿›ç¨‹è¿˜åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚æ­¤æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†å­¤å„¿è¿›ç¨‹çš„çˆ¶è¿›ç¨‹è®¾ç½®ä¸ºinitè¿›ç¨‹ï¼Œè®©å…¶æ¥ç®¡å­è¿›ç¨‹çš„åç»­å¤„ç†å·¥ä½œã€‚å­¤å„¿è¿›ç¨‹å¹¶ä¸ä¼šå½±å“ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œï¼Œå…¶å­˜åœ¨ä¹Ÿä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹é€ æˆå¨èƒã€‚</p><p>è€Œåƒµå°¸è¿›ç¨‹åˆ™æ˜¯æŒ‡è¿›ç¨‹å·²ç»ç»“æŸï¼Œä½†å…¶çˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å…¶èµ„æºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥è¿›ç¨‹çš„PCBï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰ç­‰ä¿¡æ¯ä¼šä¿ç•™åœ¨ç³»ç»Ÿä¸­ä¸€æ®µæ—¶é—´ï¼Œå ç”¨ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´è¿›ç¨‹æ•°ç›®å¢å¤šï¼Œä»è€Œé™ä½ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚ </p><p>äº§ç”Ÿå­¤å„¿è¿›ç¨‹çš„åŸå› é€šå¸¸æ˜¯çˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹é€€å‡ºï¼Œå¯¼è‡´å­è¿›ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚è€Œåƒµå°¸è¿›ç¨‹é€šå¸¸æ˜¯å› ä¸ºçˆ¶è¿›ç¨‹æ²¡æœ‰åŠæ—¶å›æ”¶å·²é€€å‡ºçš„å­è¿›ç¨‹ï¼Œæˆ–è€…çˆ¶è¿›ç¨‹æœ¬èº«ä¹Ÿé€€å‡ºäº†ï¼Œè®©å­è¿›ç¨‹å˜æˆå­¤å„¿è¿›ç¨‹ï¼Œæœ€ç»ˆå˜æˆåƒµå°¸è¿›ç¨‹ã€‚æ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬å›æ”¶å­è¿›ç¨‹çš„èµ„æºï¼Œä½†å¦‚æœçˆ¶è¿›ç¨‹ä¸€ç›´æ²¡æœ‰å¤„ç†ï¼Œè¿™äº›å­è¿›ç¨‹çš„èµ„æºå°±ä¸ä¼šè¢«å›æ”¶ï¼Œæœ€ç»ˆå½¢æˆåƒµå°¸è¿›ç¨‹ã€‚ </p><p>å­¤å„¿è¿›ç¨‹ç›¸æ¯”äºåƒµå°¸è¿›ç¨‹æ¥è¯´ï¼Œå½±å“ç›¸å¯¹è¾ƒå°ã€‚è€Œåƒµå°¸è¿›ç¨‹çš„å­˜åœ¨ä¼šæµªè´¹ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä¸‹é™ã€‚ </p><p>ä¸‹é¢æ¼”ç¤ºä¸€ä¸‹ä¸¤ç§è¿›ç¨‹ï¼ˆPythonè¯­è¨€ï¼‰ï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python">python<span class="token keyword">import</span> os<span class="token keyword">import</span> time<span class="token comment"># åˆ›å»ºå­è¿›ç¨‹</span>pid <span class="token operator">=</span> os<span class="token punctuation">.</span>fork<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å¦‚æœ pid ä¸º 0ï¼Œåˆ™æ˜¯å­è¿›ç¨‹</span><span class="token keyword">if</span> pid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I am child process and my pid is:"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># çˆ¶è¿›ç¨‹æ‰§è¡Œæ­¤å†…å®¹</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I am parent process and my pid is:"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œå­è¿›ç¨‹æˆä¸ºåƒµå°¸è¿›ç¨‹</span>  time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†forkåˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¦‚æœpidä¸º0ï¼Œåˆ™æ˜¯å­è¿›ç¨‹ï¼Œå¦åˆ™æ˜¯çˆ¶è¿›ç¨‹ã€‚çˆ¶è¿›ç¨‹ç­‰å¾…5ç§’é’Ÿï¼Œæ­¤æ—¶å­è¿›ç¨‹ç»“æŸï¼Œä½†çˆ¶è¿›ç¨‹å´æ²¡æœ‰å›æ”¶å…¶èµ„æºï¼Œä»è€Œå½¢æˆäº†åƒµå°¸è¿›ç¨‹ã€‚</p><h3 id="13-è§£é‡Šå’Œè¯´æ˜ä½¿ç”¨forkåˆ›å»º10ä¸ªè¿›ç¨‹çš„æ–¹æ³•ï¼šä¸€ä¸ªçˆ¶è¿›ç¨‹åˆ›å»º10ä¸ªå­è¿›ç¨‹ï¼›æˆ–è€…å­è¿›ç¨‹ç»§ç»­åˆ›å»ºå­è¿›ç¨‹ã€‚"><a href="#13-è§£é‡Šå’Œè¯´æ˜ä½¿ç”¨forkåˆ›å»º10ä¸ªè¿›ç¨‹çš„æ–¹æ³•ï¼šä¸€ä¸ªçˆ¶è¿›ç¨‹åˆ›å»º10ä¸ªå­è¿›ç¨‹ï¼›æˆ–è€…å­è¿›ç¨‹ç»§ç»­åˆ›å»ºå­è¿›ç¨‹ã€‚" class="headerlink" title="13.è§£é‡Šå’Œè¯´æ˜ä½¿ç”¨forkåˆ›å»º10ä¸ªè¿›ç¨‹çš„æ–¹æ³•ï¼šä¸€ä¸ªçˆ¶è¿›ç¨‹åˆ›å»º10ä¸ªå­è¿›ç¨‹ï¼›æˆ–è€…å­è¿›ç¨‹ç»§ç»­åˆ›å»ºå­è¿›ç¨‹ã€‚"></a>13.è§£é‡Šå’Œè¯´æ˜ä½¿ç”¨forkåˆ›å»º10ä¸ªè¿›ç¨‹çš„æ–¹æ³•ï¼šä¸€ä¸ªçˆ¶è¿›ç¨‹åˆ›å»º10ä¸ªå­è¿›ç¨‹ï¼›æˆ–è€…å­è¿›ç¨‹ç»§ç»­åˆ›å»ºå­è¿›ç¨‹ã€‚</h3><p>ç­”ï¼šä½¿ç”¨forkåˆ›å»º10ä¸ªè¿›ç¨‹çš„æ–¹æ³•å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®ç°ï¼š</p><ol><li>ä¸€ä¸ªçˆ¶è¿›ç¨‹åˆ›å»º10ä¸ªå­è¿›ç¨‹ï¼š</li></ol><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  pid <span class="token operator">=</span> os<span class="token punctuation">.</span>fork<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> pid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I am child %d and my pid is %d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†forå¾ªç¯æ¥åˆ›å»º10ä¸ªå­è¿›ç¨‹ï¼Œæ¯ä¸ªå­è¿›ç¨‹è¾“å‡ºè‡ªå·±çš„ç¼–å·å’Œè¿›ç¨‹IDã€‚ä¸ºäº†é¿å…å­è¿›ç¨‹ä¹Ÿåˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†exit(0)æ¥è®©å­è¿›ç¨‹ç»“æŸè‡ªå·±çš„è¿è¡Œã€‚</p><ol start="2"><li>å­è¿›ç¨‹ç»§ç»­åˆ›å»ºå­è¿›ç¨‹ï¼š</li></ol><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">def</span> <span class="token function">create_process</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">if</span> num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I am the first child process and my pid is:"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    pid <span class="token operator">=</span> os<span class="token punctuation">.</span>fork<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> pid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I am child process %d and my pid is %d, my parent pid is %d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>num<span class="token punctuation">,</span> os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getppid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>      os<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Child process %d has terminated"</span> <span class="token operator">%</span> num<span class="token punctuation">)</span>      exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºç¬¬ä¸€ä¸ªå­è¿›ç¨‹</span>create_process<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºç¬¬ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç„¶ååœ¨create_processå‡½æ•°ä¸­ï¼Œæ¯ä¸ªå­è¿›ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­è¿›ç¨‹ï¼Œç›´åˆ°åˆ›å»ºäº†10ä¸ªå­è¿›ç¨‹ã€‚æ¯ä¸ªå­è¿›ç¨‹è¾“å‡ºè‡ªå·±çš„ç¼–å·ã€è¿›ç¨‹IDï¼Œä»¥åŠè‡ªå·±çš„çˆ¶è¿›ç¨‹IDã€‚å­è¿›ç¨‹ç»“æŸæ—¶ï¼Œä¼šè¾“å‡ºå­è¿›ç¨‹ç¼–å·ï¼Œç„¶åé€€å‡ºè‡ªå·±çš„è¿è¡Œã€‚</p><p>è¿™ä¸¤ç§æ–¹å¼çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ï¼Œè€Œç¬¬äºŒç§æ–¹å¼æ˜¯å­è¿›ç¨‹è‡ªå·±ç»§ç»­åˆ›å»ºæ–°çš„å­è¿›ç¨‹ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹å¼æ¥åˆ›å»ºå¤šä¸ªè¿›ç¨‹ã€‚</p><h3 id="14-æµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ -TASK-INTERRUPTIBLE-TASK-UNINTERRUPTIBLE-çš„åŒºåˆ«å’Œè”ç³»ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ï¼Ÿä»–ä»¬çš„åº”ç”¨åœºæ™¯ï¼Ÿèƒ½ä¸èƒ½æŠŠä»–ä»¬åˆäºŒä¸ºä¸€ï¼Ÿ"><a href="#14-æµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ -TASK-INTERRUPTIBLE-TASK-UNINTERRUPTIBLE-çš„åŒºåˆ«å’Œè”ç³»ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ï¼Ÿä»–ä»¬çš„åº”ç”¨åœºæ™¯ï¼Ÿèƒ½ä¸èƒ½æŠŠä»–ä»¬åˆäºŒä¸ºä¸€ï¼Ÿ" class="headerlink" title="14.æµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ (TASK_INTERRUPTIBLE TASK_UNINTERRUPTIBLE)çš„åŒºåˆ«å’Œè”ç³»ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ï¼Ÿä»–ä»¬çš„åº”ç”¨åœºæ™¯ï¼Ÿèƒ½ä¸èƒ½æŠŠä»–ä»¬åˆäºŒä¸ºä¸€ï¼Ÿ"></a>14.æµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ (TASK_INTERRUPTIBLE TASK_UNINTERRUPTIBLE)çš„åŒºåˆ«å’Œè”ç³»ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ï¼Ÿä»–ä»¬çš„åº”ç”¨åœºæ™¯ï¼Ÿèƒ½ä¸èƒ½æŠŠä»–ä»¬åˆäºŒä¸ºä¸€ï¼Ÿ</h3><p>ç­”ï¼šæµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ æ˜¯Linuxæ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹ä¼‘çœ çš„ä¸¤ç§æ–¹å¼ï¼Œå…¶ä¸­æµ…åº¦ç¡çœ ä¹Ÿç§°ä¸ºå¯ä¸­æ–­ç¡çœ ï¼ˆTASK_INTERRUPTIBLEï¼‰ï¼Œæ·±åº¦ç¡çœ ä¹Ÿç§°ä¸ºä¸å¯ä¸­æ–­ç¡çœ ï¼ˆTASK_UNINTERRUPTIBLEï¼‰ã€‚</p><p>ä¸¤ç§ç¡çœ çŠ¶æ€çš„åŒºåˆ«åœ¨äºï¼Œå¯ä¸­æ–­ç¡çœ çš„è¿›ç¨‹å¯ä»¥è¢«ä¿¡å·æ‰“æ–­è€Œå”¤é†’ï¼Œè€Œä¸å¯ä¸­æ–­ç¡çœ çš„è¿›ç¨‹åˆ™ä¸ä¼šè¢«ä¿¡å·æ‰“æ–­è€Œå”¤é†’ã€‚é€šå¸¸ï¼Œè¿›ç¨‹åœ¨æ‰§è¡Œç­‰å¾…æŸäº›äº‹ä»¶çš„æ“ä½œæ—¶ï¼Œä¼šè¿›å…¥ç¡çœ çŠ¶æ€ï¼Œç­‰åˆ°äº‹ä»¶å‘ç”Ÿæ—¶è¢«å”¤é†’ã€‚</p><p>åŒºåˆ†æµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ æ˜¯ä¸ºäº†æé«˜ç³»ç»Ÿæ•ˆç‡å’Œé¿å…æ­»é”ç­‰é—®é¢˜ã€‚å› ä¸ºåœ¨ç­‰å¾…æŸäº›äº‹ä»¶æ—¶ï¼Œå¦‚æœè¿›ç¨‹ä¸€ç›´å¤„äºå¯ä¸­æ–­ç¡çœ çŠ¶æ€ï¼Œå½“å‡ºç°æ–°çš„äº‹ä»¶æ—¶ï¼Œç³»ç»Ÿä¸éœ€è¦è¿›è¡Œé¢å¤–çš„æ“ä½œå°±å¯ä»¥è®©è¿›ç¨‹ç«‹å³è¢«å”¤é†’ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„å“åº”é€Ÿåº¦ã€‚è€Œä¸å¯ä¸­æ–­ç¡çœ çŠ¶æ€é€‚ç”¨äºç­‰å¾…æŸäº›å…³é”®èµ„æºï¼Œè¿™äº›èµ„æºå¿…é¡»è¢«ä¿è¯ä¸€ç›´å¯ç”¨ï¼Œå¦‚æœè¢«å…¶ä»–è¿›ç¨‹å ç”¨æˆ–è€…ç ´åï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šæˆ–è€…å´©æºƒã€‚</p><p>å®ƒä»¬çš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><p>- å¯ä¸­æ–­ç¡çœ å¸¸å¸¸åœ¨ç­‰å¾…ä¸€äº›ä¸æ˜¯å¾ˆé‡è¦çš„èµ„æºæ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚éœ€è¦è¯»å–ç½‘ç»œæ•°æ®æˆ–è€…ç­‰å¾…I&#x2F;Oè®¾å¤‡å“åº”ç­‰ã€‚</p><p>- ä¸å¯ä¸­æ–­ç¡çœ å¸¸å¸¸åœ¨ç­‰å¾…ç³»ç»Ÿä¸­éå¸¸é‡è¦çš„èµ„æºæˆ–è€…é«˜ä¼˜å…ˆçº§çš„æ“ä½œæ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚ç­‰å¾…æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æŸä¸ªå—æˆ–è€…ç­‰å¾…ç£ç›˜I&#x2F;Oå®Œæˆç­‰ã€‚</p><p>å°†æµ…åº¦ç¡çœ å’Œæ·±åº¦ç¡çœ åˆäºŒä¸ºä¸€æ˜¯ä¸å¯å–çš„ã€‚å› ä¸ºè¿™æ ·ä¼šå½±å“å¯¹èµ„æºçš„ç»†è‡´ç®¡ç†å’Œå¯¹ç³»ç»Ÿæ•ˆç‡çš„æå‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å¸Œæœ›ç­‰å¾…æŸä¸ªå…³é”®èµ„æºå§‹ç»ˆå¯ç”¨ï¼Œé‚£ä¹ˆæˆ‘éœ€è¦ä½¿å¾—è¿›ç¨‹è¿›å…¥ä¸å¯ä¸­æ–­ç¡çœ çŠ¶æ€ã€‚å¦‚æœå°†è¿™ä¸ªçŠ¶æ€åˆå¹¶åˆ°å¯ä¸­æ–­ç¡çœ ä¸­å°±ä¼šå¯¼è‡´åœ¨ç­‰å¾…ä¸é‡è¦èµ„æºæ—¶ä¹Ÿå¤„äºä¸å¯ä¸­æ–­ç¡çœ çŠ¶æ€ï¼Œè¿™ä¼šå¯¼è‡´ç³»ç»Ÿçš„èµ„æºæµªè´¹å’Œæ•ˆç‡é™ä½ã€‚å› æ­¤ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©ä¸åŒçš„ç¡çœ çŠ¶æ€ã€‚</p><hr><h2 id="å››-çº¿ç¨‹æ¦‚å¿µå’Œä¸´ç•ŒåŒº"><a href="#å››-çº¿ç¨‹æ¦‚å¿µå’Œä¸´ç•ŒåŒº" class="headerlink" title="å››.çº¿ç¨‹æ¦‚å¿µå’Œä¸´ç•ŒåŒº"></a>å››.çº¿ç¨‹æ¦‚å¿µå’Œä¸´ç•ŒåŒº</h2><h3 id="1-åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Œè§†é¢‘æ˜¯è®²ç”¨2ä¸ªçº¿ç¨‹ã€‚å¦‚æœ2ä¸ªè¿›ç¨‹ï¼Œèƒ½ä¸èƒ½åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#1-åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Œè§†é¢‘æ˜¯è®²ç”¨2ä¸ªçº¿ç¨‹ã€‚å¦‚æœ2ä¸ªè¿›ç¨‹ï¼Œèƒ½ä¸èƒ½åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Œè§†é¢‘æ˜¯è®²ç”¨2ä¸ªçº¿ç¨‹ã€‚å¦‚æœ2ä¸ªè¿›ç¨‹ï¼Œèƒ½ä¸èƒ½åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>1.åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Œè§†é¢‘æ˜¯è®²ç”¨2ä¸ªçº¿ç¨‹ã€‚å¦‚æœ2ä¸ªè¿›ç¨‹ï¼Œèƒ½ä¸èƒ½åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3><p>ç­”ï¼šåœ¨ç†è®ºä¸Šï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Œä½†å®ç°çš„éš¾åº¦è¾ƒå¤§ï¼Œå¹¶ä¸”å­˜åœ¨æ›´å¤šçš„é—®é¢˜ã€‚ä¸»è¦æ˜¯ç”±äºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å’ŒåŒæ­¥éœ€è¦é¢å¤–çš„å·¥ä½œã€‚</p><p>å¦‚æœä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«æ‰§è¡Œâ€œç”»åœ†â€å’Œâ€œç”»æ–¹â€è¿™ä¸¤ä¸ªä»»åŠ¡ï¼Œåˆ™éœ€è¦é€šè¿‡å…±äº«å†…å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ç­‰æœºåˆ¶è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ï¼Œä»¥ä¾¿å°†ç›¸å…³æ•°æ®å’Œæ§åˆ¶ä¿¡æ¯ä»ä¸€ä¸ªè¿›ç¨‹ä¼ é€’åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ã€‚</p><p>åŒæ—¶ï¼Œéœ€è¦è€ƒè™‘è¿›ç¨‹ä¹‹é—´çš„åŒæ­¥é—®é¢˜ã€‚ç”±äºè¿›ç¨‹æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œæµï¼Œå› æ­¤ä¸èƒ½åƒçº¿ç¨‹é‚£æ ·ä½¿ç”¨é”æˆ–æ¡ä»¶å˜é‡æ¥å®ç°åŒæ­¥ã€‚å¯ä»¥ä½¿ç”¨ä¿¡å·é‡ã€ç®¡é“ç­‰æœºåˆ¶å®ç°è¿›ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚</p><p>æ€»ä¹‹ï¼Œè™½ç„¶åœ¨ç†è®ºä¸Šä¸¤ä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥åŒæ—¶â€œç”»åœ†â€å’Œâ€œç”»æ–¹â€ï¼Œä½†æ˜¯ç”±äºéœ€è¦è¿›è¡Œé¢å¤–çš„è¿›ç¨‹é—´é€šä¿¡å’ŒåŒæ­¥ï¼Œä»¥åŠå®ç°å¤æ‚åº¦è¾ƒé«˜çš„å¹¶å‘æ§åˆ¶ï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å¤šçº¿ç¨‹æ¥å®ç°å¹¶å‘ä»»åŠ¡æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚</p><h3 id="2-çº¿ç¨‹ç›¸å¯¹äºè¿›ç¨‹çš„ä¼˜ç‚¹ï¼Œç¼ºç‚¹ï¼Ÿ"><a href="#2-çº¿ç¨‹ç›¸å¯¹äºè¿›ç¨‹çš„ä¼˜ç‚¹ï¼Œç¼ºç‚¹ï¼Ÿ" class="headerlink" title="2.çº¿ç¨‹ç›¸å¯¹äºè¿›ç¨‹çš„ä¼˜ç‚¹ï¼Œç¼ºç‚¹ï¼Ÿ"></a>2.çº¿ç¨‹ç›¸å¯¹äºè¿›ç¨‹çš„ä¼˜ç‚¹ï¼Œç¼ºç‚¹ï¼Ÿ</h3><p>ç­”ï¼šçº¿ç¨‹ç›¸å¯¹äºè¿›ç¨‹çš„ä¼˜ç‚¹ï¼š</p><ol><li><p>è½»é‡çº§ï¼šçº¿ç¨‹æ¯”è¿›ç¨‹æ›´åŠ è½»é‡ï¼Œçº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯å’Œåˆ‡æ¢æ‰€éœ€çš„æ—¶é—´æ›´çŸ­ï¼Œå ç”¨çš„ç³»ç»Ÿèµ„æºæ›´å°‘ã€‚</p></li><li><p>å…±äº«æ•°æ®ï¼šåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„æ‰€æœ‰çº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«æ•°æ®ï¼Œå› ä¸ºå®ƒä»¬éƒ½åœ¨åŒä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸­ï¼Œè€Œä¸éœ€è¦åƒè¿›ç¨‹é‚£æ ·ä½¿ç”¨IPCæœºåˆ¶æ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚</p></li><li><p>èµ„æºå…±äº«å’Œåˆ‡æ¢æ•ˆç‡é«˜ï¼šç”±äºçº¿ç¨‹ä¸åƒè¿›ç¨‹é‚£æ ·éœ€è¦æ‹·è´å†…å­˜ç©ºé—´å’Œæ–‡ä»¶å¥æŸ„ç­‰èµ„æºï¼Œæ‰€ä»¥çº¿ç¨‹çš„åˆ‡æ¢æ•ˆç‡æ›´é«˜ï¼Œè€Œä¸”åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹å¯ä»¥å…±äº«ç³»ç»Ÿèµ„æºã€‚</p></li><li><p>æ›´å¿«çš„å“åº”æ—¶é—´ï¼šç”±äºçº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯å’Œåˆ‡æ¢æ‰€éœ€çš„æ—¶é—´æ›´çŸ­ï¼Œè€Œä¸”çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ›´åŠ é«˜æ•ˆï¼Œæ‰€ä»¥çº¿ç¨‹å¯ä»¥æ¯”è¿›ç¨‹æ›´å¿«åœ°å“åº”ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>çº¿ç¨‹ç›¸å¯¹äºè¿›ç¨‹çš„ç¼ºç‚¹ï¼š</p><ol><li><p>å®¹æ˜“å½¢æˆæ­»é”ï¼šç”±äºä¸åŒçš„çº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´å’Œèµ„æºï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸¥æ ¼çš„åŒæ­¥æ“ä½œï¼Œå¦åˆ™å°±å®¹æ˜“å½¢æˆæ­»é”ã€‚</p></li><li><p>åˆ‡æ¢å¤æ‚åº¦é«˜ï¼šçº¿ç¨‹çš„åˆ‡æ¢éœ€è¦ä¿è¯å…±äº«èµ„æºçš„å®‰å…¨æ€§å’Œæ­£ç¡®æ€§ï¼Œéœ€è¦è¿›è¡Œæ›´å¤šçš„æ§åˆ¶å’ŒåŒæ­¥æ“ä½œï¼Œå› æ­¤çº¿ç¨‹çš„ç¼–ç¨‹å’Œè°ƒè¯•éš¾åº¦è¾ƒå¤§ã€‚</p></li><li><p>ç¼–ç¨‹éš¾åº¦è¾ƒé«˜ï¼šåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œéœ€è¦è€ƒè™‘å¾ˆå¤šåŒæ­¥å’Œé€šä¿¡çš„é—®é¢˜ï¼ŒåŒæ—¶éœ€è¦é¿å…ä¸€äº›ç”±äºçº¿ç¨‹ä¹‹é—´çš„ç«äº‰é€ æˆçš„é—®é¢˜ï¼Œå› æ­¤ç¼–ç¨‹éš¾åº¦æ¯”å•çº¿ç¨‹ç¼–ç¨‹æ›´é«˜ã€‚</p></li><li><p>å®¹æ˜“å—åˆ°å¹¶å‘é—®é¢˜çš„å½±å“ï¼šåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ä¹‹é—´å…±äº«èµ„æºï¼Œå®¹æ˜“é€ æˆçº¿ç¨‹ä¹‹é—´çš„ç«äº‰è€Œå¯¼è‡´å¹¶å‘é—®é¢˜ï¼Œå¦‚æ­»é”ã€ä¿¡å·é‡ç«äº‰ç­‰ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶çº¿ç¨‹ç›¸æ¯”è¿›ç¨‹å…·æœ‰ä¸€äº›ä¼˜ç‚¹ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨çº¿ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„åŒæ­¥å’Œé€šä¿¡çš„é—®é¢˜ï¼Œé¿å…äº§ç”Ÿå¹¶å‘é—®é¢˜ï¼Œå¹¶ä¸”éœ€è¦è¿›è¡Œè¾ƒå¤šçš„å¤æ‚ç¼–ç¨‹å’Œè°ƒè¯•å·¥ä½œã€‚åŒæ—¶ï¼Œçº¿ç¨‹ä¹Ÿæ— æ³•åšåˆ°å’Œè¿›ç¨‹å®Œå…¨åˆ†ç¦»çš„éš”ç¦»ï¼Œå› æ­¤éœ€è¦åœ¨å…·ä½“çš„åº”ç”¨åœºæ™¯ä¸­ç»“åˆå®é™…æƒ…å†µæ¥é€‰æ‹©ä½¿ç”¨çº¿ç¨‹è¿˜æ˜¯è¿›ç¨‹ã€‚</p></li></ol><h3 id="3-ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„åŒºåˆ«"><a href="#3-ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="3.ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„åŒºåˆ«"></a>3.ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„åŒºåˆ«</h3><p>ç­”ï¼šç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„ä¸¤ç§ä¸åŒå®ç°æ–¹å¼ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>å®ç°æ–¹å¼ä¸åŒã€‚ç”¨æˆ·çº§çº¿ç¨‹æ˜¯ç”±ç”¨æˆ·ç¨‹åºåº“å®ç°çš„å¤šçº¿ç¨‹ï¼Œä¸éœ€è¦å†…æ ¸çš„æ”¯æŒï¼Œå› æ­¤å®ƒæ˜¯åŸºäºç”¨æˆ·ç©ºé—´çš„ã€‚å†…æ ¸çº§çº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„å¤šçº¿ç¨‹ï¼Œéœ€è¦ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚</p></li><li><p>çº¿ç¨‹è°ƒåº¦ä¸åŒã€‚ç”¨æˆ·çº§çº¿ç¨‹çš„è°ƒåº¦æ˜¯ç”±ç”¨æˆ·è¿›ç¨‹è‡ªå·±è´Ÿè´£çš„ï¼Œæ‰€ä»¥çº¿ç¨‹åˆ‡æ¢çš„ä»£ä»·æ¯”è¾ƒå°ã€‚å†…æ ¸çº§çº¿ç¨‹çš„è°ƒåº¦æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸è´Ÿè´£çš„ï¼Œå› æ­¤çº¿ç¨‹åˆ‡æ¢çš„ä»£ä»·æ¯”è¾ƒå¤§ï¼Œéœ€è¦è¿›è¡Œä¸Šä¸‹æ–‡çš„åˆ‡æ¢å’Œå†…æ ¸æ€å’Œç”¨æˆ·æ€ä¹‹é—´çš„è½¬æ¢ã€‚</p></li><li><p>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ä¸åŒã€‚ç”¨æˆ·çº§çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åªæ˜¯åœ¨ç”¨æˆ·ç©ºé—´ä¸­è¿›è¡Œçš„ï¼Œå› æ­¤å¼€é”€æ¯”è¾ƒå°ã€‚å†…æ ¸çº§çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢è¦ç»è¿‡å†…æ ¸çš„ä»‹å…¥ï¼Œå› æ­¤å¼€é”€æ¯”è¾ƒå¤§ã€‚</p></li><li><p>çº¿ç¨‹é—´é€šä¿¡çš„å®ç°æ–¹å¼ä¸åŒã€‚ç”±äºç”¨æˆ·çº§çº¿ç¨‹æ˜¯åœ¨ç”¨æˆ·ç©ºé—´ä¸­å®ç°çš„ï¼Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡éœ€è¦ä½¿ç”¨ç”¨æˆ·ç©ºé—´çš„æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ã€ç®¡é“å’Œå…±äº«å†…å­˜ç­‰ã€‚è€Œå†…æ ¸çº§çº¿ç¨‹çš„é€šä¿¡éœ€è¦ä½¿ç”¨å†…æ ¸ç©ºé—´çš„æœºåˆ¶ï¼Œå¦‚è¿›ç¨‹é—´é€šä¿¡(IPC)ç­‰ã€‚</p></li><li><p>å¯é æ€§ä¸åŒã€‚ç”±äºå†…æ ¸çº§çº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸è¿›è¡Œç®¡ç†çš„ï¼Œå› æ­¤å®ƒå…·æœ‰æ›´é«˜çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚è€Œç”±äºç”¨æˆ·çº§çº¿ç¨‹æ˜¯ç”±ç”¨æˆ·ç¨‹åºåº“è¿›è¡Œç®¡ç†çš„ï¼Œå› æ­¤å®ƒçš„å¯é æ€§å’Œç¨³å®šæ€§è¾ƒä½ã€‚</p><p>æ€»ä¹‹ï¼Œç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ç°æ–¹å¼ã€è°ƒåº¦ã€ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€çº¿ç¨‹é—´é€šä¿¡çš„å®ç°æ–¹å¼å’Œå¯é æ€§ç­‰æ–¹é¢ï¼Œå¼€å‘äººå‘˜éœ€è¦æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯å’Œéœ€æ±‚é€‰æ‹©ä½¿ç”¨å“ªç§å®ç°æ–¹å¼ã€‚</p></li></ol><h3 id="4-å±•ç¤ºå¤šçº¿ç¨‹ç¼–ç¨‹ï¼šå…¨å±€å˜é‡åˆå§‹å€¼ä¸º0ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«-1ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«-1ï¼Œè¾“å‡ºç»“æœ"><a href="#4-å±•ç¤ºå¤šçº¿ç¨‹ç¼–ç¨‹ï¼šå…¨å±€å˜é‡åˆå§‹å€¼ä¸º0ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«-1ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«-1ï¼Œè¾“å‡ºç»“æœ" class="headerlink" title="4.å±•ç¤ºå¤šçº¿ç¨‹ç¼–ç¨‹ï¼šå…¨å±€å˜é‡åˆå§‹å€¼ä¸º0ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«+1ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«-1ï¼Œè¾“å‡ºç»“æœ"></a>4.å±•ç¤ºå¤šçº¿ç¨‹ç¼–ç¨‹ï¼šå…¨å±€å˜é‡åˆå§‹å€¼ä¸º0ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«+1ï¼Œ5ä¸ªçº¿ç¨‹æ¯ä¸ªåˆ†åˆ«-1ï¼Œè¾“å‡ºç»“æœ</h3><p>ç­”ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªç”¨C++å®ç°å¤šçº¿ç¨‹çš„ä¾‹å­ï¼Œå®ç°äº†å…¨å±€å˜é‡åŠ å‡çš„æ“ä½œï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;mutex&gt;&#x2F;&#x2F; å…¨å±€å˜é‡volatile int global_var &#x3D; 0;&#x2F;&#x2F; äº’æ–¥é”std::mutex mtx;&#x2F;&#x2F; åŠ æ“ä½œvoid add_operation() &#123;    for (int i &#x3D; 0; i &lt; 1000000; i++) &#123;        mtx.lock();        global_var++;        mtx.unlock();    &#125;&#125;&#x2F;&#x2F; å‡æ“ä½œvoid dec_operation() &#123;    for (int i &#x3D; 0; i &lt; 1000000; i++) &#123;        mtx.lock();        global_var--;        mtx.unlock();    &#125;&#125;int main() &#123;    &#x2F;&#x2F; åˆ›å»ºåŠ å’Œå‡çš„çº¿ç¨‹    std::thread add_threads[5];    std::thread dec_threads[5];    &#x2F;&#x2F; å¯åŠ¨åŠ å’Œå‡çš„çº¿ç¨‹    for (int i &#x3D; 0; i &lt; 5; i++) &#123;        add_threads[i] &#x3D; std::thread(add_operation);        dec_threads[i] &#x3D; std::thread(dec_operation);    &#125;    &#x2F;&#x2F; ç­‰å¾…çº¿ç¨‹ç»“æŸ    for (int i &#x3D; 0; i &lt; 5; i++) &#123;        add_threads[i].join();        dec_threads[i].join();    &#125;    &#x2F;&#x2F; è¾“å‡ºå…¨å±€å˜é‡    std::cout &lt;&lt; &quot;global_var: &quot; &lt;&lt; global_var &lt;&lt; std::endl;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†C++çš„æ ‡å‡†çº¿ç¨‹åº“ï¼Œå®šä¹‰äº†ä¸¤ä¸ªå‡½æ•°add_operation()å’Œdec_operation()ï¼Œåˆ†åˆ«æ‰§è¡ŒåŠ æ“ä½œå’Œå‡æ“ä½œï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ1000000æ¬¡ã€‚ä½¿ç”¨äº’æ–¥é”ä¿è¯çº¿ç¨‹ä¹‹é—´çš„é¡ºåºå’Œæ“ä½œçš„æ­£ç¡®æ€§ã€‚æœ€åè¾“å‡ºå…¨å±€å˜é‡çš„å€¼ã€‚ç”±äºå­˜åœ¨çº¿ç¨‹ä¹‹é—´çš„ç«äº‰å’Œå¹¶å‘é—®é¢˜ï¼Œå› æ­¤è¾“å‡ºçš„å€¼å¯èƒ½ä¸æ˜¯0ã€‚</p><h3 id="5-ä»€ä¹ˆæ˜¯ä¸´ç•Œèµ„æºï¼Ÿä¸¾ä¾‹å“ªäº›æ˜¯ä¸´ç•Œèµ„æºï¼Œå“ªäº›ä¸æ˜¯ï¼Ÿ"><a href="#5-ä»€ä¹ˆæ˜¯ä¸´ç•Œèµ„æºï¼Ÿä¸¾ä¾‹å“ªäº›æ˜¯ä¸´ç•Œèµ„æºï¼Œå“ªäº›ä¸æ˜¯ï¼Ÿ" class="headerlink" title="5.ä»€ä¹ˆæ˜¯ä¸´ç•Œèµ„æºï¼Ÿä¸¾ä¾‹å“ªäº›æ˜¯ä¸´ç•Œèµ„æºï¼Œå“ªäº›ä¸æ˜¯ï¼Ÿ"></a>5.ä»€ä¹ˆæ˜¯ä¸´ç•Œèµ„æºï¼Ÿä¸¾ä¾‹å“ªäº›æ˜¯ä¸´ç•Œèµ„æºï¼Œå“ªäº›ä¸æ˜¯ï¼Ÿ</h3><p>ç­”ï¼šä¸´ç•Œèµ„æºæ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æ€§çš„å…±äº«èµ„æºã€‚å½“ä¸”ä»…å½“åœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€æ“ä½œçš„å…±äº«èµ„æºå°±æ˜¯ä¸´ç•Œèµ„æºã€‚æ­¤æ—¶éœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼ˆå¦‚äº’æ–¥é‡ã€æ¡ä»¶å˜é‡ç­‰ï¼‰æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p><p>ä¸´ç•Œèµ„æºçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯å®ƒçš„è®¿é—®å¿…é¡»æ˜¯äº’æ–¥çš„ï¼ˆMutual Exclusionï¼‰ï¼Œå³åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®æˆ–ä¿®æ”¹ã€‚å¸¸è§çš„ä¸´ç•Œèµ„æºåŒ…æ‹¬ï¼šå…±äº«å†…å­˜ã€å…±äº«æ•°æ®ç»“æ„ã€ç³»ç»Ÿä¸­çš„ç½‘ç»œæˆ–IOä¿¡æ¯ç­‰ã€‚ä¾‹å¦‚ï¼š</p><ol><li><p>å…¨å±€å˜é‡ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«çš„å…¨å±€å˜é‡é€šå¸¸æ˜¯ä¸´ç•Œèµ„æºï¼Œå› ä¸ºå¤šä¸ªçº¿ç¨‹ä¿®æ”¹å…¨å±€å˜é‡æ—¶éœ€è¦é‡‡ç”¨åŒæ­¥æœºåˆ¶è¿›è¡Œäº’æ–¥è®¿é—®ï¼Œå¦åˆ™å¯èƒ½ä¼šäº§ç”Ÿç«æ€å¼‚å¸¸ã€‚</p></li><li><p>ä¸´æ—¶å˜é‡ï¼šçº¿ç¨‹å‡½æ•°å†…çš„ç§æœ‰å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹ä¹‹é—´äº’ä¸å¹²æ‰°ï¼Œå› æ­¤ä¸æ˜¯ä¸´ç•Œèµ„æºã€‚</p></li><li><p>å‡½æ•°å±€éƒ¨å˜é‡ï¼šæ¯ä¸ªçº¿ç¨‹ä¹‹é—´ï¼Œåœ¨å„è‡ªçš„å‡½æ•°æ ˆç©ºé—´å†…ï¼Œç§æœ‰ç‹¬ç«‹ï¼Œçº¿ç¨‹ä¹‹é—´ä¸ä¼šäº§ç”Ÿå†²çªï¼Œä¹Ÿä¸æ˜¯ä¸´ç•Œèµ„æºã€‚</p></li><li><p>å †å†…å­˜å’Œæ ˆå†…å­˜ï¼šå­˜å‚¨æŒ‡é’ˆæˆ–å¼•ç”¨çš„å†…å­˜åŒºé—´å¯èƒ½æ˜¯ä¸´ç•Œèµ„æºï¼Œå› ä¸ºå¤šä¸ªçº¿ç¨‹æœ‰å¯èƒ½åŒæ—¶ä½¿ç”¨è¯¥æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä¸”è®¿é—®çš„å¯¹è±¡å¯èƒ½äº’ç›¸å½±å“ï¼Œéœ€è¦é€šè¿‡åŒæ­¥æœºåˆ¶è¿›è¡Œè®¿é—®æ§åˆ¶ã€‚</p></li><li><p>æ–‡ä»¶åŠæ•°æ®æµï¼šå¤šä¸ªçº¿ç¨‹çš„æ–‡ä»¶è®¿é—®ä¼šäº§ç”Ÿç«äº‰ï¼Œå› æ­¤æ–‡ä»¶åŠæ•°æ®æµä¹Ÿå±äºä¸´ç•Œèµ„æºã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œä¸´ç•Œèµ„æºæ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹è¿‡ç¨‹ä¸­éœ€è¦å…³æ³¨çš„é‡è¦é—®é¢˜ï¼Œéœ€è¦å¼€å‘äººå‘˜ä»”ç»†åˆ†æéœ€è¦åŒæ­¥å’Œä¿æŠ¤çš„èµ„æºï¼Œåˆ¶å®šç›¸åº”çš„åŒæ­¥è§„åˆ™å’Œæœºåˆ¶ï¼Œä»¥ä¿è¯çº¿ç¨‹çš„æ­£ç¡®å¹¶å‘æ‰§è¡Œã€‚</p><h3 id="6-ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Ÿä¸¾ä¾‹è¯´æ˜å“ªäº›æ˜¯ä¸´ç•ŒåŒºï¼Œä¸´ç•ŒåŒºçš„å¤§å°ï¼Œä¸´ç•ŒåŒºçš„æ•°é‡"><a href="#6-ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Ÿä¸¾ä¾‹è¯´æ˜å“ªäº›æ˜¯ä¸´ç•ŒåŒºï¼Œä¸´ç•ŒåŒºçš„å¤§å°ï¼Œä¸´ç•ŒåŒºçš„æ•°é‡" class="headerlink" title="6.ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Ÿä¸¾ä¾‹è¯´æ˜å“ªäº›æ˜¯ä¸´ç•ŒåŒºï¼Œä¸´ç•ŒåŒºçš„å¤§å°ï¼Œä¸´ç•ŒåŒºçš„æ•°é‡"></a>6.ä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Ÿä¸¾ä¾‹è¯´æ˜å“ªäº›æ˜¯ä¸´ç•ŒåŒºï¼Œä¸´ç•ŒåŒºçš„å¤§å°ï¼Œä¸´ç•ŒåŒºçš„æ•°é‡</h3><p>ç­”ï¼šä¸´ç•ŒåŒºæ˜¯æŒ‡ä¸€ä¸ªå…±äº«èµ„æºè¢«å¤šä¸ªå¹¶å‘è¿›ç¨‹æˆ–çº¿ç¨‹åŒæ—¶è®¿é—®æ—¶ï¼Œå¯èƒ½å¼•å‘å†²çªçš„ä»£ç åŒºåŸŸã€‚åœ¨è¿™ä¸ªåŒºåŸŸå†…ï¼Œä»»æ„ä¸¤ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹éƒ½ä¸èƒ½åŒæ—¶è®¿é—®å…±äº«èµ„æºï¼Œå¦åˆ™ä¼šå‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä¸¾ä¾‹è¯´æ˜ä¸´ç•ŒåŒºçš„æƒ…å†µï¼š</p><ol><li>å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹åŒæ—¶è¯»å†™åŒä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li><li>å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹åŒæ—¶å‘åŒä¸€ä¸ªæ–‡ä»¶å†™å…¥æ•°æ®ã€‚</li><li>å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªæ•°æ®åº“çš„æŸä¸ªè¡¨ã€‚</li></ol><p>ä¸´ç•ŒåŒºçš„å¤§å°å–å†³äºä»£ç çš„å…·ä½“å®ç°å’Œæ‰€æ¶‰åŠçš„å…±äº«èµ„æºã€‚ä¾‹å¦‚ï¼Œåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä¸´ç•ŒåŒºåŒ…å«å¯¹å…¨å±€å˜é‡è¿›è¡Œè¯»å†™çš„ä»£ç è¡Œã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä¸´ç•ŒåŒºåŒ…å«å‘æ–‡ä»¶å†™å…¥æ•°æ®çš„ä»£ç è¡Œã€‚åœ¨ç¬¬ä¸‰ä¸ªä¾‹å­ä¸­ï¼Œä¸´ç•ŒåŒºåŒ…å«å¯¹æ•°æ®åº“è¡¨è¿›è¡Œè¯»å†™çš„ä»£ç è¡Œã€‚</p><p>ä¸´ç•ŒåŒºçš„æ•°é‡ä¹Ÿå–å†³äºä»£ç çš„å®ç°å’Œæ‰€æ¶‰åŠçš„å…±äº«èµ„æºã€‚æ¯ä¸ªå…±äº«èµ„æºéƒ½å¯èƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸´ç•ŒåŒºï¼Œè¿™å–å†³äºå¤šå°‘ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹éœ€è¦è®¿é—®è¯¥èµ„æºä»¥åŠå¦‚ä½•è®¿é—®å®ƒã€‚å› æ­¤ï¼Œå…·ä½“æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p><h3 id="7-æ•™æp117ï¼Œä»£ç 4-26ï¼Œè¿™ç§æ–¹å¼ä¿æŠ¤ä¸´ç•ŒåŒºæœ‰ä½•é—®é¢˜ï¼Ÿå¦‚ä¸‹å›¾è¿›è¡Œè¯´æ˜æç¤ºï¼šåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¼šä¸æ»¡è¶³â€œå¿™åˆ™ç­‰å¾…â€ã€‚"><a href="#7-æ•™æp117ï¼Œä»£ç 4-26ï¼Œè¿™ç§æ–¹å¼ä¿æŠ¤ä¸´ç•ŒåŒºæœ‰ä½•é—®é¢˜ï¼Ÿå¦‚ä¸‹å›¾è¿›è¡Œè¯´æ˜æç¤ºï¼šåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¼šä¸æ»¡è¶³â€œå¿™åˆ™ç­‰å¾…â€ã€‚" class="headerlink" title="7.æ•™æp117ï¼Œä»£ç 4-26ï¼Œè¿™ç§æ–¹å¼ä¿æŠ¤ä¸´ç•ŒåŒºæœ‰ä½•é—®é¢˜ï¼Ÿå¦‚ä¸‹å›¾è¿›è¡Œè¯´æ˜æç¤ºï¼šåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¼šä¸æ»¡è¶³â€œå¿™åˆ™ç­‰å¾…â€ã€‚"></a>7.æ•™æp117ï¼Œä»£ç 4-26ï¼Œè¿™ç§æ–¹å¼ä¿æŠ¤ä¸´ç•ŒåŒºæœ‰ä½•é—®é¢˜ï¼Ÿå¦‚ä¸‹å›¾è¿›è¡Œè¯´æ˜æç¤ºï¼šåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¼šä¸æ»¡è¶³â€œå¿™åˆ™ç­‰å¾…â€ã€‚</h3><p>ç­”ï¼šå˜é‡flagæ²¡æœ‰è¿›è¡ŒåŒæ­¥ä¿æŠ¤ï¼šå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è®¿é—®flagå˜é‡ï¼Œå¦‚æœä¸è¿›è¡ŒåŒæ­¥ä¿æŠ¤ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰çš„å‘ç”Ÿï¼Œè¿›è€Œå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br>whileå¾ªç¯ä¸­æ²¡æœ‰è¿›è¡Œä¼‘çœ æ“ä½œï¼šå¦‚æœflagå˜é‡ä¸€ç›´ä¸ºtrueï¼Œwhileå¾ªç¯ä¼šä¸€ç›´å ç”¨CPUèµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿè´Ÿè½½è¿‡é«˜ã€‚<br>gå˜é‡çš„è¯»å†™æ“ä½œæ²¡æœ‰è¿›è¡ŒåŒæ­¥ä¿æŠ¤ï¼šå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è®¿é—®gå˜é‡ï¼Œå¦‚æœä¸è¿›è¡ŒåŒæ­¥ä¿æŠ¤ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç«æ€æ¡ä»¶çš„å‘ç”Ÿï¼Œè¿›è€Œå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br>ä¸´ç•ŒåŒºçš„é•¿åº¦è¿‡é•¿ï¼šä¸´ç•ŒåŒºåŒ…å«äº†whileå¾ªç¯å’Œifè¯­å¥ï¼Œä¸”åŒ…å«äº†å¯¹å¤šä¸ªå…±äº«å˜é‡çš„è®¿é—®ï¼Œä¸´ç•ŒåŒºçš„é•¿åº¦è¿‡é•¿ï¼Œä¼šé™ä½ç¨‹åºçš„å¹¶å‘æ€§èƒ½ã€‚</p><h3 id="8-2ä¸ªçº¿ç¨‹åŒæ­¥å¯¹gæ“ä½œï¼Œåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¸æ»¡è¶³â€œç©ºé—²è®©è¿›â€"><a href="#8-2ä¸ªçº¿ç¨‹åŒæ­¥å¯¹gæ“ä½œï¼Œåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¸æ»¡è¶³â€œç©ºé—²è®©è¿›â€" class="headerlink" title="8.2ä¸ªçº¿ç¨‹åŒæ­¥å¯¹gæ“ä½œï¼Œåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¸æ»¡è¶³â€œç©ºé—²è®©è¿›â€"></a>8.2ä¸ªçº¿ç¨‹åŒæ­¥å¯¹gæ“ä½œï¼Œåœ¨æŸä¸ªåœ°æ–¹åˆ‡æ¢ï¼Œä¸æ»¡è¶³â€œç©ºé—²è®©è¿›â€</h3><p>ç­”ï¼šç©ºé—²è®©è¿›ï¼šå½“æ²¡æœ‰ä»»ä½•è¿›ç¨‹å¤„äºä¸´ç•ŒåŒºçš„æ—¶å€™ï¼Œå³æ²¡æœ‰ä»»ä½•è¿›ç¨‹æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºï¼Œæ­¤æ—¶ä»»ä½•è®¿é—®ä¸´ç•Œèµ„æºçš„è¿›ç¨‹éƒ½èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚2ä¸ªçº¿ç¨‹åŒæ­¥å¯¹gæ“ä½œï¼Œåœ¨æŸä¸ªç¨‹åºæ®µå‘ç”Ÿäº†åˆ‡æ¢ï¼Œä½†æ²¡æœ‰æ‰§è¡Œç©ºé—²è®©è¿›æ“ä½œï¼Œå³æ­¤æ—¶è¿™æ®µä¸´ç•ŒåŒºæ— çº¿ç¨‹è®¿é—®ã€‚åˆ™å¯èƒ½å¯¼è‡´è¿›ç¨‹å´©æºƒæˆ–è€…çº¿ç¨‹æ­»é”ã€‚å› æ­¤å¿…é¡»è®¾å®šåˆç†çš„é”å’ŒåŒæ­¥è¿›åˆ¶ï¼Œä¿è¯çº¿ç¨‹æœ‰åºåœ°è®¿é—®ä¸´ç•Œèµ„æºã€‚åŒæ—¶åº”è¯¥éµå¾ªè®¿é—®ä¸´ç•ŒåŒºçš„å››ä¸ªå‡†åˆ™ï¼šå¿™åˆ™ç­‰å¾…ï¼Œç©ºé—²è®©è¿›ï¼Œä¼˜å…ˆç­‰å¾…ï¼Œè®©æƒç­‰å¾…ï¼Œä¿è¯ç¨‹åºå¤„äºå®‰å…¨çš„çŠ¶æ€ã€‚</p><hr><h2 id="äº”-åŒæ­¥äº’æ–¥å’Œé”æœºåˆ¶"><a href="#äº”-åŒæ­¥äº’æ–¥å’Œé”æœºåˆ¶" class="headerlink" title="äº”.åŒæ­¥äº’æ–¥å’Œé”æœºåˆ¶"></a>äº”.åŒæ­¥äº’æ–¥å’Œé”æœºåˆ¶</h2><h3 id="1-åˆ†æï¼šPVè§£å†³äº’æ–¥çš„è§†é¢‘ä¸­ï¼Œmutex-2æ—¶ï¼Œç»“æœæ˜¯æ€æ ·çš„"><a href="#1-åˆ†æï¼šPVè§£å†³äº’æ–¥çš„è§†é¢‘ä¸­ï¼Œmutex-2æ—¶ï¼Œç»“æœæ˜¯æ€æ ·çš„" class="headerlink" title="1.åˆ†æï¼šPVè§£å†³äº’æ–¥çš„è§†é¢‘ä¸­ï¼Œmutex&#x3D;2æ—¶ï¼Œç»“æœæ˜¯æ€æ ·çš„"></a>1.åˆ†æï¼šPVè§£å†³äº’æ–¥çš„è§†é¢‘ä¸­ï¼Œmutex&#x3D;2æ—¶ï¼Œç»“æœæ˜¯æ€æ ·çš„</h3><p>ç­”ï¼šå¯¹äºPVé—®é¢˜ï¼ŒPè¡¨ç¤ºç”Ÿäº§è€…ï¼ŒVè¡¨ç¤ºæ¶ˆè´¹è€…ã€‚å…¶ä¸­ï¼Œmutexè¡¨ç¤ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„äº’æ–¥é‡ï¼Œç”¨æ¥ä¿è¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„åŒæ­¥ã€‚</p><p>åœ¨PVé—®é¢˜ä¸­ï¼Œå½“mutex&#x3D;2æ—¶ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå…·ä½“æƒ…å†µå–å†³äºé—®é¢˜çš„å…·ä½“å®ç°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œmutex&#x3D;2æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ol><li>æ­»é”ï¼šå¦‚æœç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½ç­‰å¾…å¯¹æ–¹é‡Šæ”¾mutexï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ­»é”çš„æƒ…å†µã€‚æ­¤æ—¶ï¼Œç¨‹åºæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œéœ€è¦é€šè¿‡å¢åŠ äº’æ–¥é‡çš„æ•°é‡æˆ–ä¿®æ”¹ç¨‹åºé€»è¾‘æ¥è§£å†³ã€‚</li><li>éæ³•è®¿é—®ï¼šå¦‚æœå¤šä¸ªç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…åŒæ—¶è®¿é—®å…±äº«èµ„æºï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šå‡ºç°éæ³•è®¿é—®çš„æƒ…å†µï¼Œå¯¼è‡´ç¨‹åºå´©æºƒæˆ–æ•°æ®æŸåã€‚æ­¤æ—¶ï¼Œéœ€è¦å¢åŠ äº’æ–¥é‡çš„æ•°é‡æˆ–ä¿®æ”¹ç¨‹åºé€»è¾‘æ¥è§£å†³ã€‚</li><li>æ­£å¸¸æ‰§è¡Œï¼šå¦‚æœäº’æ–¥é‡çš„æ•°é‡æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆç¨‹åºå°±å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´å¯ä»¥æ­£ç¡®åœ°åŒæ­¥ï¼Œä¿è¯å…±äº«èµ„æºçš„å®‰å…¨è®¿é—®ã€‚</li></ol><p>æ€»ä¹‹ï¼Œåœ¨PVé—®é¢˜ä¸­ï¼Œæ­£ç¡®è®¾ç½®äº’æ–¥é‡çš„æ•°é‡éå¸¸é‡è¦ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…æ­»é”å’Œéæ³•è®¿é—®ç­‰é—®é¢˜ï¼Œä¿è¯ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚</p><h3 id="2-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆ1ä¸ªç”Ÿäº§è€…ï¼Œ1ä¸ªæ¶ˆè´¹è€…ï¼Œ1ä¸ªç¼“å†²åŒº"><a href="#2-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆ1ä¸ªç”Ÿäº§è€…ï¼Œ1ä¸ªæ¶ˆè´¹è€…ï¼Œ1ä¸ªç¼“å†²åŒº" class="headerlink" title="2.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆ1ä¸ªç”Ÿäº§è€…ï¼Œ1ä¸ªæ¶ˆè´¹è€…ï¼Œ1ä¸ªç¼“å†²åŒº"></a>2.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆ1ä¸ªç”Ÿäº§è€…ï¼Œ1ä¸ªæ¶ˆè´¹è€…ï¼Œ1ä¸ªç¼“å†²åŒº</h3><p>ç­”ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++ä»£ç ç¤ºä¾‹ï¼Œå®ç°äº†ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç”Ÿäº§è€…ã€ä¸€ä¸ªæ¶ˆè´¹è€…å’Œä¸€ä¸ªç¼“å†²åŒºã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç¼“å†²åŒºä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ä¿å­˜ç”Ÿäº§è€…äº§ç”Ÿçš„æ•°æ®ã€‚</p><figure><div class="code-wrapper"><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;thread&gt;#include &lt;mutex&gt;#include &lt;condition_variable&gt;using namespace std;const int BUFFER_SIZE &#x3D; 5;queue&lt;int&gt; buffer;mutex mtx;condition_variable cond_var;void producer() &#123;    int num &#x3D; 0;    while (true) &#123;        unique_lock&lt;mutex&gt; lock(mtx);        while (buffer.size() &#x3D;&#x3D; BUFFER_SIZE) &#123;            &#x2F;&#x2F; ç¼“å†²åŒºå·²æ»¡ï¼Œç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹            cond_var.wait(lock);        &#125;        &#x2F;&#x2F; ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®        buffer.push(num++);        cout &lt;&lt; &quot;Producer produced &quot; &lt;&lt; num &lt;&lt; endl;        &#x2F;&#x2F; é€šçŸ¥æ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹        cond_var.notify_one();    &#125;&#125;void consumer() &#123;    while (true) &#123;        unique_lock&lt;mutex&gt; lock(mtx);        while (buffer.empty()) &#123;            &#x2F;&#x2F; ç¼“å†²åŒºä¸ºç©ºï¼Œç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§            cond_var.wait(lock);        &#125;        &#x2F;&#x2F; æ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®        int num &#x3D; buffer.front();        buffer.pop();        cout &lt;&lt; &quot;Consumer consumed &quot; &lt;&lt; num &lt;&lt; endl;        &#x2F;&#x2F; é€šçŸ¥ç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§        cond_var.notify_one();    &#125;&#125;int main() &#123;    thread t1(producer);    thread t2(consumer);    t1.join();    t2.join();    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹éƒ½å¤„äºä¸€ä¸ªæ— é™å¾ªç¯ä¸­ã€‚å½“ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§å®Œæ•°æ®åï¼Œä¼šé€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹å¯ä»¥æ¶ˆè´¹ï¼Œç„¶åç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å®Œæ•°æ®åå†ç»§ç»­ç”Ÿäº§ï¼›å½“æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å®Œæ•°æ®åï¼Œä¼šé€šçŸ¥ç”Ÿäº§è€…çº¿ç¨‹å¯ä»¥ç»§ç»­ç”Ÿäº§ï¼Œç„¶åç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§å®Œæ•°æ®åå†ç»§ç»­æ¶ˆè´¹ã€‚</p><p>å…¶ä¸­ï¼Œä½¿ç”¨äº†äº’æ–¥é‡<code>mtx</code>æ¥ä¿è¯åœ¨è®¿é—®ç¼“å†²åŒºæ—¶çš„çº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨äº†æ¡ä»¶å˜é‡<code>cond_var</code>æ¥å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„åŒæ­¥ã€‚å½“ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¼šè°ƒç”¨<code>cond_var.wait(lock)</code>æ¥ç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹æ•°æ®ï¼Œæ­¤æ—¶ä¼šé‡Šæ”¾<code>mtx</code>ï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ï¼›å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä¼šè°ƒç”¨<code>cond_var.wait(lock)</code>æ¥ç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§æ•°æ®ï¼Œæ­¤æ—¶ä¼šé‡Šæ”¾<code>mtx</code>ï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ã€‚å½“ç”Ÿäº§è€…ç”Ÿäº§å®Œæ•°æ®åï¼Œä¼šè°ƒç”¨<code>cond_var.notify_one()</code>æ¥é€šçŸ¥ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„æ¶ˆè´¹è€…çº¿ç¨‹å¯ä»¥æ¶ˆè´¹ï¼›å½“æ¶ˆè´¹è€…æ¶ˆè´¹å®Œæ•°æ®åï¼Œä¼šè°ƒç”¨<code>cond_var.notify_one()</code>æ¥é€šçŸ¥ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„ç”Ÿäº§è€…çº¿ç¨‹å¯ä»¥ç”Ÿäº§ã€‚</p><h3 id="3-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆå¤šä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…"><a href="#3-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆå¤šä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…" class="headerlink" title="3.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆå¤šä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…"></a>3.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ”¹æˆå¤šä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…</h3><p>ç­”ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++ä»£ç ç¤ºä¾‹ï¼Œå®ç°äº†ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå…¶ä¸­æœ‰å¤šä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç¼“å†²åŒºä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ä¿å­˜ç”Ÿäº§è€…äº§ç”Ÿçš„æ•°æ®ã€‚</p><figure><div class="code-wrapper"><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;thread&gt;#include &lt;mutex&gt;#include &lt;condition_variable&gt;using namespace std;const int BUFFER_SIZE &#x3D; 5;queue&lt;int&gt; buffer;mutex mtx;condition_variable cond_var;void producer(int id) &#123;    int num &#x3D; id * 10;    while (true) &#123;        unique_lock&lt;mutex&gt; lock(mtx);        while (buffer.size() &#x3D;&#x3D; BUFFER_SIZE) &#123;            &#x2F;&#x2F; ç¼“å†²åŒºå·²æ»¡ï¼Œç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹            cond_var.wait(lock);        &#125;        &#x2F;&#x2F; ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®        buffer.push(num++);        cout &lt;&lt; &quot;Producer &quot; &lt;&lt; id &lt;&lt; &quot; produced &quot; &lt;&lt; num &lt;&lt; endl;        &#x2F;&#x2F; é€šçŸ¥æ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹        cond_var.notify_one();        lock.unlock();        this_thread::sleep_for(chrono::milliseconds(1000));    &#125;&#125;void consumer() &#123;    while (true) &#123;        unique_lock&lt;mutex&gt; lock(mtx);        while (buffer.empty()) &#123;            &#x2F;&#x2F; ç¼“å†²åŒºä¸ºç©ºï¼Œç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§            cond_var.wait(lock);        &#125;        &#x2F;&#x2F; æ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®        int num &#x3D; buffer.front();        buffer.pop();        cout &lt;&lt; &quot;Consumer consumed &quot; &lt;&lt; num &lt;&lt; endl;        &#x2F;&#x2F; é€šçŸ¥ç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§        cond_var.notify_one();        lock.unlock();        this_thread::sleep_for(chrono::milliseconds(1000));    &#125;&#125;int main() &#123;    const int NUM_PRODUCERS &#x3D; 3;    thread producers[NUM_PRODUCERS];    for (int i &#x3D; 0; i &lt; NUM_PRODUCERS; i++) &#123;        producers[i] &#x3D; thread(producer, i);    &#125;    thread consumer_thread(consumer);    for (int i &#x3D; 0; i &lt; NUM_PRODUCERS; i++) &#123;        producers[i].join();    &#125;    consumer_thread.join();    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œæœ‰å¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹å’Œä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ï¼Œç”Ÿäº§è€…çº¿ç¨‹é€šè¿‡ä¼ å…¥çš„idæ¥åŒºåˆ†ä¸åŒçš„ç”Ÿäº§è€…ã€‚å½“ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§å®Œæ•°æ®åï¼Œä¼šé€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹å¯ä»¥æ¶ˆè´¹ï¼Œç„¶åç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å®Œæ•°æ®åå†ç»§ç»­ç”Ÿäº§ï¼›å½“æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å®Œæ•°æ®åï¼Œä¼šé€šçŸ¥ç”Ÿäº§è€…çº¿ç¨‹å¯ä»¥ç»§ç»­ç”Ÿäº§ï¼Œç„¶åç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§å®Œæ•°æ®åå†ç»§ç»­æ¶ˆè´¹ã€‚</p><p>å…¶ä¸­ï¼Œä½¿ç”¨äº†äº’æ–¥é‡<code>mtx</code>æ¥ä¿è¯åœ¨è®¿é—®ç¼“å†²åŒºæ—¶çš„çº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨äº†æ¡ä»¶å˜é‡<code>cond_var</code>æ¥å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„åŒæ­¥ã€‚å½“ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¼šè°ƒç”¨<code>cond_var.wait(lock)</code>æ¥ç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹æ•°æ®ï¼Œæ­¤æ—¶ä¼šé‡Šæ”¾<code>mtx</code>ï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ï¼›å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä¼šè°ƒç”¨<code>cond_var.wait(lock)</code>æ¥ç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§æ•°æ®ï¼Œæ­¤æ—¶ä¼šé‡Šæ”¾&#96;</p><h3 id="4-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œä¿®æ”¹é™åˆ¶ï¼šç”Ÿæˆè€…å’Œæ¶ˆè´¹è€…å¯ä»¥åŒæ—¶è¿›å…¥ç¼“å†²åŒº"><a href="#4-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œä¿®æ”¹é™åˆ¶ï¼šç”Ÿæˆè€…å’Œæ¶ˆè´¹è€…å¯ä»¥åŒæ—¶è¿›å…¥ç¼“å†²åŒº" class="headerlink" title="4.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œä¿®æ”¹é™åˆ¶ï¼šç”Ÿæˆè€…å’Œæ¶ˆè´¹è€…å¯ä»¥åŒæ—¶è¿›å…¥ç¼“å†²åŒº"></a>4.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œä¿®æ”¹é™åˆ¶ï¼šç”Ÿæˆè€…å’Œæ¶ˆè´¹è€…å¯ä»¥åŒæ—¶è¿›å…¥ç¼“å†²åŒº</h3><p>ç­”ï¼šåœ¨åŸå…ˆçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¿…é¡»è½®æµåœ°è¿›å…¥ç¼“å†²åŒºï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›ä¸å¿…è¦çš„ç­‰å¾…ã€‚å¦‚æœæˆ‘ä»¬å…è®¸ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åŒæ—¶è¿›å…¥ç¼“å†²åŒºï¼Œå°±å¯ä»¥æ›´é«˜æ•ˆåœ°åˆ©ç”¨èµ„æºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++ä»£ç ç¤ºä¾‹ï¼Œå®ç°äº†ä¸€ä¸ªå…è®¸ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åŒæ—¶è¿›å…¥ç¼“å†²åŒºçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ã€‚</p><figure><div class="code-wrapper"><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;thread&gt;#include &lt;mutex&gt;#include &lt;condition_variable&gt;using namespace std;const int BUFFER_SIZE &#x3D; 5;queue&lt;int&gt; buffer;mutex mtx;condition_variable cond_var;void producer(int id) &#123;    int num &#x3D; id * 10;    while (true) &#123;        unique_lock&lt;mutex&gt; lock(mtx);        while (buffer.size() &#x3D;&#x3D; BUFFER_SIZE) &#123;            &#x2F;&#x2F; ç¼“å†²åŒºå·²æ»¡ï¼Œç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹            cond_var.wait(lock);        &#125;        &#x2F;&#x2F; ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®        buffer.push(num++);        cout &lt;&lt; &quot;Producer &quot; &lt;&lt; id &lt;&lt; &quot; produced &quot; &lt;&lt; num &lt;&lt; endl;        &#x2F;&#x2F; é€šçŸ¥æ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹        cond_var.notify_one();        lock.unlock();        &#x2F;&#x2F; ç”Ÿäº§è€…è¿›å…¥ç¼“å†²åŒº        this_thread::sleep_for(chrono::milliseconds(500));    &#125;&#125;void consumer(int id) &#123;    while (true) &#123;        unique_lock&lt;mutex&gt; lock(mtx);        if (buffer.empty()) &#123;            &#x2F;&#x2F; ç¼“å†²åŒºä¸ºç©ºï¼Œç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§            cond_var.wait(lock);        &#125;        else &#123;            &#x2F;&#x2F; æ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®            int num &#x3D; buffer.front();            buffer.pop();            cout &lt;&lt; &quot;Consumer &quot; &lt;&lt; id &lt;&lt; &quot; consumed &quot; &lt;&lt; num &lt;&lt; endl;            &#x2F;&#x2F; é€šçŸ¥ç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§            cond_var.notify_one();            lock.unlock();            &#x2F;&#x2F; æ¶ˆè´¹è€…è¿›å…¥ç¼“å†²åŒº            this_thread::sleep_for(chrono::milliseconds(500));        &#125;    &#125;&#125;int main() &#123;    const int NUM_PRODUCERS &#x3D; 3;    const int NUM_CONSUMERS &#x3D; 2;    thread producers[NUM_PRODUCERS];    for (int i &#x3D; 0; i &lt; NUM_PRODUCERS; i++) &#123;        producers[i] &#x3D; thread(producer, i);    &#125;    thread consumers[NUM_CONSUMERS];    for (int i &#x3D; 0; i &lt; NUM_CONSUMERS; i++) &#123;        consumers[i] &#x3D; thread(consumer, i);    &#125;    for (int i &#x3D; 0; i &lt; NUM_PRODUCERS; i++) &#123;        producers[i].join();    &#125;    for (int i &#x3D; 0; i &lt; NUM_CONSUMERS; i++) &#123;        consumers[i].join();    &#125;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œæœ‰å¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹å’Œä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ï¼Œç”Ÿäº§è€…çº¿ç¨‹é€šè¿‡ä¼ å…¥çš„idæ¥åŒºåˆ†ä¸åŒçš„ç”Ÿäº§è€…ã€‚å½“ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§å®Œæ•°æ®åï¼Œä¼šé€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹å¯ä»¥æ¶ˆè´¹ï¼Œç„¶åç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å®Œæ•°æ®åå†ç»§ç»­ç”Ÿäº§ï¼›å½“æ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å®Œæ•°æ®åï¼Œä¼šé€šçŸ¥ç”Ÿäº§è€…çº¿ç¨‹å¯ä»¥ç»§ç»­ç”Ÿäº§ï¼Œç„¶åç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§å®Œæ•°æ®åå†ç»§ç»­æ¶ˆè´¹ã€‚</p><h3 id="5-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œ-P-empty-å’Œ-P-mutex-äº¤æ¢ï¼Œå…¶ä»–ä¸å˜ï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœï¼Ÿ"><a href="#5-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œ-P-empty-å’Œ-P-mutex-äº¤æ¢ï¼Œå…¶ä»–ä¸å˜ï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœï¼Ÿ" class="headerlink" title="5.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œ( P(empty) å’Œ P(mutex) )äº¤æ¢ï¼Œå…¶ä»–ä¸å˜ï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœï¼Ÿ"></a>5.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œ( P(empty) å’Œ P(mutex) )äº¤æ¢ï¼Œå…¶ä»–ä¸å˜ï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœï¼Ÿ</h3><p>ç­”ï¼šåœ¨æ ‡å‡†çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ä¸¤ä¸ªä¿¡å·é‡<code>empty</code>å’Œ<code>full</code>æ¥è¡¨ç¤ºç¼“å†²åŒºçš„çŠ¶æ€ã€‚å…¶ä¸­ï¼Œ<code>empty</code>è¡¨ç¤ºç¼“å†²åŒºä¸ºç©ºçš„èµ„æºæ•°ï¼Œå½“ç”Ÿäº§è€…å‘ç¼“å†²åŒºä¸­ç”Ÿäº§æ•°æ®æ—¶ï¼Œéœ€è¦è·å–<code>empty</code>ä¿¡å·é‡ï¼Œå¦‚æœ<code>empty</code>ä¿¡å·é‡ä¸º0ï¼Œåˆ™ç”Ÿäº§è€…éœ€è¦ç­‰å¾…ï¼›<code>full</code>è¡¨ç¤ºç¼“å†²åŒºä¸ºæ»¡çš„èµ„æºæ•°ï¼Œå½“æ¶ˆè´¹è€…ä»ç¼“å†²åŒºä¸­æ¶ˆè´¹æ•°æ®æ—¶ï¼Œéœ€è¦è·å–<code>full</code>ä¿¡å·é‡ï¼Œå¦‚æœ<code>full</code>ä¿¡å·é‡ä¸º0ï¼Œåˆ™æ¶ˆè´¹è€…éœ€è¦ç­‰å¾…ã€‚</p><p>å¦‚æœå°†ç”Ÿäº§è€…çš„ä¸¤ä¸ªPæ“ä½œ( P(empty) å’Œ P(mutex) )äº¤æ¢ï¼Œå…¶ä»–ä¸å˜ï¼Œä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li>ç”Ÿäº§è€…åœ¨è·å–<code>empty</code>ä¿¡å·é‡ä¹‹å‰ï¼Œå·²ç»è·å–äº†<code>mutex</code>äº’æ–¥ä¿¡å·é‡ï¼Œè¿™æ„å‘³ç€ç”Ÿäº§è€…å¯ä»¥è®¿é—®ç¼“å†²åŒºï¼Œä½†æ˜¯ç¼“å†²åŒºå¯èƒ½å·²ç»æ»¡äº†ï¼Œå¦‚æœæ­¤æ—¶ç”Ÿäº§è€…å‘ç¼“å†²åŒºä¸­å†™å…¥æ•°æ®ï¼Œä¼šå¯¼è‡´æ•°æ®è¦†ç›–å’Œä¸¢å¤±ã€‚</li><li>å¦‚æœç”Ÿäº§è€…è·å–äº†<code>empty</code>ä¿¡å·é‡ä¹‹åï¼Œæ‰å»è·å–<code>mutex</code>äº’æ–¥ä¿¡å·é‡ï¼Œé‚£ä¹ˆç”Ÿäº§è€…åœ¨è·å–<code>mutex</code>ä¿¡å·é‡ä¹‹å‰ï¼Œå…¶ä»–ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…å¯èƒ½å·²ç»è®¿é—®äº†ç¼“å†²åŒºï¼Œæ­¤æ—¶ç”Ÿäº§è€…éœ€è¦ç­‰å¾…ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç”Ÿäº§è€…æ— æ³•åŠæ—¶å°†æ•°æ®å†™å…¥ç¼“å†²åŒºï¼Œä»è€Œé™ä½ç³»ç»Ÿçš„æ•ˆç‡ã€‚</li></ol><p>å› æ­¤ï¼Œäº¤æ¢ç”Ÿäº§è€…çš„ä¸¤ä¸ªPæ“ä½œ( P(empty) å’Œ P(mutex) )ä¼šå¯¼è‡´ç”Ÿäº§è€…åœ¨è®¿é—®ç¼“å†²åŒºæ—¶å­˜åœ¨é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´æˆ–ç«æ€æ¡ä»¶çš„é—®é¢˜ã€‚</p><h3 id="6-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œå’Œæ¶ˆè´¹è€…ä¸¤ä¸ªPæ“ä½œåŒæ—¶äº¤æ¢é¡ºåºï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœ"><a href="#6-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œå’Œæ¶ˆè´¹è€…ä¸¤ä¸ªPæ“ä½œåŒæ—¶äº¤æ¢é¡ºåºï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœ" class="headerlink" title="6.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œå’Œæ¶ˆè´¹è€…ä¸¤ä¸ªPæ“ä½œåŒæ—¶äº¤æ¢é¡ºåºï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœ?"></a>6.ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç”Ÿäº§è€…ä¸¤ä¸ªPæ“ä½œå’Œæ¶ˆè´¹è€…ä¸¤ä¸ªPæ“ä½œåŒæ—¶äº¤æ¢é¡ºåºï¼Œä¼šæ˜¯æ€æ ·çš„ç»“æœ?</h3><p>ç­”ï¼šå¦‚æœå°†ç”Ÿäº§è€…çš„ä¸¤ä¸ªPæ“ä½œå’Œæ¶ˆè´¹è€…çš„ä¸¤ä¸ªPæ“ä½œåŒæ—¶äº¤æ¢é¡ºåºï¼Œä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li>ç”Ÿäº§è€…å…ˆæ‰§è¡ŒP(mutex)æ“ä½œï¼Œè·å–äº†ç¼“å†²åŒºçš„äº’æ–¥ä¿¡å·é‡ï¼Œä½†æ­¤æ—¶ç¼“å†²åŒºå¯èƒ½å·²ç»æ»¡äº†ï¼Œå¦‚æœç”Ÿäº§è€…æ­¤æ—¶å‘ç¼“å†²åŒºä¸­å†™å…¥æ•°æ®ï¼Œä¼šå¯¼è‡´æ•°æ®è¦†ç›–å’Œä¸¢å¤±ã€‚</li><li>æ¶ˆè´¹è€…å…ˆæ‰§è¡ŒP(empty)æ“ä½œï¼Œè·å–äº†ç¼“å†²åŒºçš„ç©ºé—²èµ„æºæ•°ï¼Œä½†æ­¤æ—¶ç¼“å†²åŒºå¯èƒ½ä¸ºç©ºï¼Œå¦‚æœæ¶ˆè´¹è€…æ­¤æ—¶ä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®ï¼Œä¼šå¯¼è‡´è¯»å–åˆ°é”™è¯¯çš„æ•°æ®æˆ–è€…å‡ºç°æ­»é”çš„æƒ…å†µã€‚</li></ol><p>å› æ­¤ï¼Œç”Ÿäº§è€…çš„ä¸¤ä¸ªPæ“ä½œå’Œæ¶ˆè´¹è€…çš„ä¸¤ä¸ªPæ“ä½œåŒæ—¶äº¤æ¢é¡ºåºæ˜¯ä¸æ­£ç¡®çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ— æ³•æ­£å¸¸è®¿é—®ç¼“å†²åŒºï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿçš„å¼‚å¸¸å’Œæ•ˆç‡é™ä½ã€‚</p><h3 id="7-ç”¨ä¿¡å·é‡å®ç°å‰é©±å›¾ï¼š"><a href="#7-ç”¨ä¿¡å·é‡å®ç°å‰é©±å›¾ï¼š" class="headerlink" title="7.ç”¨ä¿¡å·é‡å®ç°å‰é©±å›¾ï¼š"></a>7.ç”¨ä¿¡å·é‡å®ç°å‰é©±å›¾ï¼š</h3><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">å‡è®¾ä»¥ä¸‹6ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­æŸä¸ªæ—¶åˆ»è¦æ‰§è¡Œçš„è¿ç®—è¯­å¥å¦‚ä¸‹ï¼šS1: a = 3+4ï¼›S2: b = 2+1ï¼›S3: c = a-bï¼›S4: w = c+1ï¼› S5: t = c+a S6: z = w+tä¿¡å·é‡å®ç°è¿›ç¨‹çš„å‰è¶‹å…³ç³»æç¤ºï¼šç¬¬1æ­¥ï¼Œç”»å‡ºå‰é©±å›¾ï¼›ç¬¬2æ­¥ï¼šå›¾ä¸Šå†™å‡ºä¿¡å·é‡ï¼›ç¬¬3æ­¥ï¼šä¼ªä»£ç å†™å‡ºç¨‹åº<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>ç­”ï¼šå‰é©±å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token constant">P1</span>       <span class="token constant">P2</span>       <span class="token constant">P3</span>       <span class="token constant">P4</span>       <span class="token constant">P5</span>       <span class="token constant">P6</span><span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span><span class="token constant">S1</span>       <span class="token constant">S2</span>       <span class="token constant">S3</span>       <span class="token constant">S4</span>       <span class="token constant">S5</span>       <span class="token constant">S6</span><span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span>        <span class="token operator">|</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-></span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><ol><li>æ ¹æ®å‰é©±å›¾ï¼Œå¯ä»¥å®šä¹‰ä»¥ä¸‹ä¿¡å·é‡ï¼š</li></ol><ul><li>sem1ï¼šç”¨äºP2ç­‰å¾…P1æ‰§è¡Œå®ŒS1ã€‚</li><li>sem2ï¼šç”¨äºP3ç­‰å¾…P1å’ŒP2æ‰§è¡Œå®ŒS1å’ŒS2ã€‚</li><li>sem3ï¼šç”¨äºP4ç­‰å¾…P3æ‰§è¡Œå®ŒS3ã€‚</li><li>sem4ï¼šç”¨äºP5ç­‰å¾…P3å’ŒP4æ‰§è¡Œå®ŒS3å’ŒS4ã€‚</li><li>sem5ï¼šç”¨äºP6ç­‰å¾…P4å’ŒP5æ‰§è¡Œå®ŒS4å’ŒS5ã€‚</li></ul><ol><li>æ ¹æ®ä»¥ä¸Šä¿¡å·é‡ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ä¼ªä»£ç ç¨‹åºï¼š</li></ol><figure><div class="code-wrapper"><pre class="line-numbers language-scss" data-language="scss"><code class="language-scss">scssCopy codesemaphore sem1 = 0<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ä¸º0</span>semaphore sem2 = 0<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ä¸º0</span>semaphore sem3 = 0<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ä¸º0</span>semaphore sem4 = 0<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ä¸º0</span>semaphore sem5 = 0<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ä¸º0</span><span class="token selector">process P1 </span><span class="token punctuation">&#123;</span>    S1<span class="token punctuation">;</span>    <span class="token function">V</span><span class="token punctuation">(</span>sem1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// S1æ‰§è¡Œå®Œåé‡Šæ”¾sem1</span><span class="token punctuation">&#125;</span><span class="token selector">process P2 </span><span class="token punctuation">&#123;</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem1</span>    S2<span class="token punctuation">;</span>    <span class="token function">V</span><span class="token punctuation">(</span>sem2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// S2æ‰§è¡Œå®Œåé‡Šæ”¾sem2</span><span class="token punctuation">&#125;</span><span class="token selector">process P3 </span><span class="token punctuation">&#123;</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem1</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem2</span>    S3<span class="token punctuation">;</span>    <span class="token function">V</span><span class="token punctuation">(</span>sem3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// S3æ‰§è¡Œå®Œåé‡Šæ”¾sem3</span><span class="token punctuation">&#125;</span><span class="token selector">process P4 </span><span class="token punctuation">&#123;</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem3</span>    S4<span class="token punctuation">;</span>    <span class="token function">V</span><span class="token punctuation">(</span>sem4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// S4æ‰§è¡Œå®Œåé‡Šæ”¾sem4</span><span class="token punctuation">&#125;</span><span class="token selector">process P5 </span><span class="token punctuation">&#123;</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem3</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem4</span>    S5<span class="token punctuation">;</span>    <span class="token function">V</span><span class="token punctuation">(</span>sem5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// S5æ‰§è¡Œå®Œåé‡Šæ”¾sem5</span><span class="token punctuation">&#125;</span><span class="token selector">process P6 </span><span class="token punctuation">&#123;</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem4</span>    <span class="token function">P</span><span class="token punctuation">(</span>sem5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…sem5</span>    S6<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨ä¸Šè¿°ç¨‹åºä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨æ‰§è¡Œåˆ°éœ€è¦ç­‰å¾…çš„è¯­å¥æ—¶ï¼Œä¼šé€šè¿‡Pæ“ä½œæ¥ç­‰å¾…å…¶å‰é©±è¿›ç¨‹å®Œæˆï¼Œé€šè¿‡Væ“ä½œæ¥å”¤é†’å…¶åç»§è¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹åœ¨å®Œæˆä»»åŠ¡åï¼Œä¼šé‡Šæ”¾ç›¸åº”çš„ä¿¡å·é‡ï¼Œä»¥å…è®¸å…¶åç»§è¿›ç¨‹ç»§ç»­æ‰§è¡Œã€‚</p><h3 id="8-è¿‡æ¡¥é—®é¢˜ï¼šç‹¬æœ¨æ¡¥ï¼ŒåŒä¸€æ–¹å‘çš„è¡Œäººå¯è¿ç»­è¿‡æ¡¥ï¼Œå½“æŸä¸€æ–¹å‘æœ‰äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¿…é¡»ç­‰å¾…ï¼›å½“æŸä¸€æ–¹å‘æ— äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¯ä»¥è¿‡æ¡¥ã€‚å°†ç‹¬æœ¨æ¡¥çš„ä¸¤ä¸ªæ–¹å‘åˆ†åˆ«æ ‡è®°ä¸º-A-å’Œ-Bï¼›ä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«æ˜¯PAå’ŒPBã€‚ç”¨PVæ“ä½œæ€§ï¼Œå†™å‡ºä¼ªä»£ç ï¼Œè§£å†³è¿‡æ¡¥é—®é¢˜ã€‚"><a href="#8-è¿‡æ¡¥é—®é¢˜ï¼šç‹¬æœ¨æ¡¥ï¼ŒåŒä¸€æ–¹å‘çš„è¡Œäººå¯è¿ç»­è¿‡æ¡¥ï¼Œå½“æŸä¸€æ–¹å‘æœ‰äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¿…é¡»ç­‰å¾…ï¼›å½“æŸä¸€æ–¹å‘æ— äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¯ä»¥è¿‡æ¡¥ã€‚å°†ç‹¬æœ¨æ¡¥çš„ä¸¤ä¸ªæ–¹å‘åˆ†åˆ«æ ‡è®°ä¸º-A-å’Œ-Bï¼›ä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«æ˜¯PAå’ŒPBã€‚ç”¨PVæ“ä½œæ€§ï¼Œå†™å‡ºä¼ªä»£ç ï¼Œè§£å†³è¿‡æ¡¥é—®é¢˜ã€‚" class="headerlink" title="8.è¿‡æ¡¥é—®é¢˜ï¼šç‹¬æœ¨æ¡¥ï¼ŒåŒä¸€æ–¹å‘çš„è¡Œäººå¯è¿ç»­è¿‡æ¡¥ï¼Œå½“æŸä¸€æ–¹å‘æœ‰äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¿…é¡»ç­‰å¾…ï¼›å½“æŸä¸€æ–¹å‘æ— äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¯ä»¥è¿‡æ¡¥ã€‚å°†ç‹¬æœ¨æ¡¥çš„ä¸¤ä¸ªæ–¹å‘åˆ†åˆ«æ ‡è®°ä¸º A å’Œ Bï¼›ä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«æ˜¯PAå’ŒPBã€‚ç”¨PVæ“ä½œæ€§ï¼Œå†™å‡ºä¼ªä»£ç ï¼Œè§£å†³è¿‡æ¡¥é—®é¢˜ã€‚"></a>8.è¿‡æ¡¥é—®é¢˜ï¼šç‹¬æœ¨æ¡¥ï¼ŒåŒä¸€æ–¹å‘çš„è¡Œäººå¯è¿ç»­è¿‡æ¡¥ï¼Œå½“æŸä¸€æ–¹å‘æœ‰äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¿…é¡»ç­‰å¾…ï¼›å½“æŸä¸€æ–¹å‘æ— äººè¿‡æ¡¥æ—¶ï¼Œå¦ä¸€æ–¹å‘çš„è¡Œäººå¯ä»¥è¿‡æ¡¥ã€‚å°†ç‹¬æœ¨æ¡¥çš„ä¸¤ä¸ªæ–¹å‘åˆ†åˆ«æ ‡è®°ä¸º A å’Œ Bï¼›ä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«æ˜¯PAå’ŒPBã€‚ç”¨PVæ“ä½œæ€§ï¼Œå†™å‡ºä¼ªä»£ç ï¼Œè§£å†³è¿‡æ¡¥é—®é¢˜ã€‚</h3><p>ç­”ï¼šä»¥ä¸‹æ˜¯ä½¿ç”¨PVæ“ä½œè§£å†³è¿‡æ¡¥é—®é¢˜çš„ä¼ªä»£ç ï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// åˆå§‹åŒ–è¿‡æ¡¥çŠ¶æ€ä¸ºAæ–¹å‘</span>state = <span class="token string">"A"</span><span class="token comment">// å®šä¹‰è®¡æ•°ä¿¡å·é‡</span>num_people_on_bridge = 0mutex = 1<span class="token comment">// å®šä¹‰PVæ“ä½œå‡½æ•°</span>function <span class="token function">P</span><span class="token punctuation">(</span>semaphore<span class="token punctuation">)</span><span class="token punctuation">:</span>    while semaphore <span class="token operator">&lt;=</span> <span class="token property">0</span><span class="token punctuation">:</span>        <span class="token comment">// ç­‰å¾…ä¿¡å·é‡å¯ç”¨</span>    semaphore -= 1function <span class="token function">V</span><span class="token punctuation">(</span>semaphore<span class="token punctuation">)</span><span class="token punctuation">:</span>    semaphore += 1<span class="token comment">// å®šä¹‰Aæ–¹å‘è¿‡æ¡¥å‡½æ•°</span>function cross_bridge_<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    while num_people_on_bridge <span class="token operator">></span> 0 <span class="token operator">or</span> state <span class="token operator">==</span> <span class="token string">"B"</span><span class="token punctuation">:</span>        <span class="token comment">// ç­‰å¾…Aæ–¹å‘å¯ä»¥è¿‡æ¡¥çš„çŠ¶æ€</span>        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge += 1    state = <span class="token string">"B"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    <span class="token comment">// è¿‡æ¡¥æ“ä½œ</span>    <span class="token comment">// ...</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge -= 1    if num_people_on_bridge <span class="token operator">==</span> <span class="token property">0</span><span class="token punctuation">:</span>        state = <span class="token string">"A"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token comment">// å®šä¹‰Bæ–¹å‘è¿‡æ¡¥å‡½æ•°</span>function cross_bridge_<span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    while num_people_on_bridge <span class="token operator">></span> 0 <span class="token operator">or</span> state <span class="token operator">==</span> <span class="token string">"A"</span><span class="token punctuation">:</span>        <span class="token comment">// ç­‰å¾…Bæ–¹å‘å¯ä»¥è¿‡æ¡¥çš„çŠ¶æ€</span>        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge += 1    state = <span class="token string">"A"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    <span class="token comment">// è¿‡æ¡¥æ“ä½œ</span>    <span class="token comment">// ...</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge -= 1    if num_people_on_bridge <span class="token operator">==</span> <span class="token property">0</span><span class="token punctuation">:</span>        state = <span class="token string">"B"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token comment">// åˆå§‹åŒ–è¡Œäººæ•°ç»„</span>people = [<span class="token string">"A1"</span><span class="token punctuation">,</span> <span class="token string">"A2"</span><span class="token punctuation">,</span> <span class="token string">"A3"</span><span class="token punctuation">,</span> <span class="token string">"B1"</span><span class="token punctuation">,</span> <span class="token string">"B2"</span><span class="token punctuation">,</span> <span class="token string">"B3"</span>]<span class="token comment">// å¯åŠ¨è¿‡æ¡¥è¿›ç¨‹</span>for i = 1 to <span class="token function">length</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span><span class="token punctuation">:</span>    if people[i][0] <span class="token operator">==</span> <span class="token string">"A"</span><span class="token punctuation">:</span>        start_<span class="token function">process</span><span class="token punctuation">(</span>cross_bridge_A<span class="token punctuation">)</span>    <span class="token property">else</span><span class="token punctuation">:</span>        start_<span class="token function">process</span><span class="token punctuation">(</span>cross_bridge_B<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªè®¡æ•°ä¿¡å·é‡ <code>num_people_on_bridge</code> æ¥è®°å½•æ¡¥ä¸Šçš„äººæ•°ï¼Œä½¿ç”¨ä¸€ä¸ªäº’æ–¥ä¿¡å·é‡ <code>mutex</code> æ¥ä¿è¯å¤šä¸ªè¿›ç¨‹ä¸ä¼šåŒæ—¶ä¿®æ”¹å…±äº«å˜é‡ã€‚<code>state</code> å˜é‡ç”¨äºè®°å½•å½“å‰è¿‡æ¡¥çš„æ–¹å‘ï¼ŒA æˆ– Bã€‚åœ¨è¿‡æ¡¥å‰ï¼Œæ¯ä¸ªè¿›ç¨‹ä¼šå…ˆç­‰å¾…å½“å‰æ–¹å‘å¯ä»¥è¿‡æ¡¥çš„çŠ¶æ€ï¼Œç„¶åæ‰§è¡Œè¿‡æ¡¥æ“ä½œï¼Œå¹¶åœ¨è¿‡æ¡¥åæ›´æ–°æ¡¥ä¸Šçš„äººæ•°å’Œå½“å‰è¿‡æ¡¥çš„æ–¹å‘ã€‚æœ€åï¼Œæ‰€æœ‰è¡Œäººçš„è¿‡æ¡¥æ“ä½œåœ¨å¤šä¸ªè¿›ç¨‹ä¸­å¹¶å‘æ‰§è¡Œã€‚</p><h3 id="9-ç‹¬æœ¨æ¡¥é—®é¢˜ç»§ç»­ï¼šæ¡¥æœ€å¤šæ‰¿è½½Mä¸ªäººï¼Œå¦‚ä½•è§£å†³"><a href="#9-ç‹¬æœ¨æ¡¥é—®é¢˜ç»§ç»­ï¼šæ¡¥æœ€å¤šæ‰¿è½½Mä¸ªäººï¼Œå¦‚ä½•è§£å†³" class="headerlink" title="9.ç‹¬æœ¨æ¡¥é—®é¢˜ç»§ç»­ï¼šæ¡¥æœ€å¤šæ‰¿è½½Mä¸ªäººï¼Œå¦‚ä½•è§£å†³?"></a>9.ç‹¬æœ¨æ¡¥é—®é¢˜ç»§ç»­ï¼šæ¡¥æœ€å¤šæ‰¿è½½Mä¸ªäººï¼Œå¦‚ä½•è§£å†³?</h3><p>ç­”ï¼šä»¥ä¸‹æ˜¯ä½¿ç”¨PVæ“ä½œè§£å†³è¿‡æ¡¥é—®é¢˜ï¼Œå¹¶ä¸”é™åˆ¶æ¡¥æœ€å¤šæ‰¿è½½Mä¸ªäººçš„ä¼ªä»£ç ï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// åˆå§‹åŒ–è¿‡æ¡¥çŠ¶æ€ä¸ºAæ–¹å‘</span>state = <span class="token string">"A"</span><span class="token comment">// å®šä¹‰è®¡æ•°ä¿¡å·é‡å’Œé™åˆ¶ä¿¡å·é‡</span>num_people_on_bridge = 0max_people_on_bridge = Mmutex = 1<span class="token comment">// å®šä¹‰PVæ“ä½œå‡½æ•°</span>function <span class="token function">P</span><span class="token punctuation">(</span>semaphore<span class="token punctuation">)</span><span class="token punctuation">:</span>    while semaphore <span class="token operator">&lt;=</span> <span class="token property">0</span><span class="token punctuation">:</span>        <span class="token comment">// ç­‰å¾…ä¿¡å·é‡å¯ç”¨</span>    semaphore -= 1function <span class="token function">V</span><span class="token punctuation">(</span>semaphore<span class="token punctuation">)</span><span class="token punctuation">:</span>    semaphore += 1<span class="token comment">// å®šä¹‰Aæ–¹å‘è¿‡æ¡¥å‡½æ•°</span>function cross_bridge_<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    while num_people_on_bridge <span class="token operator">>=</span> max_people_on_bridge <span class="token operator">or</span> state <span class="token operator">==</span> <span class="token string">"B"</span><span class="token punctuation">:</span>        <span class="token comment">// ç­‰å¾…Aæ–¹å‘å¯ä»¥è¿‡æ¡¥çš„çŠ¶æ€</span>        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge += 1    state = <span class="token string">"B"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    <span class="token comment">// è¿‡æ¡¥æ“ä½œ</span>    <span class="token comment">// ...</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge -= 1    if num_people_on_bridge <span class="token operator">==</span> <span class="token property">0</span><span class="token punctuation">:</span>        state = <span class="token string">"A"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token comment">// å®šä¹‰Bæ–¹å‘è¿‡æ¡¥å‡½æ•°</span>function cross_bridge_<span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    while num_people_on_bridge <span class="token operator">>=</span> max_people_on_bridge <span class="token operator">or</span> state <span class="token operator">==</span> <span class="token string">"A"</span><span class="token punctuation">:</span>        <span class="token comment">// ç­‰å¾…Bæ–¹å‘å¯ä»¥è¿‡æ¡¥çš„çŠ¶æ€</span>        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge += 1    state = <span class="token string">"A"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    <span class="token comment">// è¿‡æ¡¥æ“ä½œ</span>    <span class="token comment">// ...</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>    num_people_on_bridge -= 1    if num_people_on_bridge <span class="token operator">==</span> <span class="token property">0</span><span class="token punctuation">:</span>        state = <span class="token string">"B"</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token comment">// åˆå§‹åŒ–è¡Œäººæ•°ç»„</span>people = [<span class="token string">"A1"</span><span class="token punctuation">,</span> <span class="token string">"A2"</span><span class="token punctuation">,</span> <span class="token string">"A3"</span><span class="token punctuation">,</span> <span class="token string">"B1"</span><span class="token punctuation">,</span> <span class="token string">"B2"</span><span class="token punctuation">,</span> <span class="token string">"B3"</span>]<span class="token comment">// å¯åŠ¨è¿‡æ¡¥è¿›ç¨‹</span>for i = 1 to <span class="token function">length</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span><span class="token punctuation">:</span>    if people[i][0] <span class="token operator">==</span> <span class="token string">"A"</span><span class="token punctuation">:</span>        start_<span class="token function">process</span><span class="token punctuation">(</span>cross_bridge_A<span class="token punctuation">)</span>    <span class="token property">else</span><span class="token punctuation">:</span>        start_<span class="token function">process</span><span class="token punctuation">(</span>cross_bridge_B<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ªé™åˆ¶ä¿¡å·é‡ <code>max_people_on_bridge</code>ï¼Œç”¨äºé™åˆ¶æ¡¥ä¸Šæœ€å¤šå¯ä»¥æ‰¿è½½å¤šå°‘äººã€‚åœ¨è¿‡æ¡¥å‰ï¼Œæ¯ä¸ªè¿›ç¨‹ä¼šå…ˆç­‰å¾…å½“å‰æ–¹å‘å¯ä»¥è¿‡æ¡¥çš„çŠ¶æ€å’Œæ¡¥ä¸Šäººæ•°æ²¡æœ‰è¶…è¿‡é™åˆ¶çš„çŠ¶æ€ï¼Œç„¶åæ‰§è¡Œè¿‡æ¡¥æ“ä½œï¼Œå¹¶åœ¨è¿‡æ¡¥åæ›´æ–°æ¡¥ä¸Šçš„äººæ•°å’Œå½“å‰è¿‡æ¡¥çš„æ–¹å‘ã€‚æœ€åï¼Œæ‰€æœ‰è¡Œäººçš„è¿‡æ¡¥æ“ä½œåœ¨å¤šä¸ªè¿›ç¨‹ä¸­å¹¶å‘æ‰§è¡Œã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ¡¥ä¸Šçš„äººæ•°å·²ç»è¾¾åˆ°äº†é™åˆ¶ï¼Œåˆ™è¿›ç¨‹éœ€è¦ç­‰å¾…å¦ä¸€ä¸ªæ–¹å‘çš„è¿›ç¨‹å…ˆè¿‡æ¡¥ï¼Œä»¥ä¿è¯æ¡¥ä¸Šçš„äººæ•°ä¸ä¼šè¶…è¿‡é™åˆ¶ã€‚</p><h3 id="10-å¯¹åº”åŒæ­¥æœºåˆ¶4ä¸ªå‡†åˆ™ï¼Œè®²è§£petersonç®—æ³•"><a href="#10-å¯¹åº”åŒæ­¥æœºåˆ¶4ä¸ªå‡†åˆ™ï¼Œè®²è§£petersonç®—æ³•" class="headerlink" title="10.å¯¹åº”åŒæ­¥æœºåˆ¶4ä¸ªå‡†åˆ™ï¼Œè®²è§£petersonç®—æ³•"></a>10.å¯¹åº”åŒæ­¥æœºåˆ¶4ä¸ªå‡†åˆ™ï¼Œè®²è§£petersonç®—æ³•</h3><p>ç­”ï¼šPetersonç®—æ³•æ˜¯ä¸€ç§ç»å…¸çš„ç”¨äºå®ç°å…±äº«èµ„æºçš„äº’æ–¥è®¿é—®çš„ç®—æ³•ï¼Œå®ƒæ˜¯ç”±Computer Scienceé¢†åŸŸçš„Gary L. Petersonåœ¨1981å¹´æå‡ºçš„ã€‚Petersonç®—æ³•æ˜¯ä¸€ç§è½¯ä»¶è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤å®ƒä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œè€Œä¸”å®ƒæ¯”ç¡¬ä»¶å®ç°çš„è§£å†³æ–¹æ¡ˆæ›´å…·æœ‰å¯ç§»æ¤æ€§å’Œçµæ´»æ€§ã€‚</p><p>Petersonç®—æ³•éµå¾ªäº†åŒæ­¥æœºåˆ¶çš„å››ä¸ªå‡†åˆ™ï¼š</p><ol><li>äº’æ–¥è®¿é—®ï¼šä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æºã€‚</li><li>ç©ºé—²è®©è¿›ï¼šå¦‚æœæ²¡æœ‰è¿›ç¨‹è®¿é—®å…±äº«èµ„æºï¼Œåˆ™ä»»ä½•è¯•å›¾è®¿é—®å…±äº«èµ„æºçš„è¿›ç¨‹éƒ½å¯ä»¥ç«‹å³è®¿é—®ã€‚</li><li>å¿™åˆ™ç­‰å¾…ï¼šå¦‚æœæœ‰è¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºï¼Œåˆ™è¯•å›¾è®¿é—®å…±äº«èµ„æºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚</li><li>æœ‰é™ç­‰å¾…ï¼šå¦‚æœæ²¡æœ‰è¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºï¼Œåˆ™è¿›ç¨‹å¿…é¡»æœ‰é™æ—¶é—´å†…è¿›å…¥ä¸´ç•ŒåŒºã€‚</li></ol><p>Petersonç®—æ³•çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ä¸¤ä¸ªå˜é‡ <code>turn</code> å’Œ <code>flag</code> æ¥ä¿è¯äº’æ–¥è®¿é—®ã€‚å…¶ä¸­ï¼Œ<code>turn</code> å˜é‡è¡¨ç¤ºå½“å‰è®¿é—®å…±äº«èµ„æºçš„è¿›ç¨‹ï¼Œ<code>flag</code> å˜é‡è¡¨ç¤ºå½“å‰è¿›ç¨‹æ˜¯å¦è¦è®¿é—®å…±äº«èµ„æºã€‚å½“ä¸€ä¸ªè¿›ç¨‹æƒ³è¦è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå®ƒä¼šè®¾ç½® <code>flag</code> ä¸º <code>true</code>ï¼Œå¹¶å°† <code>turn</code> è®¾ç½®ä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„ç¼–å·ã€‚ç„¶åï¼Œå®ƒä¼šè¿›å…¥ä¸€ä¸ªå¾ªç¯ï¼Œç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹çš„ <code>flag</code> ä¸º <code>false</code>ï¼Œå¹¶ä¸” <code>turn</code> ä¸ºè‡ªå·±çš„ç¼–å·ã€‚å¦‚æœç­‰å¾…æˆåŠŸï¼Œè¿›ç¨‹å°±å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œè®¿é—®å…±äº«èµ„æºã€‚å½“è®¿é—®ç»“æŸåï¼Œè¿›ç¨‹ä¼šå°† <code>flag</code> è®¾ç½®ä¸º <code>false</code>ï¼Œè¡¨ç¤ºä¸å†éœ€è¦è®¿é—®å…±äº«èµ„æºã€‚</p><p>ä»¥ä¸‹æ˜¯Petersonç®—æ³•çš„ä¼ªä»£ç ï¼š</p><figure><div class="code-wrapper"><pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// å®šä¹‰ä¸¤ä¸ªè¿›ç¨‹çš„ç¼–å·ï¼Œè¿™é‡Œå‡è®¾è¿›ç¨‹0å’Œè¿›ç¨‹1è¦è®¿é—®å…±äº«èµ„æº</span>const int P0 = 0<span class="token punctuation">;</span>const int P1 = 1<span class="token punctuation">;</span><span class="token comment">// å®šä¹‰ä¸¤ä¸ªæ ‡å¿—å˜é‡å’Œä¸€ä¸ªturnå˜é‡</span>bool flag[2] = <span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>int turn = P0<span class="token punctuation">;</span><span class="token comment">// è¿›ç¨‹0æƒ³è¦è®¿é—®å…±äº«èµ„æº</span>flag[P0] = <span class="token boolean">true</span><span class="token punctuation">;</span>turn = P1<span class="token punctuation">;</span>while <span class="token punctuation">(</span>flag[P1] &amp;&amp; turn <span class="token operator">==</span> P1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ç­‰å¾…è¿›ç¨‹1é‡Šæ”¾å…±äº«èµ„æº</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿›å…¥ä¸´ç•ŒåŒºï¼Œè®¿é—®å…±äº«èµ„æº</span>...<span class="token comment">// é€€å‡ºä¸´ç•ŒåŒºï¼Œé‡Šæ”¾å…±äº«èµ„æº</span>flag[P0] = <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">// è¿›ç¨‹1æƒ³è¦è®¿é—®å…±äº«èµ„æº</span>flag[P1] = <span class="token boolean">true</span><span class="token punctuation">;</span>turn = P0<span class="token punctuation">;</span>while <span class="token punctuation">(</span>flag[P0] &amp;&amp; turn <span class="token operator">==</span> P0<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ç­‰å¾…è¿›ç¨‹0é‡Šæ”¾å…±äº«èµ„æº</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿›å…¥ä¸´ç•ŒåŒºï¼Œè®¿é—®å…±äº«èµ„æº</span>...<span class="token comment">// é€€å‡ºä¸´ç•ŒåŒºï¼Œé‡Šæ”¾å…±äº«èµ„æº</span>flag[P1] = <span class="token boolean">false</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œ<code>flag</code> æ•°ç»„è¡¨ç¤ºè¿›ç¨‹æ˜¯å¦æƒ³è¦è®¿é—®å…±äº«èµ„æºï¼Œ<code>turn</code> å˜é‡è¡¨ç¤ºå½“å‰çš„è¿›ç¨‹ç¼–å·ã€‚å½“è¿›ç¨‹æƒ³è¦è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå®ƒä¼šå…ˆå°†è‡ªå·±çš„ <code>flag</code> è®¾ç½®ä¸º <code>true</code>ï¼Œå¹¶å°† <code>turn</code> è®¾ç½®ä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„ç¼–å·ã€‚ç„¶åï¼Œå®ƒä¼šè¿›å…¥ä¸€ä¸ªå¾ªç¯ï¼Œç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹çš„ <code>flag</code> ä¸º <code>false</code>ï¼Œå¹¶ä¸” <code>turn</code> ä¸ºè‡ªå·±çš„ç¼–å·ã€‚å¦‚æœç­‰å¾…æˆåŠŸï¼Œè¿›ç¨‹å°±å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œè®¿é—®å…±äº«èµ„æºã€‚å½“è®¿é—®ç»“æŸåï¼Œè¿›ç¨‹ä¼šå°†è‡ªå·±çš„ <code>flag</code> è®¾ç½®ä¸º <code>false</code>ï¼Œè¡¨ç¤ºä¸å†éœ€è¦è®¿é—®å…±äº«èµ„æºã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPetersonç®—æ³•å¯ä»¥ä¿è¯äº’æ–¥è®¿é—®ï¼Œä½†æ˜¯å®ƒä¸èƒ½ä¿è¯å…¬å¹³æ€§ã€‚å³ä½¿ä¸€ä¸ªè¿›ç¨‹ä¸€ç›´åœ¨ç­‰å¾…ï¼Œä¹Ÿä¸èƒ½ä¿è¯ä¸‹ä¸€ä¸ªè¿›ç¨‹ä¸€å®šä¼šè·å¾—è®¿é—®å…±äº«èµ„æºçš„æœºä¼šã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä½¿ç”¨æ›´åŠ é«˜çº§çš„ç®—æ³•æ¥ä¿è¯å…¬å¹³æ€§ã€‚</p><hr><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
    <categories>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
      <tag>OS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¬¢è¿æ‚¨ï¼Œè¯·è¿›ğŸï¸ğŸï¸ğŸï¸</title>
    <link href="/blog/208761566.html"/>
    <url>/blog/208761566.html</url>
    
    <content type="html"><![CDATA[<h1 id="æ¬¢è¿æ¥åˆ°è‹ç¦¾çš„ä¸ªäººåšå®¢ç½‘ç«™"><a href="#æ¬¢è¿æ¥åˆ°è‹ç¦¾çš„ä¸ªäººåšå®¢ç½‘ç«™" class="headerlink" title="æ¬¢è¿æ¥åˆ°è‹ç¦¾çš„ä¸ªäººåšå®¢ç½‘ç«™"></a>æ¬¢è¿æ¥åˆ°è‹ç¦¾çš„ä¸ªäººåšå®¢ç½‘ç«™</h1><p>å‹å‹ä»¬ï¼Œå¤§å®¶å¥½å‘€ï¼ğŸ«¶ğŸ«¶ğŸ«¶</p><p>æ„Ÿè°¢æ‚¨ç™¾å¿™ä¹‹ä¸­æŠ½å‡ºå®è´µçš„æ—¶é—´ï¼Œæ¥é€›æˆ‘çš„åšå®¢ç½‘ç«™ğŸ˜ğŸ˜ï¼Œæ—¢ç„¶æ¥äº†å…ˆè€ƒå¤§å®¶ä¸€é“Javaé¢˜ç›®å§ï¼Œåˆ«æ‰“æˆ‘ğŸ˜˜ğŸ˜˜ğŸ˜˜</p><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Test</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token class-name">Value</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        v<span class="token punctuation">.</span>i <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>        <span class="token function">second</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token class-name">Value</span> v<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        v<span class="token punctuation">.</span>i <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>        <span class="token class-name">Value</span> val <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        v <span class="token operator">=</span> val<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>i <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>ç­”æ¡ˆæ˜¯ï¼š<code>15 0 20</code></p><p>èªæ˜çš„ä½ ä¸€å®šç­”å¯¹äº†å§ï¼ğŸ’®ğŸ’®ğŸ’®</p><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘å°±è¯´è¯´å†™è¿™ä¸ªåšå®¢ç½‘ç«™çš„æ„ä¹‰å§ï¼ï¼ï¼ğŸï¸ğŸï¸ğŸï¸</p><ul><li>é¦–å…ˆæˆ‘å¯ä»¥ç”¨è¿™ä¸ªè®°ç¬”è®° ğŸ“ğŸ“ğŸ“</li><li>å…¶æ¬¡å¯ä»¥å’Œå¤§å®¶åˆ†äº«ï¼Œäº¤æµï¼Œå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ ğŸ’ªğŸ’ªğŸ’ª</li><li>æœ€åï¼Œå¯ä»¥è£…x ğŸ¤ªğŸ¤ªğŸ¤ª</li></ul><p>æŠ€æœ¯ä¸ç²¾ï¼Œå¯èƒ½ç½‘ç«™è¿˜æœ‰å¾ˆå¤šé—®é¢˜ï¼Œå¤§å®¶æµ·æ¶µï¼ï¼ï¼â¤ï¸â¤ï¸â¤ï¸</p>]]></content>
    
    
    
    <tags>
      
      <tag>WelCome</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
